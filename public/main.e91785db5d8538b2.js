"use strict";var eF=Object.defineProperty,tF=Object.defineProperties,nF=Object.getOwnPropertyDescriptors,E1=Object.getOwnPropertySymbols,rF=Object.prototype.hasOwnProperty,iF=Object.prototype.propertyIsEnumerable,b1=(Ye,we,P)=>we in Ye?eF(Ye,we,{enumerable:!0,configurable:!0,writable:!0,value:P}):Ye[we]=P,I1=(Ye,we)=>{for(var P in we||(we={}))rF.call(we,P)&&b1(Ye,P,we[P]);if(E1)for(var P of E1(we))iF.call(we,P)&&b1(Ye,P,we[P]);return Ye},D1=(Ye,we)=>tF(Ye,nF(we));(self.webpackChunktpClinicas=self.webpackChunktpClinicas||[]).push([[179],{2011:(Ye,we,P)=>{P.d(we,{Dh:()=>se,GT:()=>pe,cc:()=>Ae,hO:()=>He,on:()=>$,pX:()=>te,xv:()=>ce});var f=P(5e3),J=P(127),O=P(5813);Ye=P.hmd(Ye);const ae=["ngOnDestroy"],te=(be,Ge,We,De={})=>new Proxy(be,{get:(ve,Ee)=>We.runOutsideAngular(()=>{var je;if(be[Ee])return(null===(je=null==De?void 0:De.spy)||void 0===je?void 0:je.get)&&De.spy.get(Ee,be[Ee]),be[Ee];if(ae.indexOf(Ee)>-1)return()=>{};const Ue=Ge.toPromise().then(B=>{const _e=B&&B[Ee];return"function"==typeof _e?_e.bind(B):_e&&_e.then?_e.then(W=>We.run(()=>W)):We.run(()=>_e)});return new Proxy(()=>{},{get:(B,_e)=>Ue[_e],apply:(B,_e,W)=>Ue.then(ne=>{var X;const ge=ne&&ne(...W);return(null===(X=null==De?void 0:De.spy)||void 0===X?void 0:X.apply)&&De.spy.apply(Ee,W,ge),ge})})})}),pe=(be,Ge)=>{Ge.forEach(We=>{Object.getOwnPropertyNames(We.prototype||We).forEach(De=>{Object.defineProperty(be.prototype,De,Object.getOwnPropertyDescriptor(We.prototype||We,De))})})};class ue{constructor(Ge){return Ge}}const se=new f.OlP("angularfire2.app.options"),ce=new f.OlP("angularfire2.app.name");function $(be,Ge,We){const ve="object"==typeof We&&We||{};ve.name=ve.name||"string"==typeof We&&We||"[DEFAULT]";const je=J.Z.apps.filter(Ue=>Ue&&Ue.name===ve.name)[0]||Ge.runOutsideAngular(()=>J.Z.initializeApp(be,ve));try{JSON.stringify(be)!==JSON.stringify(je.options)&&U("error",`${je.name} Firebase App already initialized with different options${Ye.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ue){}return new ue(je)}const U=(be,...Ge)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[be](...Ge)},ee={provide:ue,useFactory:$,deps:[se,f.R0b,[new f.FiY,ce]]};let He=(()=>{class be{constructor(We){J.Z.registerVersion("angularfire",O.q4.full,"core"),J.Z.registerVersion("angularfire",O.q4.full,"app-compat"),J.Z.registerVersion("angular",f.q4F.full,We.toString())}static initializeApp(We,De){return{ngModule:be,providers:[{provide:se,useValue:We},{provide:ce,useValue:De}]}}}return be.\u0275fac=function(We){return new(We||be)(f.LFG(f.Lbi))},be.\u0275mod=f.oAB({type:be}),be.\u0275inj=f.cJS({providers:[ee]}),be})();function Ae(be,Ge,We,De,ve){const[,Ee,je]=globalThis.\u0275AngularfireInstanceCache.find(Ue=>Ue[0]===be)||[];if(Ee)return function Re(be,Ge){try{return be.toString()===Ge.toString()}catch(We){return be===Ge}}(ve,je)||(he("error",`${Ge} was already initialized on the ${We} Firebase App with different settings.${Le?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:ve,was:je})),Ee;{const Ue=De();return globalThis.\u0275AngularfireInstanceCache.push([be,Ue,ve]),Ue}}const Le=!!Ye.hot,he=(be,...Ge)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[be](...Ge)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Ye,we,P)=>{P.d(we,{q4:()=>ro,iC:()=>Al,HU:()=>vh,vb:()=>hp,JM:()=>Ca});var f=P(5e3),J=P(5867),O=P(5861),ae=P(9681),te=P(2090),pe=P(4859),ue=P(1877),se=P(8766);const ce="@firebase/installations",$="0.5.9",ee=`w:${$}`,He="FIS_v2",Ge=new te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function We(I){return I instanceof te.ZR&&I.code.includes("request-failed")}function De({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function ve(I){return{token:I.token,requestStatus:2,expiresIn:ne(I.expiresIn),creationTime:Date.now()}}function Ee(I,C){return je.apply(this,arguments)}function je(){return(je=(0,O.Z)(function*(I,C){const F=(yield C.json()).error;return Ge.create("request-failed",{requestName:I,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Ue({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function B(I,{refreshToken:C}){const M=Ue(I);return M.append("Authorization",function X(I){return`${He} ${I}`}(C)),M}function _e(I){return W.apply(this,arguments)}function W(){return(W=(0,O.Z)(function*(I){const C=yield I();return C.status>=500&&C.status<600?I():C})).apply(this,arguments)}function ne(I){return Number(I.replace("s","000"))}function ge(I,C){return oe.apply(this,arguments)}function oe(){return(oe=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:C},{fid:M}){const F=De(I),Y=Ue(I),re=C.getImmediate({optional:!0});if(re){const pt=yield re.getHeartbeatsHeader();pt&&Y.append("x-firebase-client",pt)}const Qe={method:"POST",headers:Y,body:JSON.stringify({fid:M,authVersion:He,appId:I.appId,sdkVersion:ee})},Je=yield _e(()=>fetch(F,Qe));if(Je.ok){const pt=yield Je.json();return{fid:pt.fid||M,registrationStatus:2,refreshToken:pt.refreshToken,authToken:ve(pt.authToken)}}throw yield Ee("Create Installation",Je)})).apply(this,arguments)}function Pe(I){return new Promise(C=>{setTimeout(C,I)})}const Ut=/^[cdef][\w-]{21}$/;function ze(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function Zt(I){return function st(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Ut.test(M)?M:""}catch(I){return""}}function yn(I){return`${I.appName}!${I.appId}`}const Jt=new Map;function qt(I,C){const M=yn(I);Nt(M,C),function Ji(I,C){const M=function Qn(){return!Gr&&"BroadcastChannel"in self&&(Gr=new BroadcastChannel("[Firebase] FID Change"),Gr.onmessage=I=>{Nt(I.data.key,I.data.fid)}),Gr}();M&&M.postMessage({key:I,fid:C}),function hr(){0===Jt.size&&Gr&&(Gr.close(),Gr=null)}()}(M,C)}function Nt(I,C){const M=Jt.get(I);if(M)for(const F of M)F(C)}let Gr=null;const qr="firebase-installations-store";let _i=null;function ct(){return _i||(_i=(0,se.X3)("firebase-installations-database",1,{upgrade:(I,C)=>{0===C&&I.createObjectStore(qr)}})),_i}function zr(I,C){return gn.apply(this,arguments)}function gn(){return(gn=(0,O.Z)(function*(I,C){const M=yn(I),Y=(yield ct()).transaction(qr,"readwrite"),re=Y.objectStore(qr),Me=yield re.get(M);return yield re.put(C,M),yield Y.done,(!Me||Me.fid!==C.fid)&&qt(I,C.fid),C})).apply(this,arguments)}function _n(I){return js.apply(this,arguments)}function js(){return(js=(0,O.Z)(function*(I){const C=yn(I),F=(yield ct()).transaction(qr,"readwrite");yield F.objectStore(qr).delete(C),yield F.done})).apply(this,arguments)}function Wr(I,C){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,O.Z)(function*(I,C){const M=yn(I),Y=(yield ct()).transaction(qr,"readwrite"),re=Y.objectStore(qr),Me=yield re.get(M),Qe=C(Me);return void 0===Qe?yield re.delete(M):yield re.put(Qe,M),yield Y.done,Qe&&(!Me||Me.fid!==Qe.fid)&&qt(I,Qe.fid),Qe})).apply(this,arguments)}function In(I){return vi.apply(this,arguments)}function vi(){return(vi=(0,O.Z)(function*(I){let C;const M=yield Wr(I.appConfig,F=>{const Y=Do(F),re=Bt(I,Y);return C=re.registrationPromise,re.installationEntry});return""===M.fid?{installationEntry:yield C}:{installationEntry:M,registrationPromise:C}})).apply(this,arguments)}function Do(I){return $s(I||{fid:ze(),registrationStatus:0})}function Bt(I,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Ge.create("app-offline"))};const M={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function nt(I,C){return ft.apply(this,arguments)}(I,M);return{installationEntry:M,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:Jn(I)}:{installationEntry:C}}function ft(){return(ft=(0,O.Z)(function*(I,C){try{const M=yield ge(I,C);return zr(I.appConfig,M)}catch(M){throw We(M)&&409===M.customData.serverCode?yield _n(I.appConfig):yield zr(I.appConfig,{fid:C.fid,registrationStatus:0}),M}})).apply(this,arguments)}function Jn(I){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,O.Z)(function*(I){let C=yield kt(I.appConfig);for(;1===C.registrationStatus;)yield Pe(100),C=yield kt(I.appConfig);if(0===C.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield In(I);return F||M}return C})).apply(this,arguments)}function kt(I){return Wr(I,C=>{if(!C)throw Ge.create("installation-not-found");return $s(C)})}function $s(I){return function Xn(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function er(I,C){return L.apply(this,arguments)}function L(){return(L=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:C},M){const F=G(I,M),Y=B(I,M),re=C.getImmediate({optional:!0});if(re){const pt=yield re.getHeartbeatsHeader();pt&&Y.append("x-firebase-client",pt)}const Qe={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:ee,appId:I.appId}})},Je=yield _e(()=>fetch(F,Qe));if(Je.ok)return ve(yield Je.json());throw yield Ee("Generate Auth Token",Je)})).apply(this,arguments)}function G(I,{fid:C}){return`${De(I)}/${C}/authTokens:generate`}function q(I){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,O.Z)(function*(I,C=!1){let M;const F=yield Wr(I.appConfig,re=>{if(!_t(re))throw Ge.create("not-registered");const Me=re.authToken;if(!C&&nn(Me))return re;if(1===Me.requestStatus)return M=H(I,C),re;{if(!navigator.onLine)throw Ge.create("app-offline");const Qe=xn(re);return M=Ze(I,Qe),Qe}});return M?yield M:F.authToken})).apply(this,arguments)}function H(I,C){return Q.apply(this,arguments)}function Q(){return(Q=(0,O.Z)(function*(I,C){let M=yield xe(I.appConfig);for(;1===M.authToken.requestStatus;)yield Pe(100),M=yield xe(I.appConfig);const F=M.authToken;return 0===F.requestStatus?q(I,C):F})).apply(this,arguments)}function xe(I){return Wr(I,C=>{if(!_t(C))throw Ge.create("not-registered");return function fr(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Ze(I,C){return ut.apply(this,arguments)}function ut(){return(ut=(0,O.Z)(function*(I,C){try{const M=yield er(I,C),F=Object.assign(Object.assign({},C),{authToken:M});return yield zr(I.appConfig,F),M}catch(M){if(!We(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield zr(I.appConfig,F)}else yield _n(I.appConfig);throw M}})).apply(this,arguments)}function _t(I){return void 0!==I&&2===I.registrationStatus}function nn(I){return 2===I.requestStatus&&!function yt(I){const C=Date.now();return C<I.creationTime||I.creationTime+I.expiresIn<C+36e5}(I)}function xn(I){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:C})}function oa(){return(oa=(0,O.Z)(function*(I){const C=I,{installationEntry:M,registrationPromise:F}=yield In(C);return F?F.catch(console.error):q(C).catch(console.error),M.fid})).apply(this,arguments)}function aa(){return(aa=(0,O.Z)(function*(I,C=!1){const M=I;return yield Mn(M),(yield q(M,C)).token})).apply(this,arguments)}function Mn(I){return pr.apply(this,arguments)}function pr(){return(pr=(0,O.Z)(function*(I){const{registrationPromise:C}=yield In(I);C&&(yield C)})).apply(this,arguments)}function Co(I){return Ge.create("missing-app-config-values",{valueName:I})}const xr="installations",rt=I=>{const C=I.getProvider("app").getImmediate(),M=function Gn(I){if(!I||!I.options)throw Co("App Configuration");if(!I.name)throw Co("App Name");const C=["projectId","apiKey","appId"];for(const M of C)if(!I.options[M])throw Co(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(C);return{app:C,appConfig:M,heartbeatServiceProvider:(0,ae._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Yt=I=>{const C=I.getProvider("app").getImmediate(),M=(0,ae._getProvider)(C,xr).getImmediate();return{getId:()=>function Ya(I){return oa.apply(this,arguments)}(M),getToken:Y=>function Qa(I){return aa.apply(this,arguments)}(M,Y)}};(function Mr(){(0,ae._registerComponent)(new pe.wA(xr,rt,"PUBLIC")),(0,ae._registerComponent)(new pe.wA("installations-internal",Yt,"PRIVATE"))})(),(0,ae.registerVersion)(ce,$),(0,ae.registerVersion)(ce,$,"esm2017");const Oi="@firebase/remote-config",vn=new te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Jf{constructor(C,M,F,Y){this.client=C,this.storage=M,this.storageCache=F,this.logger=Y}isCachedDataFresh(C,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,Y=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${Y}.`),Y}fetch(C){var M=this;return(0,O.Z)(function*(){const[F,Y]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Y&&M.isCachedDataFresh(C.cacheMaxAgeMillis,F))return Y;C.eTag=Y&&Y.eTag;const re=yield M.client.fetch(C),Me=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&Me.push(M.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(Me),re})()}}function pc(I=navigator){return I.languages&&I.languages[0]||I.language}class tr{constructor(C,M,F,Y,re,Me){this.firebaseInstallations=C,this.sdkVersion=M,this.namespace=F,this.projectId=Y,this.apiKey=re,this.appId=Me}fetch(C){var M=this;return(0,O.Z)(function*(){const[F,Y]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},Je={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:Y,app_id:M.appId,language_code:pc()},pt={method:"POST",headers:Qe,body:JSON.stringify(Je)},Lt=fetch(Me,pt),vt=new Promise(($n,Lr)=>{C.signal.addEventListener(()=>{const Ho=new Error("The operation was aborted.");Ho.name="AbortError",Lr(Ho)})});let En;try{yield Promise.race([Lt,vt]),En=yield Lt}catch($n){let Lr="fetch-client-network";throw"AbortError"===$n.name&&(Lr="fetch-timeout"),vn.create(Lr,{originalErrorMessage:$n.message})}let Zn=En.status;const Ns=En.headers.get("ETag")||void 0;let zi,Fr;if(200===En.status){let $n;try{$n=yield En.json()}catch(Lr){throw vn.create("fetch-client-parse",{originalErrorMessage:Lr.message})}zi=$n.entries,Fr=$n.state}if("INSTANCE_STATE_UNSPECIFIED"===Fr?Zn=500:"NO_CHANGE"===Fr?Zn=304:("NO_TEMPLATE"===Fr||"EMPTY_CONFIG"===Fr)&&(zi={}),304!==Zn&&200!==Zn)throw vn.create("fetch-status",{httpStatus:Zn});return{status:Zn,eTag:Ns,config:zi}})()}}class Xf{constructor(C,M){this.client=C,this.storage=M}fetch(C){var M=this;return(0,O.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:M,backoffCount:F}){var Y=this;return(0,O.Z)(function*(){yield function Is(I,C){return new Promise((M,F)=>{const Y=Math.max(C-Date.now(),0),re=setTimeout(M,Y);I.addEventListener(()=>{clearTimeout(re),F(vn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,M);try{const re=yield Y.client.fetch(C);return yield Y.storage.deleteThrottleMetadata(),re}catch(re){if(!function gc(I){if(!(I instanceof te.ZR&&I.customData))return!1;const C=Number(I.customData.httpStatus);return 429===C||500===C||503===C||504===C}(re))throw re;const Me={throttleEndTimeMillis:Date.now()+(0,te.$s)(F),backoffCount:F+1};return yield Y.storage.setThrottleMetadata(Me),Y.attemptFetch(C,Me)}})()}}class mc{constructor(C,M,F,Y,re){this.app=C,this._client=M,this._storageCache=F,this._storage=Y,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function tl(I,C){const M=I.target.error||void 0;return vn.create(C,{originalErrorMessage:M&&M.message})}const Ds="app_namespace_store";class rp{constructor(C,M,F,Y=function np(){return new Promise((I,C)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{C(tl(F,"storage-open"))},M.onsuccess=F=>{I(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Ds,{keyPath:"compositeKey"})}}catch(M){C(vn.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=C,this.appName=M,this.namespace=F,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((Y,re)=>{const Qe=F.transaction([Ds],"readonly").objectStore(Ds),Je=M.createCompositeKey(C);try{const pt=Qe.get(Je);pt.onerror=Lt=>{re(tl(Lt,"storage-get"))},pt.onsuccess=Lt=>{const vt=Lt.target.result;Y(vt?vt.value:void 0)}}catch(pt){re(vn.create("storage-get",{originalErrorMessage:pt&&pt.message}))}})})()}set(C,M){var F=this;return(0,O.Z)(function*(){const Y=yield F.openDbPromise;return new Promise((re,Me)=>{const Je=Y.transaction([Ds],"readwrite").objectStore(Ds),pt=F.createCompositeKey(C);try{const Lt=Je.put({compositeKey:pt,value:M});Lt.onerror=vt=>{Me(tl(vt,"storage-set"))},Lt.onsuccess=()=>{re()}}catch(Lt){Me(vn.create("storage-set",{originalErrorMessage:Lt&&Lt.message}))}})})()}delete(C){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((Y,re)=>{const Qe=F.transaction([Ds],"readwrite").objectStore(Ds),Je=M.createCompositeKey(C);try{const pt=Qe.delete(Je);pt.onerror=Lt=>{re(tl(Lt,"storage-delete"))},pt.onsuccess=()=>{Y()}}catch(pt){re(vn.create("storage-delete",{originalErrorMessage:pt&&pt.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class _c{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const M=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),Y=C.storage.getActiveConfig(),re=yield M;re&&(C.lastFetchStatus=re);const Me=yield F;Me&&(C.lastSuccessfulFetchTimestampMillis=Me);const Qe=yield Y;Qe&&(C.activeConfig=Qe)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function tu(){return vc.apply(this,arguments)}function vc(){return(vc=(0,O.Z)(function*(){if(!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(I){return!1}})).apply(this,arguments)}!function To(){(0,ae._registerComponent)(new pe.wA("remote-config",function I(C,{instanceIdentifier:M}){const F=C.getProvider("app").getImmediate(),Y=C.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw vn.create("registration-window");if(!(0,te.hl)())throw vn.create("indexed-db-unavailable");const{projectId:re,apiKey:Me,appId:Qe}=F.options;if(!re)throw vn.create("registration-project-id");if(!Me)throw vn.create("registration-api-key");if(!Qe)throw vn.create("registration-app-id");const Je=new rp(Qe,F.name,M=M||"firebase"),pt=new _c(Je),Lt=new ue.Yd(Oi);Lt.logLevel=ue.in.ERROR;const vt=new tr(Y,ae.SDK_VERSION,M,re,Me,Qe),En=new Xf(vt,Je),Zn=new Jf(En,Je,pt,Lt),Ns=new mc(F,Zn,pt,Je,Lt);return function Xt(I){const C=(0,te.m9)(I);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Ns),Ns},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Oi,"0.3.8"),(0,ae.registerVersion)(Oi,"0.3.8","esm2017")}();const wc="/firebase-messaging-sw.js",nr="/firebase-cloud-messaging-push-scope",qs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ao="google.c.a.c_id",Ec="google.c.a.c_l",lh="google.c.a.ts",bc="google.c.a.e";var So=(()=>{return(I=So||(So={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",So;var I})();function gr(I){const C=new Uint8Array(I);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ic(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),Y=new Uint8Array(F.length);for(let re=0;re<F.length;++re)Y[re]=F.charCodeAt(re);return Y}const mr="fcm_token_details_db",Kr="fcm_token_object_Store";function nl(I){return Dc.apply(this,arguments)}function Dc(){return Dc=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(mr))return null;let C=null;return(yield(0,se.X3)(mr,5,{upgrade:(F=(0,O.Z)(function*(Y,re,Me,Qe){var Je;if(re<2||!Y.objectStoreNames.contains(Kr))return;const pt=Qe.objectStore(Kr),Lt=yield pt.index("fcmSenderId").get(I);if(yield pt.clear(),Lt)if(2===re){const vt=Lt;if(!vt.auth||!vt.p256dh||!vt.endpoint)return;C={token:vt.fcmToken,createTime:null!==(Je=vt.createTime)&&void 0!==Je?Je:Date.now(),subscriptionOptions:{auth:vt.auth,p256dh:vt.p256dh,endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:"string"==typeof vt.vapidKey?vt.vapidKey:gr(vt.vapidKey)}}}else if(3===re){const vt=Lt;C={token:vt.fcmToken,createTime:vt.createTime,subscriptionOptions:{auth:gr(vt.auth),p256dh:gr(vt.p256dh),endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:gr(vt.vapidKey)}}}else if(4===re){const vt=Lt;C={token:vt.fcmToken,createTime:vt.createTime,subscriptionOptions:{auth:gr(vt.auth),p256dh:gr(vt.p256dh),endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:gr(vt.vapidKey)}}}}),function(re,Me,Qe,Je){return F.apply(this,arguments)})})).close(),yield(0,se.Lj)(mr),yield(0,se.Lj)("fcm_vapid_details_db"),yield(0,se.Lj)("undefined"),rl(C)?C:null;var F}),Dc.apply(this,arguments)}function rl(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:C}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const Bi="firebase-messaging-store";let ch=null;function en(){return ch||(ch=(0,se.X3)("firebase-messaging-database",1,{upgrade:(I,C)=>{0===C&&I.createObjectStore(Bi)}})),ch}function ha(I){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,O.Z)(function*(I){const C=zn(I),F=yield(yield en()).transaction(Bi).objectStore(Bi).get(C);if(F)return F;{const Y=yield nl(I.appConfig.senderId);if(Y)return yield zt(I,Y),Y}})).apply(this,arguments)}function zt(I,C){return fa.apply(this,arguments)}function fa(){return(fa=(0,O.Z)(function*(I,C){const M=zn(I),Y=(yield en()).transaction(Bi,"readwrite");return yield Y.objectStore(Bi).put(C,M),yield Y.done,C})).apply(this,arguments)}function nu(I){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,O.Z)(function*(I){const C=zn(I),F=(yield en()).transaction(Bi,"readwrite");yield F.objectStore(Bi).delete(C),yield F.done})).apply(this,arguments)}function zn({appConfig:I}){return I.appId}const fn=new te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ji(I,C){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,O.Z)(function*(I,C){const M=yield Ro(I),F=Ts(C),Y={method:"POST",headers:M,body:JSON.stringify(F)};let re;try{re=yield(yield fetch($i(I.appConfig),Y)).json()}catch(Me){throw fn.create("token-subscribe-failed",{errorInfo:Me})}if(re.error)throw fn.create("token-subscribe-failed",{errorInfo:re.error.message});if(!re.token)throw fn.create("token-subscribe-no-token");return re.token})).apply(this,arguments)}function Zs(I,C){return ts.apply(this,arguments)}function ts(){return(ts=(0,O.Z)(function*(I,C){const M=yield Ro(I),F=Ts(C.subscriptionOptions),Y={method:"PATCH",headers:M,body:JSON.stringify(F)};let re;try{re=yield(yield fetch(`${$i(I.appConfig)}/${C.token}`,Y)).json()}catch(Me){throw fn.create("token-update-failed",{errorInfo:Me})}if(re.error)throw fn.create("token-update-failed",{errorInfo:re.error.message});if(!re.token)throw fn.create("token-update-no-token");return re.token})).apply(this,arguments)}function pa(I,C){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,O.Z)(function*(I,C){const F={method:"DELETE",headers:yield Ro(I)};try{const re=yield(yield fetch(`${$i(I.appConfig)}/${C}`,F)).json();if(re.error)throw fn.create("token-unsubscribe-failed",{errorInfo:re.error.message})}catch(Y){throw fn.create("token-unsubscribe-failed",{errorInfo:Y})}})).apply(this,arguments)}function $i({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Ro(I){return dt.apply(this,arguments)}function dt(){return(dt=(0,O.Z)(function*({appConfig:I,installations:C}){const M=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Ts({p256dh:I,auth:C,endpoint:M,vapidKey:F}){const Y={web:{endpoint:M,auth:C,p256dh:I}};return F!==qs&&(Y.web.applicationPubKey=F),Y}const ol=6048e5;function ga(I){return al.apply(this,arguments)}function al(){return(al=(0,O.Z)(function*(I){const C=yield Po(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:C.endpoint,auth:gr(C.getKey("auth")),p256dh:gr(C.getKey("p256dh"))},F=yield ha(I.firebaseDependencies);if(F){if(su(F.subscriptionOptions,M))return Date.now()>=F.createTime+ol?ul(I,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield pa(I.firebaseDependencies,F.token)}catch(Y){console.warn(Y)}return Ce(I.firebaseDependencies,M)}return Ce(I.firebaseDependencies,M)})).apply(this,arguments)}function ru(I){return iu.apply(this,arguments)}function iu(){return(iu=(0,O.Z)(function*(I){const C=yield ha(I.firebaseDependencies);C&&(yield pa(I.firebaseDependencies,C.token),yield nu(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function ul(I,C){return No.apply(this,arguments)}function No(){return(No=(0,O.Z)(function*(I,C){try{const M=yield Zs(I.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:M,createTime:Date.now()});return yield zt(I.firebaseDependencies,F),M}catch(M){throw yield ru(I),M}})).apply(this,arguments)}function Ce(I,C){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,O.Z)(function*(I,C){const F={token:yield ji(I,C),createTime:Date.now(),subscriptionOptions:C};return yield zt(I,F),F.token})).apply(this,arguments)}function Po(I,C){return un.apply(this,arguments)}function un(){return(un=(0,O.Z)(function*(I,C){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ic(C)})})).apply(this,arguments)}function su(I,C){return C.vapidKey===I.vapidKey&&C.endpoint===I.endpoint&&C.auth===I.auth&&C.p256dh===I.p256dh}function Ks(I){const C={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Yr(I,C){if(!C.notification)return;I.notification={};const M=C.notification.title;M&&(I.notification.title=M);const F=C.notification.body;F&&(I.notification.body=F);const Y=C.notification.image;Y&&(I.notification.image=Y)}(C,I),function ll(I,C){!C.data||(I.data=C.data)}(C,I),function cl(I,C){if(!C.fcmOptions)return;I.fcmOptions={};const M=C.fcmOptions.link;M&&(I.fcmOptions.link=M);const F=C.fcmOptions.analytics_label;F&&(I.fcmOptions.analyticsLabel=F)}(C,I),C}function dl(I){return"object"==typeof I&&!!I&&Ao in I}function Cc(I,C){const M=[];for(let F=0;F<I.length;F++)M.push(I.charAt(F)),F<C.length&&M.push(C.charAt(F));return M.join("")}function ns(I){return fn.create("missing-app-config-values",{valueName:I})}Cc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Cc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class rr{constructor(C,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function ip(I){if(!I||!I.options)throw ns("App Configuration Object");if(!I.name)throw ns("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const F of C)if(!M[F])throw ns(F);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:Y,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Qr(I){return ou.apply(this,arguments)}function ou(){return(ou=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(wc,{scope:nr}),I.swRegistration.update().catch(()=>{})}catch(C){throw fn.create("failed-service-worker-registration",{browserErrorMessage:C.message})}})).apply(this,arguments)}function As(I,C){return bi.apply(this,arguments)}function bi(){return(bi=(0,O.Z)(function*(I,C){if(!C&&!I.swRegistration&&(yield Qr(I)),C||!I.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw fn.create("invalid-sw-registration");I.swRegistration=C}})).apply(this,arguments)}function hl(I,C){return au.apply(this,arguments)}function au(){return(au=(0,O.Z)(function*(I,C){C?I.vapidKey=C:I.vapidKey||(I.vapidKey=qs)})).apply(this,arguments)}function fl(){return(fl=(0,O.Z)(function*(I,C){if(!navigator)throw fn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw fn.create("permission-blocked");return yield hl(I,null==C?void 0:C.vapidKey),yield As(I,null==C?void 0:C.serviceWorkerRegistration),ga(I)})).apply(this,arguments)}function ma(I,C,M){return lu.apply(this,arguments)}function lu(){return(lu=(0,O.Z)(function*(I,C,M){const F=cu(C);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[Ao],message_name:M[Ec],message_time:M[lh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function cu(I){switch(I){case So.NOTIFICATION_CLICKED:return"notification_open";case So.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ac(){return(Ac=(0,O.Z)(function*(I,C){const M=C.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===So.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Ks(M)):I.onMessageHandler.next(Ks(M)));const F=M.data;dl(F)&&"1"===F[bc]&&(yield ma(I,M.messageType,F))})).apply(this,arguments)}const du="@firebase/messaging",Sc=I=>{const C=new rr(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Tc(I,C){return Ac.apply(this,arguments)}(C,M)),C},Oo=I=>{const C=I.getProvider("messaging").getImmediate();return{getToken:F=>function uu(I,C){return fl.apply(this,arguments)}(C,F)}};function hu(){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,O.Z)(function*(){try{yield(0,te.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,te.hl)()&&(0,te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function xc(){(0,ae._registerComponent)(new pe.wA("messaging",Sc,"PUBLIC")),(0,ae._registerComponent)(new pe.wA("messaging-internal",Oo,"PRIVATE")),(0,ae.registerVersion)(du,"0.9.13"),(0,ae.registerVersion)(du,"0.9.13","esm2017")}();const Mc="analytics",sp="firebase_id",rs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Js="https://www.googletagmanager.com/gtag/js",Nn=new ue.Yd("@firebase/analytics");function Rc(I){return Promise.all(I.map(C=>C.catch(M=>M)))}function op(I,C){const M=document.createElement("script");M.src=`${Js}?l=${I}&id=${C}`,M.async=!0,document.head.appendChild(M)}function ko(I,C,M,F,Y,re){return fu.apply(this,arguments)}function fu(){return(fu=(0,O.Z)(function*(I,C,M,F,Y,re){const Me=F[Y];try{if(Me)yield C[Me];else{const Je=(yield Rc(M)).find(pt=>pt.measurementId===Y);Je&&(yield C[Je.appId])}}catch(Qe){Nn.error(Qe)}I("config",Y,re)})).apply(this,arguments)}function ap(I,C,M,F,Y){return is.apply(this,arguments)}function is(){return(is=(0,O.Z)(function*(I,C,M,F,Y){try{let re=[];if(Y&&Y.send_to){let Me=Y.send_to;Array.isArray(Me)||(Me=[Me]);const Qe=yield Rc(M);for(const Je of Me){const pt=Qe.find(vt=>vt.measurementId===Je),Lt=pt&&C[pt.appId];if(!Lt){re=[];break}re.push(Lt)}}0===re.length&&(re=Object.values(C)),yield Promise.all(re),I("event",F,Y||{})}catch(re){Nn.error(re)}})).apply(this,arguments)}function pn(){const I=window.document.getElementsByTagName("script");for(const C of Object.values(I))if(C.src&&C.src.includes(Js))return C;return null}const Ii=new te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Fo=new class Hi{constructor(C={},M=1e3){this.throttleMetadata=C,this.intervalMillis=M}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,M){this.throttleMetadata[C]=M}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Nc(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function ss(I){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,O.Z)(function*(I){var C;const{appId:M,apiKey:F}=I,Y={method:"GET",headers:Nc(F)},re=rs.replace("{app-id}",M),Me=yield fetch(re,Y);if(200!==Me.status&&304!==Me.status){let Qe="";try{const Je=yield Me.json();(null===(C=Je.error)||void 0===C?void 0:C.message)&&(Qe=Je.error.message)}catch(Je){}throw Ii.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:Qe})}return Me.json()})).apply(this,arguments)}function jt(I){return Et.apply(this,arguments)}function Et(){return(Et=(0,O.Z)(function*(I,C=Fo,M){const{appId:F,apiKey:Y,measurementId:re}=I.options;if(!F)throw Ii.create("no-app-id");if(!Y){if(re)return{measurementId:re,appId:F};throw Ii.create("no-api-key")}const Me=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Qe=new Pc;return setTimeout((0,O.Z)(function*(){Qe.abort()}),void 0!==M?M:6e4),Lo({appId:F,apiKey:Y,measurementId:re},Me,Qe,C)})).apply(this,arguments)}function Lo(I,C,M){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,O.Z)(function*(I,{throttleEndTimeMillis:C,backoffCount:M},F,Y=Fo){const{appId:re,measurementId:Me}=I;try{yield gl(F,C)}catch(Qe){if(Me)return Nn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${Qe.message}]`),{appId:re,measurementId:Me};throw Qe}try{const Qe=yield ss(I);return Y.deleteThrottleMetadata(re),Qe}catch(Qe){if(!ml(Qe)){if(Y.deleteThrottleMetadata(re),Me)return Nn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${Qe.message}]`),{appId:re,measurementId:Me};throw Qe}const Je=503===Number(Qe.customData.httpStatus)?(0,te.$s)(M,Y.intervalMillis,30):(0,te.$s)(M,Y.intervalMillis),pt={throttleEndTimeMillis:Date.now()+Je,backoffCount:M+1};return Y.setThrottleMetadata(re,pt),Nn.debug(`Calling attemptFetch again in ${Je} millis`),Lo(I,pt,F,Y)}})).apply(this,arguments)}function gl(I,C){return new Promise((M,F)=>{const Y=Math.max(C-Date.now(),0),re=setTimeout(M,Y);I.addEventListener(()=>{clearTimeout(re),F(Ii.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function ml(I){if(!(I instanceof te.ZR&&I.customData))return!1;const C=Number(I.customData.httpStatus);return 429===C||500===C||503===C||504===C}class Pc{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}function yl(){return os.apply(this,arguments)}function os(){return(os=(0,O.Z)(function*(){if(!(0,te.hl)())return Nn.warn(Ii.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,te.eu)()}catch(I){return Nn.warn(Ii.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function Uo(){return(Uo=(0,O.Z)(function*(I,C,M,F,Y,re,Me){var Qe;const Je=jt(I);Je.then(Zn=>{M[Zn.measurementId]=Zn.appId,I.options.measurementId&&Zn.measurementId!==I.options.measurementId&&Nn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Zn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Zn=>Nn.error(Zn)),C.push(Je);const pt=yl().then(Zn=>{if(Zn)return F.getId()}),[Lt,vt]=yield Promise.all([Je,pt]);pn()||op(re,Lt.measurementId),Y("js",new Date);const En=null!==(Qe=null==Me?void 0:Me.config)&&void 0!==Qe?Qe:{};return En.origin="firebase",En.update=!0,null!=vt&&(En[sp]=vt),Y("config",Lt.measurementId,En),Lt.measurementId})).apply(this,arguments)}class xs{constructor(C){this.app=C}_delete(){return delete ir[this.app.options.appId],Promise.resolve()}}let ir={},_a=[];const gu={};let mu,ln,as="dataLayer",Di=!1;function va(I,C,M){!function sn(){const I=[];if((0,te.ru)()&&I.push("This is a browser extension environment."),(0,te.zI)()||I.push("Cookies are not available."),I.length>0){const C=I.map((F,Y)=>`(${Y+1}) ${F}`).join(" "),M=Ii.create("invalid-analytics-context",{errorInfo:C});Nn.warn(M.message)}}();const F=I.options.appId;if(!F)throw Ii.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Ii.create("no-api-key");Nn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ir[F])throw Ii.create("already-exists",{id:F});if(!Di){!function Xs(I){let C=[];Array.isArray(window[I])?C=window[I]:window[I]=C}(as);const{wrappedGtag:re,gtagCore:Me}=function up(I,C,M,F,Y){let re=function(...Me){window[F].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(re=window[Y]),window[Y]=function pu(I,C,M,F){function re(){return(re=(0,O.Z)(function*(Me,Qe,Je){try{"event"===Me?yield ap(I,C,M,Qe,Je):"config"===Me?yield ko(I,C,M,F,Qe,Je):I("set",Qe)}catch(pt){Nn.error(pt)}})).apply(this,arguments)}return function Y(Me,Qe,Je){return re.apply(this,arguments)}}(re,I,C,M),{gtagCore:re,wrappedGtag:window[Y]}}(ir,_a,gu,as,"gtag");ln=re,mu=Me,Di=!0}return ir[F]=function jn(I,C,M,F,Y,re,Me){return Uo.apply(this,arguments)}(I,_a,gu,C,mu,as,M),new xs(I)}function wa(){return(wa=(0,O.Z)(function*(I,C,M,F,Y){if(Y&&Y.global)I("event",M,F);else{const re=yield C;I("event",M,Object.assign(Object.assign({},F),{send_to:re}))}})).apply(this,arguments)}function jo(){return vl.apply(this,arguments)}function vl(){return(vl=(0,O.Z)(function*(){if((0,te.ru)()||!(0,te.zI)()||!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(I){return!1}})).apply(this,arguments)}const Oc="@firebase/analytics";!function kc(){(0,ae._registerComponent)(new pe.wA(Mc,(C,{options:M})=>va(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ae._registerComponent)(new pe.wA("analytics-internal",function I(C){try{const M=C.getProvider(Mc).getImmediate();return{logEvent:(F,Y,re)=>function mh(I,C,M,F){I=(0,te.m9)(I),function to(I,C,M,F,Y){return wa.apply(this,arguments)}(ln,ir[I.app.options.appId],C,M,F).catch(Y=>Nn.error(Y))}(M,F,Y,re)}}catch(M){throw Ii.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ae.registerVersion)(Oc,"0.7.9"),(0,ae.registerVersion)(Oc,"0.7.9","esm2017")}();var bl=P(4408),Il=P(7565);const ei=new class wn extends Il.v{}(class $o extends bl.o{constructor(C,M){super(C,M),this.scheduler=C,this.work=M}schedule(C,M=0){return M>0?super.schedule(C,M):(this.delay=M,this.state=C,this.scheduler.flush(this),this)}execute(C,M){return M>0||this.closed?super.execute(C,M):this._execute(C,M)}requestAsyncId(C,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,M,F):C.flush(this)}});var Dl=P(4986),cp=P(8505),Or=P(9468),yr=P(5363);const ro=new f.GfV("7.3.0"),Ms="__angularfire_symbol__analyticsIsSupportedValue",ti="__angularfire_symbol__analyticsIsSupported",Rs="__angularfire_symbol__remoteConfigIsSupportedValue",Ci="__angularfire_symbol__remoteConfigIsSupported",Da="__angularfire_symbol__messagingIsSupportedValue",yh="__angularfire_symbol__messagingIsSupported";function Ca(I,C,M){if(C){if(1===C.length)return C[0];const re=C.filter(Me=>Me.app===M);if(1===re.length)return re[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[ti]||(globalThis[ti]=jo().then(I=>globalThis[Ms]=I).catch(()=>globalThis[Ms]=!1)),globalThis[yh]||(globalThis[yh]=hu().then(I=>globalThis[Da]=I).catch(()=>globalThis[Da]=!1)),globalThis[Ci]||(globalThis[Ci]=tu().then(I=>globalThis[Rs]=I).catch(()=>globalThis[Rs]=!1));const hp=(I,C)=>{const M=C?[C]:(0,J.C6)(),F=[];return M.forEach(Y=>{Y.container.getProvider(I).instances.forEach(Me=>{F.includes(Me)||F.push(Me)})}),F};function Gi(){}class Lc{constructor(C,M=ei){this.zone=C,this.delegate=M}now(){return this.delegate.now()}schedule(C,M,F){const Y=this.zone;return this.delegate.schedule(function(Me){Y.runGuarded(()=>{C.apply(this,[Me])})},M,F)}}class Cl{constructor(C){this.zone=C,this.task=null}call(C,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Gi,{},Gi,Gi)),M.pipe((0,cp.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let vh=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Lc(Zone.current)),this.insideAngular=M.run(()=>new Lc(Zone.current,Dl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(f.LFG(f.R0b))},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function ni(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Al(I){return ni(),function qi(I){return function(M){return(M=M.lift(new Cl(I.ngZone))).pipe((0,Or.R)(I.outsideAngular),(0,yr.Q)(I.insideAngular))}}(ni())(I)}},2090:(Ye,we,P)=>{P.d(we,{$s:()=>kt,BH:()=>He,G6:()=>Ue,L:()=>se,LL:()=>oe,Mn:()=>Ee,Sg:()=>Ae,UG:()=>he,US:()=>pe,ZB:()=>U,ZR:()=>ge,b$:()=>We,d:()=>De,eu:()=>_e,hl:()=>B,jU:()=>be,m9:()=>er,ne:()=>_i,pd:()=>_s,r3:()=>dr,ru:()=>Ge,tV:()=>ce,uI:()=>Le,vZ:()=>Gr,w1:()=>ve,xO:()=>hr,xb:()=>Nt,z$:()=>Re,zI:()=>W,zd:()=>Pi});const ae=function(L){const G=[];let q=0;for(let Ie=0;Ie<L.length;Ie++){let H=L.charCodeAt(Ie);H<128?G[q++]=H:H<2048?(G[q++]=H>>6|192,G[q++]=63&H|128):55296==(64512&H)&&Ie+1<L.length&&56320==(64512&L.charCodeAt(Ie+1))?(H=65536+((1023&H)<<10)+(1023&L.charCodeAt(++Ie)),G[q++]=H>>18|240,G[q++]=H>>12&63|128,G[q++]=H>>6&63|128,G[q++]=63&H|128):(G[q++]=H>>12|224,G[q++]=H>>6&63|128,G[q++]=63&H|128)}return G},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(L,G){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let H=0;H<L.length;H+=3){const Q=L[H],xe=H+1<L.length,Ze=xe?L[H+1]:0,ut=H+2<L.length,_t=ut?L[H+2]:0;let xn=(15&Ze)<<2|_t>>6,fr=63&_t;ut||(fr=64,xe||(xn=64)),Ie.push(q[Q>>2],q[(3&Q)<<4|Ze>>4],q[xn],q[fr])}return Ie.join("")},encodeString(L,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(L):this.encodeByteArray(ae(L),G)},decodeString(L,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(L):function(L){const G=[];let q=0,Ie=0;for(;q<L.length;){const H=L[q++];if(H<128)G[Ie++]=String.fromCharCode(H);else if(H>191&&H<224){const Q=L[q++];G[Ie++]=String.fromCharCode((31&H)<<6|63&Q)}else if(H>239&&H<365){const ut=((7&H)<<18|(63&L[q++])<<12|(63&L[q++])<<6|63&L[q++])-65536;G[Ie++]=String.fromCharCode(55296+(ut>>10)),G[Ie++]=String.fromCharCode(56320+(1023&ut))}else{const Q=L[q++],xe=L[q++];G[Ie++]=String.fromCharCode((15&H)<<12|(63&Q)<<6|63&xe)}}return G.join("")}(this.decodeStringToByteArray(L,G))},decodeStringToByteArray(L,G){this.init_();const q=G?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let H=0;H<L.length;){const Q=q[L.charAt(H++)],Ze=H<L.length?q[L.charAt(H)]:0;++H;const _t=H<L.length?q[L.charAt(H)]:64;++H;const yt=H<L.length?q[L.charAt(H)]:64;if(++H,null==Q||null==Ze||null==_t||null==yt)throw Error();Ie.push(Q<<2|Ze>>4),64!==_t&&(Ie.push(Ze<<4&240|_t>>2),64!==yt&&Ie.push(_t<<6&192|yt))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}},se=function(L){return function(L){const G=ae(L);return pe.encodeByteArray(G,!0)}(L).replace(/\./g,"")},ce=function(L){try{return pe.decodeString(L,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function U(L,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return G}for(const q in G)!G.hasOwnProperty(q)||!ee(q)||(L[q]=U(L[q],G[q]));return L}function ee(L){return"__proto__"!==L}class He{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,q)=>{this.resolve=G,this.reject=q})}wrapCallback(G){return(q,Ie)=>{q?this.reject(q):this.resolve(Ie),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(q):G(q,Ie))}}}function Ae(L,G){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=G||"demo-project",H=L.iat||0,Q=L.sub||L.user_id;if(!Q)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const xe=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:H,exp:H+3600,auth_time:H,sub:Q,user_id:Q,firebase:{sign_in_provider:"custom",identities:{}}},L);return[se(JSON.stringify({alg:"none",type:"JWT"})),se(JSON.stringify(xe)),""].join(".")}function Re(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Le(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Re())}function he(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(L){return!1}}function be(){return"object"==typeof self&&self.self===self}function Ge(){const L="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof L&&void 0!==L.id}function We(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function De(){return Re().indexOf("Electron/")>=0}function ve(){const L=Re();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function Ee(){return Re().indexOf("MSAppHost/")>=0}function Ue(){return!he()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B(){return"object"==typeof indexedDB}function _e(){return new Promise((L,G)=>{try{let q=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",H=self.indexedDB.open(Ie);H.onsuccess=()=>{H.result.close(),q||self.indexedDB.deleteDatabase(Ie),L(!0)},H.onupgradeneeded=()=>{q=!1},H.onerror=()=>{var Q;G((null===(Q=H.error)||void 0===Q?void 0:Q.message)||"")}}catch(q){G(q)}})}function W(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ge extends Error{constructor(G,q,Ie){super(q),this.code=G,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oe.prototype.create)}}class oe{constructor(G,q,Ie){this.service=G,this.serviceName=q,this.errors=Ie}create(G,...q){const Ie=q[0]||{},H=`${this.service}/${G}`,Q=this.errors[G],xe=Q?function Pe(L,G){return L.replace(st,(q,Ie)=>{const H=G[Ie];return null!=H?String(H):`<${Ie}?>`})}(Q,Ie):"Error";return new ge(H,`${this.serviceName}: ${xe} (${H}).`,Ie)}}const st=/\{\$([^}]+)}/g;function dr(L,G){return Object.prototype.hasOwnProperty.call(L,G)}function Nt(L){for(const G in L)if(Object.prototype.hasOwnProperty.call(L,G))return!1;return!0}function Gr(L,G){if(L===G)return!0;const q=Object.keys(L),Ie=Object.keys(G);for(const H of q){if(!Ie.includes(H))return!1;const Q=L[H],xe=G[H];if(Qn(Q)&&Qn(xe)){if(!Gr(Q,xe))return!1}else if(Q!==xe)return!1}for(const H of Ie)if(!q.includes(H))return!1;return!0}function Qn(L){return null!==L&&"object"==typeof L}function hr(L){const G=[];for(const[q,Ie]of Object.entries(L))Array.isArray(Ie)?Ie.forEach(H=>{G.push(encodeURIComponent(q)+"="+encodeURIComponent(H))}):G.push(encodeURIComponent(q)+"="+encodeURIComponent(Ie));return G.length?"&"+G.join("&"):""}function Pi(L){const G={};return L.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[H,Q]=Ie.split("=");G[decodeURIComponent(H)]=decodeURIComponent(Q)}}),G}function _s(L){const G=L.indexOf("?");if(!G)return"";const q=L.indexOf("#",G);return L.substring(G,q>0?q:void 0)}function _i(L,G){const q=new ct(L,G);return q.subscribe.bind(q)}class ct{constructor(G,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{G(this)}).catch(Ie=>{this.error(Ie)})}next(G){this.forEachObserver(q=>{q.next(G)})}error(G){this.forEachObserver(q=>{q.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,q,Ie){let H;if(void 0===G&&void 0===q&&void 0===Ie)throw new Error("Missing Observer.");H=function gn(L,G){if("object"!=typeof L||null===L)return!1;for(const q of G)if(q in L&&"function"==typeof L[q])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:q,complete:Ie},void 0===H.next&&(H.next=_n),void 0===H.error&&(H.error=_n),void 0===H.complete&&(H.complete=_n);const Q=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch(xe){}}),this.observers.push(H),Q}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,G)}sendOne(G,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{q(this.observers[G])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _n(){}function kt(L,G=1e3,q=2){const Ie=G*Math.pow(q,L),H=Math.round(.5*Ie*(Math.random()-.5)*2);return Math.min(144e5,Ie+H)}function er(L){return L&&L._delegate?L._delegate:L}},4999:(Ye,we,P)=>{var f=P(5e3);let J=null;function O(){return J}const ue=new f.OlP("DocumentToken");let se=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ce(){return(0,f.LFG)(U)}()},providedIn:"platform"}),n})();const $=new f.OlP("Location Initialized");let U=(()=>{class n extends se{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){ee()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){ee()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function He(){return new U((0,f.LFG)(ue))}()},providedIn:"platform"}),n})();function ee(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Re(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Le(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function be(n){const e=(0,f.LFG)(ue).location;return new We((0,f.LFG)(se),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ge=new f.OlP("appBaseHref");let We=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Le(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Le(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Le(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se),f.LFG(Ge,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Le(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Le(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se),f.LFG(Ge,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),ve=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Re(Ue(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Le(r))}normalize(t){return n.stripTrailingSlash(function je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Le,n.joinWithSlash=Ae,n.stripTrailingSlash=Re,n.\u0275fac=function(t){return new(t||n)(f.LFG(he),f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ee(){return new ve((0,f.LFG)(he),(0,f.LFG)(se))}()},providedIn:"root"}),n})();function Ue(n){return n.replace(/\/index.html$/,"")}class Es{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Un=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Es(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),Gs(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Gs(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Gs(n,e){n.context.$implicit=e.item}let qn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Xt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Xa("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Xa("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Xt{constructor(){this.$implicit=null,this.ngIf=null}}function Xa(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let bc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function xo(n){return"server"===n}let rl=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new Mo((0,f.LFG)(ue),window)}),n})();class Mo{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Bi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=il(this.window.history)||il(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function il(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ws extends class ha extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function te(n){J||(J=n)}(new Ws)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function fa(){return zt=zt||document.querySelector("base"),zt?zt.getAttribute("href"):null}();return null==t?null:function Cs(n){nu=nu||document.createElement("a"),nu.setAttribute("href",n);const e=nu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){zt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function la(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let nu,zt=null;const zn=new f.OlP("TRANSITION_ID"),fn=[{provide:f.ip1,useFactory:function sl(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[zn,ue,f.zs3],multi:!0}];class ji{static init(){(0,f.VLi)(new ji)}addToWindow(e){f.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const o=f.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(w){d=d||w,u--,0==u&&r(d)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Wn=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Zs=new f.OlP("EventManagerPlugins");let ts=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Zs),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class pa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Ei=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),$i=(()=>{class n extends Ei{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ro),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ro))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Ro(n){O().remove(n)}const dt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ts=/%COMP%/g;function No(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?No(n,o,t):(o=o.replace(Ts,n),t.push(o))}return t}function Ce(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Po=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new un(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Yr(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case f.ifc.ShadowDom:return new ll(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=No(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ts),f.LFG($i),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class un{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(dt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=dt[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=dt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,o&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ce(r)):this.eventManager.addEventListener(e,t,Ce(r))}}class Yr extends un{constructor(e,t,r,o){super(e),this.component=r;const u=No(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function iu(n){return"_ngcontent-%COMP%".replace(Ts,n)}(o+"-"+r.id),this.hostAttr=function ul(n){return"_nghost-%COMP%".replace(Ts,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ll extends un{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=No(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let cl=(()=>{class n extends pa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const dl=["alt","control","meta","shift"],ip={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ns={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},rr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Qr=(()=>{class n extends pa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(dl.forEach(w=>{const D=r.indexOf(w);D>-1&&(r.splice(D,1),d+=w+".")}),d+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static getEventFullKey(t){let r="",o=function ou(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ns.hasOwnProperty(e)&&(e=ns[e]))}return ip[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),dl.forEach(u=>{u!=o&&rr[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const uu=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function As(){Ws.makeCurrent(),ji.init()},multi:!0},{provide:ue,useFactory:function hl(){return(0,f.RDi)(document),document},deps:[]}]),fl=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function bi(){return new f.qLn},deps:[]},{provide:Zs,useClass:cl,multi:!0,deps:[ue,f.R0b,f.Lbi]},{provide:Zs,useClass:Qr,multi:!0,deps:[ue]},{provide:Po,useClass:Po,deps:[ts,$i,f.AFp]},{provide:f.FYo,useExisting:Po},{provide:Ei,useExisting:$i},{provide:$i,useClass:$i,deps:[ue]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:ts,useClass:ts,deps:[Zs,f.R0b]},{provide:class en{},useClass:Wn,deps:[]}];let ma=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:zn,useExisting:f.AFp},fn]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:fl,imports:[bc,f.hGG]}),n})();"undefined"!=typeof window&&window;var pn=P(8996),Ss=P(8306);const{isArray:Ii}=Array,{getPrototypeOf:eo,prototype:fh,keys:Hi}=Object;function Fo(n){if(1===n.length){const e=n[0];if(Ii(e))return{args:e,keys:null};if(function Nc(n){return n&&"object"==typeof n&&eo(n)===fh}(e)){const t=Hi(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ss=P(8421),Pr=P(7669),jt=P(5403),Et=P(4004);const{isArray:Lo}=Array;function gl(n){return(0,Et.U)(e=>function Vo(n,e){return Lo(e)?n(...e):n(e)}(n,e))}function ml(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let yl=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),os=(()=>{class n extends yl{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const jn=new f.OlP("NgValueAccessor"),ir={provide:jn,useExisting:(0,f.Gpc)(()=>as),multi:!0},gu=new f.OlP("CompositionEventMode");let as=(()=>{class n extends yl{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function _a(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(gu,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([ir]),f.qOj]}),n})();function Jr(n){return null==n||0===n.length}function mu(n){return null!=n&&"number"==typeof n.length}const ln=new f.OlP("NgValidators"),Di=new f.OlP("NgAsyncValidators"),lp=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class sn{static min(e){return function va(n){return e=>{if(Jr(e.value)||Jr(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function to(n){return e=>{if(Jr(e.value)||Jr(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function wa(n){return Jr(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function _l(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function us(n){return Jr(n.value)||lp.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Ea(n){return e=>Jr(e.value)||!mu(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Bo(n){return e=>mu(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function ba(n){if(!n)return Xr;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Jr(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return wl(e)}static composeAsync(e){return ph(e)}}function Xr(n){return null}function no(n){return null!=n}function ls(n){const e=(0,f.QGY)(n)?(0,pn.D)(n):n;return(0,f.CqO)(e),e}function Ia(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function yu(n,e){return e.map(t=>t(n))}function vl(n){return n.map(e=>function jo(n){return!n.validate}(e)?e:t=>e.validate(t))}function wl(n){if(!n)return null;const e=n.filter(no);return 0==e.length?null:function(t){return Ia(yu(t,e))}}function cn(n){return null!=n?wl(vl(n)):null}function ph(n){if(!n)return null;const e=n.filter(no);return 0==e.length?null:function(t){return function Pc(...n){const e=(0,Pr.jO)(n),{args:t,keys:r}=Fo(n),o=new Ss.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let w=d,D=d;for(let x=0;x<d;x++){let N=!1;(0,ss.Xf)(t[x]).subscribe((0,jt.x)(u,j=>{N||(N=!0,D--),m[x]=j},()=>w--,void 0,()=>{(!w||!N)&&(D||u.next(r?ml(r,m):m),u.complete())}))}});return e?o.pipe(gl(e)):o}(yu(t,e).map(ls)).pipe((0,Et.U)(Ia))}}function gh(n){return null!=n?ph(vl(n)):null}function mh(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Oc(n){return n._rawValidators}function El(n){return n._rawAsyncValidators}function kc(n){return n?Array.isArray(n)?n:[n]:[]}function bl(n,e){return Array.isArray(n)?n.includes(e):n===e}function $o(n,e){const t=kc(e);return kc(n).forEach(o=>{bl(t,o)||t.push(o)}),t}function Il(n,e){return kc(e).filter(t=>!bl(n,t))}class wn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=cn(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=gh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ei extends wn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Pn extends wn{get formDirective(){return null}get path(){return null}}class Dl{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let yr=(()=>{class n extends Dl{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ei,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})(),ro=(()=>{class n extends Dl{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Pn,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[f.qOj]}),n})();function io(n,e){Al(n,e),e.valueAccessor.writeValue(n.value),function Ta(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&I(n,e)})}(n,e),function C(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Aa(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&I(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Tl(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ti(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),qi(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function cs(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Al(n,e){const t=Oc(n);null!==e.validator?n.setValidators(mh(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=El(n);null!==e.asyncValidator?n.setAsyncValidators(mh(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();cs(e._rawValidators,o),cs(e._rawAsyncValidators,o)}function qi(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=Oc(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=El(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return cs(e._rawValidators,r),cs(e._rawAsyncValidators,r),t}function I(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function M(n,e){Al(n,e)}function Lt(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function En(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const zi="VALID",Fr="INVALID",$n="PENDING",Lr="DISABLED";function Vc(n){return(vu(n)?n.validators:n)||null}function Uc(n){return Array.isArray(n)?cn(n):n||null}function _u(n,e){return(vu(e)?e.asyncValidators:n)||null}function Sl(n){return Array.isArray(n)?gh(n):n||null}function vu(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const xl=n=>n instanceof Hc,Bc=n=>n instanceof wh,Sa=n=>n instanceof Ml;function wu(n){return xl(n)?n.value:n.getRawValue()}function jc(n,e){const t=Bc(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[e])throw new f.vHH(1001,"")}function Km(n,e){Bc(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new f.vHH(1002,"")})}class $c{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Uc(this._rawValidators),this._composedAsyncValidatorFn=Sl(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===zi}get invalid(){return this.status===Fr}get pending(){return this.status==$n}get disabled(){return this.status===Lr}get enabled(){return this.status!==Lr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Uc(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Sl(e)}addValidators(e){this.setValidators($o(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators($o(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Il(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Il(e,this._rawAsyncValidators))}hasValidator(e){return bl(this._rawValidators,e)}hasAsyncValidator(e){return bl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=$n,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Lr,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=zi,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===zi||this.status===$n)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Lr:zi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=$n,this._hasOwnPendingAsyncValidator=!0;const t=ls(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function Ho(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=Bc(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:Sa(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?Lr:this.errors?Fr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($n)?$n:this._anyControlsHaveStatus(Fr)?Fr:zi}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){vu(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Hc extends $c{constructor(e=null,t,r){super(Vc(t),_u(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),vu(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){En(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){En(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class wh extends $c{constructor(e,t,r){super(Vc(t),_u(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Km(this,e),Object.keys(e).forEach(r=>{jc(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=wu(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Ml extends $c{constructor(e,t,r){super(Vc(t),_u(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Km(this,e),e.forEach((r,o)=>{jc(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>wu(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Ym={provide:Pn,useExisting:(0,f.Gpc)(()=>Go)},Rl=(()=>Promise.resolve(null))();let Go=(()=>{class n extends Pn{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new f.vpe,this.form=new wh({},cn(t),gh(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Rl.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),io(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Rl.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Rl.then(()=>{const r=this._findContainer(t.path),o=new wh({});M(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Rl.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Rl.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Lt(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ln,10),f.Y36(Di,10))},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([Ym]),f.qOj]}),n})(),Pl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),mp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const Dh=new f.OlP("NgModelWithFormControlWarning"),m0={provide:Pn,useExisting:(0,f.Gpc)(()=>Iu)};let Iu=(()=>{class n extends Pn{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(qi(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return io(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Ti(t.control||null,t,!1),En(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Lt(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(Ti(r||null,t),xl(o)&&(io(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);M(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function F(n,e){return qi(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Al(this.form,this),this._oldForm&&qi(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ln,10),f.Y36(Di,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([m0]),f.qOj,f.TTD]}),n})();const xa={provide:ei,useExisting:(0,f.Gpc)(()=>Du)};let Du=(()=>{class n extends ei{constructor(t,r,o,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function vt(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===as?t=u:function pt(n){return Object.getPrototypeOf(n.constructor)===os}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Je(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function ni(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(Pn,13),f.Y36(ln,10),f.Y36(Di,10),f.Y36(jn,10),f.Y36(Dh,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([xa]),f.qOj,f.TTD]}),n})();const _p={provide:jn,useExisting:(0,f.Gpc)(()=>Ma),multi:!0};function Ai(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Ma=(()=>{class n extends os{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const o=Ai(this._getOptionId(t),t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function Ol(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&f.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[f._Bn([_p]),f.qOj]}),n})(),Sh=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Ai(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(Ma,9))},n.\u0275dir=f.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const vp={provide:jn,useExisting:(0,f.Gpc)(()=>Ra),multi:!0};function xh(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Ra=(()=>{class n extends os{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const o=t.map(u=>this._getOptionId(u));r=(u,d)=>{u._setSelected(o.indexOf(d.toString())>-1)}}else r=(o,u)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const o=[],u=r.selectedOptions;if(void 0!==u){const d=u;for(let m=0;m<d.length;m++){const D=this._getOptionValue(d[m].value);o.push(D)}}else{const d=r.options;for(let m=0;m<d.length;m++){const w=d[m];if(w.selected){const D=this._getOptionValue(w.value);o.push(D)}}}this.value=o,t(o)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function _0(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&f.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[f._Bn([vp]),f.qOj]}),n})(),zc=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(xh(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(xh(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(Ra,9))},n.\u0275dir=f.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Dp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[mp]]}),n})(),b0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Dp]}),n})(),Tu=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Dh,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Dp]}),n})(),Nh=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let m,u=null,d=null;return null!=r&&(function Vr(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,d=null!=r.asyncValidators?r.asyncValidators:null,m=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,d=null!=r.asyncValidator?r.asyncValidator:null)),new wh(o,{asyncValidators:d,updateOn:m,validators:u})}control(t,r,o){return new Hc(t,r,o)}array(t,r,o){const u=t.map(d=>this._createControl(d));return new Ml(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return xl(t)||Bc(t)||Sa(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:Tu}),n})();function gt(...n){const e=(0,Pr.yG)(n);return(0,pn.D)(n,e)}var dn=P(7579);class _r extends dn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Na=P(4671),Ph=P(9672);function Au(n,e,t){n?(0,Ph.f)(t,n,e):e()}var kl=P(576);function ed(n,e){const t=(0,kl.m)(n)?n:()=>n,r=o=>o.error(t());return new Ss.y(e?o=>e.schedule(r,0,o):r)}const Su=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var nd=P(8189);function Oh(...n){return function rd(){return(0,nd.J)(1)}()((0,pn.D)(n,(0,Pr.yG)(n)))}function so(n){return new Ss.y(e=>{(0,ss.Xf)(n()).subscribe(e)})}var oo=P(515),Tp=P(727),Si=P(4482);function Fl(){return(0,Si.e)((n,e)=>{let t=null;n._refCount++;const r=(0,jt.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ap extends Ss.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Si.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Tp.w0;const t=this.getSubject();e.add(this.source.subscribe((0,jt.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Tp.w0.EMPTY)}return e}refCount(){return Fl()(this)}}function tn(n,e){return(0,Si.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,jt.x)(r,w=>{null==o||o.unsubscribe();let D=0;const x=u++;(0,ss.Xf)(n(w,x)).subscribe(o=(0,jt.x)(r,N=>r.next(e?e(w,N,x,D++):N),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var Ll=P(5698);function xu(...n){const e=(0,Pr.yG)(n);return(0,Si.e)((t,r)=>{(e?Oh(n,t,e):Oh(n,t)).subscribe(r)})}function sy(n,e,t,r,o){return(u,d)=>{let m=t,w=e,D=0;u.subscribe((0,jt.x)(d,x=>{const N=D++;w=m?n(w,x,N):(m=!0,x),r&&d.next(w)},o&&(()=>{m&&d.next(w),d.complete()})))}}function ii(n,e){return(0,Si.e)(sy(n,e,arguments.length>=2,!0))}function xi(n,e){return(0,Si.e)((t,r)=>{let o=0;t.subscribe((0,jt.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function ao(n){return(0,Si.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,jt.x)(t,void 0,void 0,d=>{u=(0,ss.Xf)(n(d,ao(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var sr=P(5577);function Vl(n,e){return(0,kl.m)(e)?(0,sr.z)(n,e,1):(0,sr.z)(n,1)}function Ul(n){return n<=0?()=>oo.E:(0,Si.e)((e,t)=>{let r=[];e.subscribe((0,jt.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Sp(n=oy){return(0,Si.e)((e,t)=>{let r=!1;e.subscribe((0,jt.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function oy(){return new Su}function xp(n){return(0,Si.e)((e,t)=>{let r=!1;e.subscribe((0,jt.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function y(n,e){const t=arguments.length>=2;return r=>r.pipe(n?xi((o,u)=>n(o,u,r)):Na.y,(0,Ll.q)(1),t?xp(e):Sp(()=>new Su))}var h=P(8505);class v{constructor(e,t){this.id=e,this.url=t}}class T extends v{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class R extends v{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class z extends v{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class de extends v{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Fe extends v{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ke extends v{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class at extends v{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ot extends v{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class On extends v{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class si{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Pa{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class kh{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mp{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Oa{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class id{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Rt="primary";class sd{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function zo(n){return new sd(n)}const Fh="ngNavigationCancelingError";function Lh(n){const e=Error("NavigationCancelingError: "+n);return e[Fh]=!0,e}function ay(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function uo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Rp(n[o],e[o]))return!1;return!0}function Rp(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function uy(n){return Array.prototype.concat.apply([],n)}function Np(n){return n.length>0?n[n.length-1]:null}function Ur(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function lo(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,pn.D)(Promise.resolve(n)):gt(n)}const jl={exact:function Uh(n,e,t){if(!Nu(n.segments,e.segments)||!Bh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Uh(n.children[r],e.children[r],t))return!1;return!0},subset:dy},ly={exact:function TI(n,e){return uo(n,e)},subset:function AI(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Rp(n[t],e[t]))},ignored:()=>!0};function cy(n,e,t){return jl[t.paths](n.root,e.root,t.matrixParams)&&ly[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function dy(n,e,t){return hy(n,e,e.segments,t)}function hy(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Nu(o,t)||e.hasChildren()||!Bh(o,t,r))}if(n.segments.length===t.length){if(!Nu(n.segments,t)||!Bh(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!dy(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Nu(n.segments,o)&&Bh(n.segments,o,r)&&n.children[Rt])&&hy(n.children[Rt],e,u,r)}}function Bh(n,e,t){return e.every((r,o)=>ly[t](n[o].parameters,r.parameters))}class ka{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zo(this.queryParams)),this._queryParamMap}toString(){return jh.serialize(this)}}class Vt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ur(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kp(this)}}class Ru{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=zo(this.parameters)),this._parameterMap}toString(){return gy(this)}}function Nu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class py{}class Op{parse(e){const t=new PI(e);return new ka(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${od(e.root,!0)}`,r=function T0(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Fp(t)}=${Fp(o)}`).join("&"):`${Fp(t)}=${Fp(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function C0(n){return encodeURI(n)}(e.fragment)}`:""}`}}const jh=new Op;function kp(n){return n.segments.map(e=>gy(e)).join("/")}function od(n,e){if(!n.hasChildren())return kp(n);if(e){const t=n.children[Rt]?od(n.children[Rt],!1):"",r=[];return Ur(n.children,(o,u)=>{u!==Rt&&r.push(`${u}:${od(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function fy(n,e){let t=[];return Ur(n.children,(r,o)=>{o===Rt&&(t=t.concat(e(r,o)))}),Ur(n.children,(r,o)=>{o!==Rt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Rt?[od(n.children[Rt],!1)]:[`${o}:${od(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Rt]?`${kp(n)}/${t[0]}`:`${kp(n)}/(${t.join("//")})`}}function D0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fp(n){return D0(n).replace(/%3B/gi,";")}function $h(n){return D0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Hh(n){return decodeURIComponent(n)}function SI(n){return Hh(n.replace(/\+/g,"%20"))}function gy(n){return`${$h(n.path)}${function xI(n){return Object.keys(n).map(e=>`;${$h(e)}=${$h(n[e])}`).join("")}(n.parameters)}`}const MI=/^[^\/()?;=#]+/;function Lp(n){const e=n.match(MI);return e?e[0]:""}const co=/^[^=?&#]+/,A0=/^[^&#]+/;class PI{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Vt([],{}):new Vt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Rt]=new Vt(e,t)),r}parseSegment(){const e=Lp(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ru(Hh(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Lp(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Lp(this.remaining);o&&(r=o,this.capture(r))}e[Hh(t)]=Hh(r)}parseQueryParam(e){const t=function RI(n){const e=n.match(co);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function NI(n){const e=n.match(A0);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=SI(t),u=SI(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Lp(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Rt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Rt]:new Vt([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class S0{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=my(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=my(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Vp(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Vp(e,this._root).map(t=>t.value)}}function my(n,e){if(n===e.value)return e;for(const t of e.children){const r=my(n,t);if(r)return r}return null}function Vp(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Vp(n,t);if(r.length)return r.unshift(e),r}return[]}class Fa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ad(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class x0 extends S0{constructor(e,t){super(e),this.snapshot=t,vy(this,e)}toString(){return this.snapshot.toString()}}function St(n,e){const t=function M0(n,e){const d=new Wi([],{},{},"",{},Rt,e,null,n.root,-1,{});return new _y("",new Fa(d,[]))}(n,e),r=new _r([new Ru("",{})]),o=new _r({}),u=new _r({}),d=new _r({}),m=new _r(""),w=new $l(r,o,d,m,u,Rt,e,t.root);return w.snapshot=t.root,new x0(new Fa(w,[]),t)}class $l{constructor(e,t,r,o,u,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Et.U)(e=>zo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Et.U)(e=>zo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function yy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function Up(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Wi{constructor(e,t,r,o,u,d,m,w,D,x,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.routeConfig=w,this._urlSegment=D,this._lastPathIndex=x,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=zo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _y extends S0{constructor(e,t){super(t),this.url=e,vy(this,t)}toString(){return Bp(this._root)}}function vy(n,e){e.value._routerState=n,e.children.forEach(t=>vy(n,t))}function Bp(n){const e=n.children.length>0?` { ${n.children.map(Bp).join(", ")} } `:"";return`${n.value}${e}`}function ho(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,uo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),uo(e.params,t.params)||n.params.next(t.params),function CI(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!uo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),uo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Gh(n,e){const t=uo(n.params,e.params)&&function Pp(n,e){return Nu(n,e)&&n.every((t,r)=>uo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Gh(n.parent,e.parent))}function Hl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function bS(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Hl(n,r,o);return Hl(n,r)})}(n,e,t);return new Fa(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>Hl(n,m)),d}}const r=function N0(n){return new $l(new _r(n.url),new _r(n.params),new _r(n.queryParams),new _r(n.fragment),new _r(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Hl(n,u));return new Fa(r,o)}}function Gl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Pu(n){return"object"==typeof n&&null!=n&&n.outlets}function qh(n,e,t,r,o){let u={};if(r&&Ur(r,(m,w)=>{u[w]=Array.isArray(m)?m.map(D=>`${D}`):`${m}`}),n===e)return new ka(t,u,o);const d=jp(n,e,t);return new ka(d,u,o)}function jp(n,e,t){const r={};return Ur(n.children,(o,u)=>{r[u]=o===e?t:jp(o,e,t)}),new Vt(n.segments,r)}class $p{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Gl(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Pu);if(o&&o!==Np(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class wy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ey(n,e,t){if(n||(n=new Vt([],{})),0===n.segments.length&&n.hasChildren())return by(n,e,t);const r=function LI(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(Pu(m))break;const w=`${m}`,D=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&D&&"object"==typeof D&&void 0===D.outlets){if(!k0(w,D,d))return u;r+=2}else{if(!k0(w,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Vt(n.segments.slice(0,r.pathIndex),{});return u.children[Rt]=new Vt(n.segments.slice(r.pathIndex),n.children),by(u,0,o)}return r.match&&0===o.length?new Vt(n.segments,{}):r.match&&!n.hasChildren()?P0(n,e,t):r.match?by(n,0,o):P0(n,e,t)}function by(n,e,t){if(0===t.length)return new Vt(n.segments,{});{const r=function FI(n){return Pu(n[0])?n[0].outlets:{[Rt]:n}}(t),o={};return Ur(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=Ey(n.children[d],e,u))}),Ur(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Vt(n.segments,o)}}function P0(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Pu(u)){const w=O0(u.outlets);return new Vt(r,w)}if(0===o&&Gl(t[0])){r.push(new Ru(n.segments[e].path,Iy(t[0]))),o++;continue}const d=Pu(u)?u.outlets[Rt]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&Gl(m)?(r.push(new Ru(d,Iy(m))),o+=2):(r.push(new Ru(d,{})),o++)}return new Vt(r,{})}function O0(n){const e={};return Ur(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=P0(new Vt([],{}),0,t))}),e}function Iy(n){const e={};return Ur(n,(t,r)=>e[r]=`${t}`),e}function k0(n,e,t){return n==t.path&&uo(e,t.parameters)}class CS{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ho(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=ad(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),Ur(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=ad(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=ad(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=ad(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new id(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Mp(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(ho(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),ho(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function TS(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=w,d.outlet&&d.outlet.activateWith(o,w),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class F0{constructor(e,t){this.routes=e,this.module=t}}function ql(n){return"function"==typeof n}function ud(n){return n instanceof ka}const Os=Symbol("INITIAL_VALUE");function zl(){return tn(n=>function iy(...n){const e=(0,Pr.yG)(n),t=(0,Pr.jO)(n),{args:r,keys:o}=Fo(n);if(0===r.length)return(0,pn.D)([],e);const u=new Ss.y(function ri(n,e,t=Na.y){return r=>{Au(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let w=0;w<o;w++)Au(e,()=>{const D=(0,pn.D)(n[w],e);let x=!1;D.subscribe((0,jt.x)(r,N=>{u[w]=N,x||(x=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>ml(o,d):Na.y));return t?u.pipe(gl(t)):u}(n.map(e=>e.pipe((0,Ll.q)(1),xu(Os)))).pipe(ii((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==Os?o:(u===Os&&(r=!0),r||!1!==u&&d!==t.length-1&&!ud(u)?o:u),e)},Os),xi(e=>e!==Os),(0,Et.U)(e=>ud(e)?e:!0===e),(0,Ll.q)(1)))}class VI{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ld,this.attachRef=null}}class ld{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new VI,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let zh=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=u||Rt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new L0(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ld),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class L0{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===$l?this.route:e===ld?this.childContexts:this.parent.get(e,t)}}let Hp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[zh],encapsulation:2}),n})();function V0(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Ou(r,U0(e,r))}}function Ou(n,e){n.children&&V0(n.children,e)}function U0(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Cy(n){const e=n.children&&n.children.map(Cy),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Rt&&(t.component=Hp),t}function Zi(n){return n.outlet||Rt}function B0(n,e){const t=n.filter(r=>Zi(r)===e);return t.push(...n.filter(r=>Zi(r)!==e)),t}const Ty={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Gp(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Ty):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||ay)(t,n,e);if(!u)return Object.assign({},Ty);const d={};Ur(u.posParams,(w,D)=>{d[D]=w.path});const m=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function qp(n,e,t,r,o="corrected"){if(t.length>0&&function Ay(n,e,t){return t.some(r=>ku(n,e,r)&&Zi(r)!==Rt)}(n,t,r)){const d=new Vt(e,function cd(n,e,t,r){const o={};o[Rt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Zi(u)!==Rt){const d=new Vt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[Zi(u)]=d}return o}(n,e,r,new Vt(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function dd(n,e,t){return t.some(r=>ku(n,e,r))}(n,t,r)){const d=new Vt(n.segments,function Wh(n,e,t,r,o,u){const d={};for(const m of r)if(ku(n,t,m)&&!o[Zi(m)]){const w=new Vt([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[Zi(m)]=w}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Vt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function ku(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Wl(n,e,t,r){return!!(Zi(n)===r||r!==Rt&&ku(e,t,n))&&("**"===n.path||Gp(e,n,t).matched)}function j0(n,e,t){return 0===e.length&&!n.children[t]}class Zh{constructor(e){this.segmentGroup=e||null}}class Sy{constructor(e){this.urlTree=e}}function Zl(n){return ed(new Zh(n))}function zp(n){return ed(new Sy(n))}class H0{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=qp(this.urlTree.root,[],[],this.config).segmentGroup,t=new Vt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Rt).pipe((0,Et.U)(u=>this.createUrlTree(Zp(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ao(u=>{if(u instanceof Sy)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Zh?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Rt).pipe((0,Et.U)(o=>this.createUrlTree(Zp(o),e.queryParams,e.fragment))).pipe(ao(o=>{throw o instanceof Zh?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Vt([],{[Rt]:e}):e;return new ka(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Et.U)(u=>new Vt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,pn.D)(o).pipe(Vl(u=>{const d=r.children[u],m=B0(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,Et.U)(w=>({segment:w,outlet:u})))}),ii((u,d)=>(u[d.outlet]=d.segment,u),{}),function Mu(n,e){const t=arguments.length>=2;return r=>r.pipe(n?xi((o,u)=>n(o,u,r)):Na.y,Ul(1),t?xp(e):Sp(()=>new Su))}())}expandSegment(e,t,r,o,u,d){return(0,pn.D)(r).pipe(Vl(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(ao(D=>{if(D instanceof Zh)return gt(null);throw D}))),y(m=>!!m),ao((m,w)=>{if(m instanceof Su||"EmptyError"===m.name)return j0(t,o,u)?gt(new Vt([],{})):Zl(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return Wl(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):Zl(t):Zl(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?zp(u):this.lineralizeSegments(r,u).pipe((0,sr.z)(d=>{const m=new Vt(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:w,remainingSegments:D,positionalParamSegments:x}=Gp(t,o,u);if(!m)return Zl(t);const N=this.applyRedirectCommands(w,o.redirectTo,x);return o.redirectTo.startsWith("/")?zp(N):this.lineralizeSegments(o,N).pipe((0,sr.z)(j=>this.expandSegment(e,t,r,j.concat(D),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?gt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Et.U)(N=>(r._loadedConfig=N,new Vt(o,{})))):gt(new Vt(o,{}));const{matched:d,consumedSegments:m,remainingSegments:w}=Gp(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,sr.z)(x=>{const N=x.module,j=x.routes,{segmentGroup:Z,slicedSegments:ie}=qp(t,m,w,j),Ne=new Vt(Z.segments,Z.children);if(0===ie.length&&Ne.hasChildren())return this.expandChildren(N,j,Ne).pipe((0,Et.U)(mt=>new Vt(m,mt)));if(0===j.length&&0===ie.length)return gt(new Vt(m,{}));const Ve=Zi(r)===u;return this.expandSegment(N,Ne,j,ie,Ve?Rt:u,!0).pipe((0,Et.U)(At=>new Vt(m.concat(At.segments),At.children)))})):Zl(t)}getChildConfig(e,t,r){return t.children?gt(new F0(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?gt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,sr.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Et.U)(u=>(t._loadedConfig=u,u))):function Wp(n){return ed(Lh(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):gt(new F0([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?gt(o.map(d=>{const m=e.get(d);let w;if(function SS(n){return n&&ql(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!ql(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return lo(w)})).pipe(zl(),(0,h.b)(d=>{if(!ud(d))return;const m=Lh(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,Et.U)(d=>!0===d)):gt(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return gt(r);if(o.numberOfChildren>1||!o.children[Rt])return ed(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[Rt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new ka(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ur(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return Ur(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,o)}),new Vt(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Zp(n){const e={};for(const r of Object.keys(n.children)){const u=Zp(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function NS(n){if(1===n.numberOfChildren&&n.children[Rt]){const e=n.children[Rt];return new Vt(n.segments.concat(e.segments),e.children)}return n}(new Vt(n.segments,e))}class q0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Kh{constructor(e,t){this.component=e,this.route=t}}function BI(n,e,t){const r=n._root;return Yh(r,e?e._root:null,t,[r.value])}function oi(n,e,t){const r=function $I(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Yh(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=ad(e);return n.children.forEach(d=>{(function PS(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function OS(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Nu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Nu(n.url,e.url)||!uo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gh(n,e)||!uo(n.queryParams,e.queryParams);default:return!Gh(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new q0(r)):(u.data=d.data,u._resolvedData=d._resolvedData),Yh(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Kh(m.outlet.component,d))}else d&&hd(e,m,o),o.canActivateChecks.push(new q0(r)),Yh(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),Ur(u,(d,m)=>hd(d,t.getContext(m),o)),o}function hd(n,e,t){const r=ad(n),o=n.value;Ur(r,(u,d)=>{hd(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new Kh(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class WI{}function My(n){return new Ss.y(e=>e.error(n))}class KI{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=qp(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Rt);if(null===t)return null;const r=new Wi([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Rt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Fa(r,t),u=new _y(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=yy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],m=B0(e,u),w=this.processSegmentGroup(m,d,u);if(null===w)return null;r.push(...w)}const o=fo(r);return function Z0(n){n.sort((e,t)=>e.value.outlet===Rt?-1:t.value.outlet===Rt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return j0(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!Wl(e,t,r,o))return null;let u,d=[],m=[];if("**"===e.path){const Z=r.length>0?Np(r).parameters:{};u=new Wi(r,Z,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,QI(e),Zi(e),e.component,e,Q0(t),J0(t)+r.length,Ry(e))}else{const Z=Gp(t,e,r);if(!Z.matched)return null;d=Z.consumedSegments,m=Z.remainingSegments,u=new Wi(d,Z.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,QI(e),Zi(e),e.component,e,Q0(t),J0(t)+d.length,Ry(e))}const w=function K0(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:D,slicedSegments:x}=qp(t,d,m,w.filter(Z=>void 0===Z.redirectTo),this.relativeLinkResolution);if(0===x.length&&D.hasChildren()){const Z=this.processChildren(w,D);return null===Z?null:[new Fa(u,Z)]}if(0===w.length&&0===x.length)return[new Fa(u,[])];const N=Zi(e)===o,j=this.processSegment(w,D,x,N?Rt:o);return null===j?null:[new Fa(u,j)]}}function YI(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function fo(n){const e=[],t=new Set;for(const r of n){if(!YI(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=fo(r.children);e.push(new Fa(r.value,o))}return e.filter(r=>!t.has(r))}function Q0(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function J0(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function QI(n){return n.data||{}}function Ry(n){return n.resolve||{}}function X0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function fd(n){return tn(e=>{const t=n(e);return t?(0,pn.D)(t).pipe((0,Et.U)(()=>e)):gt(e)})}class Oy extends class nD{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Qh=new f.OlP("ROUTES");class ky{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Et.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new F0(uy(d.injector.get(Qh,void 0,f.XFs.Self|f.XFs.Optional)).map(Cy),d)}),ao(u=>{throw t._loader$=void 0,u}));return t._loader$=new Ap(o,()=>new dn.x).pipe(Fl()),t._loader$}loadModuleFactory(e){return lo(e()).pipe((0,sr.z)(t=>t instanceof f.YKP?gt(t):(0,pn.D)(this.compiler.compileModuleAsync(t))))}}class LS{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Fy(n){throw n}function VS(n,e,t){return e.parse("/")}function ew(n,e){return gt(null)}const tw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},nw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ai=(()=>{class n{constructor(t,r,o,u,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new dn.x,this.errorHandler=Fy,this.malformedUriErrorHandler=VS,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ew,afterPreactivation:ew},this.urlHandlingStrategy=new LS,this.routeReuseStrategy=new Oy,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(f.h0i),this.console=d.get(f.c2e);const N=d.get(f.R0b);this.isNgZoneEnabled=N instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function I0(){return new ka(new Vt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ky(d,m,j=>this.triggerEvent(new si(j)),j=>this.triggerEvent(new Pa(j))),this.routerState=St(this.currentUrlTree,this.rootComponentType),this.transitions=new _r({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(xi(o=>0!==o.id),(0,Et.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),tn(o=>{let u=!1,d=!1;return gt(o).pipe((0,h.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),tn(m=>{const w=this.browserUrlTree.toString(),D=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||D)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Ly(m.source)&&(this.browserUrlTree=m.extractedUrl),gt(m).pipe(tn(N=>{const j=this.transitions.getValue();return r.next(new T(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),j!==this.transitions.getValue()?oo.E:Promise.resolve(N)}),function G0(n,e,t,r){return tn(o=>function UI(n,e,t,r,o){return new H0(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Et.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,h.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function JI(n,e,t,r,o){return(0,sr.z)(u=>function ZI(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new KI(n,e,t,r,o,u).recognize();return null===d?My(new WI):gt(d)}catch(d){return My(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,Et.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,h.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const Z=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(Z,N)}this.browserUrlTree=N.urlAfterRedirects}const j=new Fe(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(j)}));if(D&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:j,extractedUrl:Z,source:ie,restoredState:Ne,extras:Ve}=m,Tt=new T(j,this.serializeUrl(Z),ie,Ne);r.next(Tt);const At=St(Z,this.rootComponentType).snapshot;return gt(Object.assign(Object.assign({},m),{targetSnapshot:At,urlAfterRedirects:Z,extras:Object.assign(Object.assign({},Ve),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),oo.E}),fd(m=>{const{targetSnapshot:w,id:D,extractedUrl:x,rawUrl:N,extras:{skipLocationChange:j,replaceUrl:Z}}=m;return this.hooks.beforePreactivation(w,{navigationId:D,appliedUrlTree:x,rawUrlTree:N,skipLocationChange:!!j,replaceUrl:!!Z})}),(0,h.b)(m=>{const w=new Ke(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,Et.U)(m=>Object.assign(Object.assign({},m),{guards:BI(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function kS(n,e){return(0,sr.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?gt(Object.assign(Object.assign({},t),{guardsResult:!0})):function HI(n,e,t,r){return(0,pn.D)(n).pipe((0,sr.z)(o=>function W0(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?gt(u.map(m=>{const w=oi(m,e,o);let D;if(function RS(n){return n&&ql(n.canDeactivate)}(w))D=lo(w.canDeactivate(n,e,t,r));else{if(!ql(w))throw new Error("Invalid CanDeactivate guard");D=lo(w(n,e,t,r))}return D.pipe(y())})).pipe(zl()):gt(!0)}(o.component,o.route,t,e,r)),y(o=>!0!==o,!0))}(d,r,o,n).pipe((0,sr.z)(m=>m&&function AS(n){return"boolean"==typeof n}(m)?function xy(n,e,t,r){return(0,pn.D)(e).pipe(Vl(o=>Oh(function GI(n,e){return null!==n&&e&&e(new kh(n)),gt(!0)}(o.route.parent,r),function z0(n,e){return null!==n&&e&&e(new Oa(n)),gt(!0)}(o.route,r),function zI(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function jI(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>so(()=>gt(d.guards.map(w=>{const D=oi(w,d.node,t);let x;if(function MS(n){return n&&ql(n.canActivateChild)}(D))x=lo(D.canActivateChild(r,n));else{if(!ql(D))throw new Error("Invalid CanActivateChild guard");x=lo(D(r,n))}return x.pipe(y())})).pipe(zl())));return gt(u).pipe(zl())}(n,o.path,t),function qI(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return gt(!0);const o=r.map(u=>so(()=>{const d=oi(u,e,t);let m;if(function xS(n){return n&&ql(n.canActivate)}(d))m=lo(d.canActivate(e,n));else{if(!ql(d))throw new Error("Invalid CanActivate guard");m=lo(d(e,n))}return m.pipe(y())}));return gt(o).pipe(zl())}(n,o.route,t))),y(o=>!0!==o,!0))}(r,u,n,e):gt(m)),(0,Et.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,h.b)(m=>{if(ud(m.guardsResult)){const D=Lh(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw D.url=m.guardsResult,D}const w=new at(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),xi(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),fd(m=>{if(m.guards.canActivateChecks.length)return gt(m).pipe((0,h.b)(w=>{const D=new ot(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(D)}),tn(w=>{let D=!1;return gt(w).pipe(function XI(n,e){return(0,sr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return gt(t);let u=0;return(0,pn.D)(o).pipe(Vl(d=>function eD(n,e,t,r){return function Ny(n,e,t,r){const o=X0(n);if(0===o.length)return gt({});const u={};return(0,pn.D)(o).pipe((0,sr.z)(d=>function tD(n,e,t,r){const o=oi(n,e,r);return lo(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,h.b)(m=>{u[d]=m}))),Ul(1),(0,sr.z)(()=>X0(u).length===o.length?gt(u):oo.E))}(n._resolve,n,e,r).pipe((0,Et.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),yy(n,t).resolve),null)))}(d.route,r,n,e)),(0,h.b)(()=>u++),Ul(1),(0,sr.z)(d=>u===o.length?gt(t):oo.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,h.b)({next:()=>D=!0,complete:()=>{D||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,h.b)(w=>{const D=new On(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(D)}))}),fd(m=>{const{targetSnapshot:w,id:D,extractedUrl:x,rawUrl:N,extras:{skipLocationChange:j,replaceUrl:Z}}=m;return this.hooks.afterPreactivation(w,{navigationId:D,appliedUrlTree:x,rawUrlTree:N,skipLocationChange:!!j,replaceUrl:!!Z})}),(0,Et.U)(m=>{const w=function R0(n,e,t){const r=Hl(n,e._root,t?t._root:void 0);return new x0(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,h.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,Et.U)(r=>(new CS(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,h.b)({next(){u=!0},complete(){u=!0}}),function g(n){return(0,Si.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),ao(m=>{if(d=!0,function Vh(n){return n&&n[Fh]}(m)){const w=ud(m.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const D=new z(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(D),w?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ly(o.source)};this.scheduleNavigation(x,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new de(o.id,this.serializeUrl(o.extractedUrl),m);r.next(w);try{o.resolve(this.errorHandler(m))}catch(D){o.reject(D)}}return oo.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const w=Object.assign({},d);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){V0(t),this.config=t.map(Cy),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,D=o||this.routerState.root,x=w?this.currentUrlTree.fragment:d;let N=null;switch(m){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),function IS(n,e,t,r,o){if(0===t.length)return qh(e.root,e.root,e.root,r,o);const u=function DS(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new $p(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Ur(u.outlets,(w,D)=>{m[D]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new $p(t,e,r)}(t);if(u.toRoot())return qh(e.root,e.root,new Vt([],{}),r,o);const d=function OI(n,e,t){if(n.isAbsolute)return new wy(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new wy(u,u===e.root,0)}const r=Gl(n.commands[0])?0:1;return function kI(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new wy(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=d.processChildren?by(d.segmentGroup,d.index,u.commands):Ey(d.segmentGroup,d.index,u.commands);return qh(e.root,d.segmentGroup,m,r,o)}(D,this.currentUrlTree,t,N,null!=x?x:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=ud(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function rw(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},tw):!1===r?Object.assign({},nw):r,ud(t))return cy(this.currentUrlTree,t,o);const u=this.parseUrl(t);return cy(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new R(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var m,w;if(this.disposed)return Promise.resolve(!1);let D,x,N;d?(D=d.resolve,x=d.reject,N=d.promise):N=new Promise((ie,Ne)=>{D=ie,x=Ne});const j=++this.navigationId;let Z;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Z=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):Z=0,this.setTransition({id:j,targetPageId:Z,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:D,reject:x,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch(ie=>Promise.reject(ie))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new z(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Ly(n){return"imperative"!==n}class Kp{}class Yp{preload(e,t){return gt(null)}}let md=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new ky(o,r,w=>t.triggerEvent(new si(w)),w=>t.triggerEvent(new Pa(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(xi(t=>t instanceof R),Vl(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,pn.D)(o).pipe((0,nd.J)(),(0,Et.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?gt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,sr.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ai),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(Kp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Vy=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof T?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof R&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Bl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Bl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Fu=new f.OlP("ROUTER_CONFIGURATION"),Uy=new f.OlP("ROUTER_FORROOT_GUARD"),ow=[ve,{provide:py,useClass:Op},{provide:ai,useFactory:function uw(n,e,t,r,o,u,d={},m,w){const D=new ai(null,n,e,t,r,o,uy(u));return m&&(D.urlHandlingStrategy=m),w&&(D.routeReuseStrategy=w),function aD(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,D),d.enableTracing&&D.events.subscribe(x=>{var N,j;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${x.constructor.name}`),console.log(x.toString()),console.log(x),null===(j=console.groupEnd)||void 0===j||j.call(console)}),D},deps:[py,ld,ve,f.zs3,f.Sil,Qh,Fu,[class FS{},new f.FiY],[class Py{},new f.FiY]]},ld,{provide:$l,useFactory:function uD(n){return n.routerState.root},deps:[ai]},md,Yp,class iw{preload(e,t){return t().pipe(ao(()=>gt(null)))}},{provide:Fu,useValue:{enableTracing:!1}}];function iD(){return new f.PXZ("Router",ai)}let Qp=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[ow,Kl(t),{provide:Uy,useFactory:aw,deps:[[ai,new f.FiY,new f.tp0]]},{provide:Fu,useValue:r||{}},{provide:he,useFactory:oD,deps:[se,[new f.tBr(Ge),new f.FiY],Fu]},{provide:Vy,useFactory:sD,deps:[ai,rl,Fu]},{provide:Kp,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Yp},{provide:f.PXZ,multi:!0,useFactory:iD},[Lu,{provide:f.ip1,multi:!0,useFactory:lD,deps:[Lu]},{provide:lw,useFactory:cD,deps:[Lu]},{provide:f.tb,multi:!0,useExisting:lw}]]}}static forChild(t){return{ngModule:n,providers:[Kl(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Uy,8),f.LFG(ai,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function sD(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Vy(n,e,t)}function oD(n,e,t={}){return t.useHash?new De(n,e):new We(n,e)}function aw(n){return"guarded"}function Kl(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:Qh,multi:!0,useValue:n}]}let Lu=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new dn.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(ai),d=this.injector.get(Fu);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?gt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Fu),o=this.injector.get(md),u=this.injector.get(Vy),d=this.injector.get(ai),m=this.injector.get(f.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function lD(n){return n.appInitializer.bind(n)}function cD(n){return n.bootstrapListener.bind(n)}const lw=new f.OlP("Router Initializer");let By=(()=>{class n{constructor(t){this.ruteo=t}ngOnInit(){}goToLogin(){this.ruteo.navigate(["login"])}goToRegistro(){this.ruteo.navigate(["registro"])}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ai))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-bienvenida"]],decls:16,vars:0,consts:[[1,"px-4","py-5","my-5","text-center"],["src","../../../assets/bienvenida.png","alt","","width","360","height","285",1,"d-block","mx-auto","mb-4"],[1,"display-5","fw-bold"],[1,"col-lg-6","mx-auto"],[1,"lead","mb-4"],[1,"d-grid","gap-2","d-sm-flex","justify-content-sm-center"],["type","button",1,"btn","btn-primary","btn-lg","px-4","gap-3",3,"click"],["type","button",1,"btn","btn-outline-secondary","btn-lg","px-4",3,"click"],[1,"b-example-divider"]],template:function(t,r){1&t&&(f.TgZ(0,"main")(1,"div",0),f._UZ(2,"img",1),f.TgZ(3,"h1",2),f._uU(4,"\xa1Bienvenido!"),f.qZA(),f.TgZ(5,"div",3)(6,"p",4)(7,"b"),f._uU(8,"Especialista en salud"),f.qZA(),f._uU(9,", cuenta actualmente con consultorios (6 en la actualidad), dos laboratorios (f\xedsicos en la cl\xednica), y una sala de espera general. Est\xe1 abierta al p\xfablico de lunes a viernes en el horario de 8:00 a 19:00, y los s\xe1bados en el horario de 8:00 a 14:00."),f.qZA(),f.TgZ(10,"div",5)(11,"button",6),f.NdJ("click",function(){return r.goToLogin()}),f._uU(12,"Iniciar Sesi\xf3n "),f.qZA(),f.TgZ(13,"button",7),f.NdJ("click",function(){return r.goToRegistro()}),f._uU(14,"Registrarse "),f.qZA()()()(),f._UZ(15,"div",8),f.qZA())},styles:[".b-example-divider[_ngcontent-%COMP%]{height:3rem;background-color:#0000001a;border:solid rgba(0,0,0,.15);border-width:1px 0;box-shadow:inset 0 .5em 1.5em #0000001a,inset 0 .125em .5em #00000026}@media (min-width: 992px){.rounded-lg-3[_ngcontent-%COMP%]{border-radius:.3rem}}"]}),n})(),cw=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-login"]],decls:21,vars:0,consts:[[1,"form-signin"],["src","../assets/brand/bootstrap-logo.svg","alt","","width","72","height","57",1,"mb-4"],[1,"h3","mb-3","fw-normal"],[1,"form-floating"],["type","email","id","floatingInput","placeholder","name@example.com",1,"form-control"],["for","floatingInput"],["type","password","id","floatingPassword","placeholder","Password",1,"form-control"],["for","floatingPassword"],[1,"checkbox","mb-3"],["type","checkbox","value","remember-me"],["type","submit",1,"w-100","btn","btn-lg","btn-primary"],[1,"mt-5","mb-3","text-muted"]],template:function(t,r){1&t&&(f.TgZ(0,"main",0)(1,"form"),f._UZ(2,"img",1),f.TgZ(3,"h1",2),f._uU(4,"Please sign in"),f.qZA(),f.TgZ(5,"div",3),f._UZ(6,"input",4),f.TgZ(7,"label",5),f._uU(8,"Email address"),f.qZA()(),f.TgZ(9,"div",3),f._UZ(10,"input",6),f.TgZ(11,"label",7),f._uU(12,"Password"),f.qZA()(),f.TgZ(13,"div",8)(14,"label"),f._UZ(15,"input",9),f._uU(16," Remember me "),f.qZA()(),f.TgZ(17,"button",10),f._uU(18,"Sign in"),f.qZA(),f.TgZ(19,"p",11),f._uU(20,"\xa9 2017\u20132021"),f.qZA()()())},directives:[Pl,ro,Go],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#f5f5f5}.form-signin[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}"]}),n})();class dw{constructor(e="",t="",r=0,o=0,u="",d="",m="",w=""){this.nombre=e,this.apellido=t,this.edad=r,this.dni=o,this.email=d,this.password=m,this.fotoPerfil=w}}class hw{constructor(e="",t="",r=0,o=0,u="",d="",m="",w=[]){this.nombre=e,this.apellido=t,this.edad=r,this.dni=o,this.email=d,this.password=m,this.fotosPerfil=w,this.obraSocial=u}}var me=P(5861),fw=P(3942),go=P(9681),bt=P(2090),yd=P(4859);const jy="firebasestorage.googleapis.com",hD="storageBucket";class kn extends bt.ZR{constructor(e,t){super(gw(e),`Firebase Storage: ${t} (${gw(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,kn.prototype)}_codeEquals(e){return gw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function gw(n){return"storage/"+n}function mw(){return new kn("unknown","An unknown error occurred, please check the error payload for server response.")}function gD(){return new kn("canceled","User canceled the upload/download.")}function Hy(){return new kn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Yl(n){return new kn("invalid-argument",n)}function Jp(){return new kn("app-deleted","The Firebase app was deleted.")}function Ew(n){return new kn("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ql(n,e){return new kn("invalid-format","String does not match format '"+n+"': "+e)}function Jh(n){throw new kn("internal-error","Internal error: "+n)}class ui{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ui.makeFromUrl(e,t)}catch(o){return new ui(e,"")}if(""===r.path)return r;throw function vw(n){return new kn("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+o+"(/(.*))?$","i");function D(it){it.path_=decodeURIComponent(it.path)}const N=t.replace(/[.]/g,"\\."),mt=[{regex:m,indices:{bucket:1,path:3},postModify:function u(it){"/"===it.path.charAt(it.path.length-1)&&(it.path_=it.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${N}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:D},{regex:new RegExp(`^https?://${t===jy?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:D}];for(let it=0;it<mt.length;it++){const xt=mt[it],$t=xt.regex.exec(e);if($t){let Ka=$t[xt.indices.path];Ka||(Ka=""),r=new ui($t[xt.indices.bucket],Ka),xt.postModify(r);break}}if(null==r)throw function jS(n){return new kn("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class yD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function eg(n){return"string"==typeof n||n instanceof String}function vd(n){return Gy()&&n instanceof Blob}function Gy(){return"undefined"!=typeof Blob}function qy(n,e,t,r){if(r<e)throw Yl(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Yl(`Invalid value for '${n}'. Expected ${t} or less.`)}function yo(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function _o(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var ks=(()=>{return(n=ks||(ks={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",ks;var n})();class li{constructor(e,t,r,o,u,d,m,w,D,x,N){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=w,this.timeout_=D,this.progressCallback_=x,this.connectionFactory_=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((j,Z)=>{this.resolve_=j,this.reject_=Z,this.start_()})}start_(){const t=(r,o)=>{const u=this.resolve_,d=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const w=this.callback_(m,m.getResponse());!function wD(n){return void 0!==n}(w)?u():u(w)}catch(w){d(w)}else if(null!==m){const w=mw();w.serverResponse=m.getErrorText(),d(this.errorCallback_?this.errorCallback_(m,w):w)}else d(o.canceled?this.appDelete_?Jp():gD():function mo(){return new kn("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new Wo(!1,null,!0)):this.backoffId_=function _D(n,e,t){let r=1,o=null,u=null,d=!1,m=0;function w(){return 2===m}let D=!1;function x(...Ve){D||(D=!0,e.apply(null,Ve))}function N(Ve){o=setTimeout(()=>{o=null,n(Z,w())},Ve)}function j(){u&&clearTimeout(u)}function Z(Ve,...Tt){if(D)return void j();if(Ve)return j(),void x.call(null,Ve,...Tt);if(w()||d)return j(),void x.call(null,Ve,...Tt);let mt;r<64&&(r*=2),1===m?(m=2,mt=0):mt=1e3*(r+Math.random()),N(mt)}let ie=!1;function Ne(Ve){ie||(ie=!0,j(),!D&&(null!==o?(Ve||(m=2),clearTimeout(o),N(0)):Ve||(m=1)))}return N(0),u=setTimeout(()=>{d=!0,Ne(!0)},t),Ne}((r,o)=>{if(o)return void r(!1,new Wo(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const d=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const m=u.getErrorCode()===ks.NO_ERROR,w=u.getStatus();if(!m||this.isRetryStatusCode_(w)){const x=u.getErrorCode()===ks.ABORT;return void r(!1,new Wo(!1,null,x))}const D=-1!==this.successCodes_.indexOf(w);r(!0,new Wo(D,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function vD(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,o=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||o||u}}class Wo{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Id(...n){const e=function bd(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Gy())return new Blob(n);throw new kn("unsupported-environment","This browser doesn't seem to support creating Blobs")}const vr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Vu{constructor(e,t){this.data=e,this.contentType=t||null}}function Uu(n,e){switch(n){case vr.RAW:return new Vu(Wy(e));case vr.BASE64:case vr.BASE64URL:return new Vu(Zy(n,e));case vr.DATA_URL:return new Vu(function Iw(n){const e=new Ky(n);return e.base64?Zy(vr.BASE64,e.rest):function bw(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Ql(vr.DATA_URL,"Malformed data URL.")}return Wy(e)}(e.rest)}(e),function Dw(n){return new Ky(n).contentType}(e))}throw mw()}function Wy(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Zy(n,e){switch(n){case vr.BASE64:{const o=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(o||u)throw Ql(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case vr.BASE64URL:{const o=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(o||u)throw Ql(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Cd(n){return atob(n)}(e)}catch(o){throw Ql(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class Ky{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Ql(vr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Cw(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class vo{constructor(e,t){let r=0,o="";vd(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(vd(this.data_)){const o=function Dd(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===o?null:new vo(o)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new vo(r,!0)}}static getBlob(...e){if(Gy()){const t=e.map(r=>r instanceof vo?r.data_:r);return new vo(Id.apply(null,t))}{const t=e.map(d=>eg(d)?Uu(vr.RAW,d).data:d.data_);let r=0;t.forEach(d=>{r+=d.byteLength});const o=new Uint8Array(r);let u=0;return t.forEach(d=>{for(let m=0;m<d.length;m++)o[u++]=d[m]}),new vo(o,!0)}}uploadData(){return this.data_}}function ng(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function _d(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Aw(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function bD(n,e){return e}class ci{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||bD}}let rg=null;function Td(){if(rg)return rg;const n=[];n.push(new ci("bucket")),n.push(new ci("generation")),n.push(new ci("metageneration")),n.push(new ci("name","fullPath",!0));const t=new ci("name");t.xform=function e(u,d){return function ID(n){return!eg(n)||n.length<2?n:Aw(n)}(d)},n.push(t);const o=new ci("size");return o.xform=function r(u,d){return void 0!==d?Number(d):d},n.push(o),n.push(new ci("timeCreated")),n.push(new ci("updated")),n.push(new ci("md5Hash",null,!0)),n.push(new ci("cacheControl",null,!0)),n.push(new ci("contentDisposition",null,!0)),n.push(new ci("contentEncoding",null,!0)),n.push(new ci("contentLanguage",null,!0)),n.push(new ci("contentType",null,!0)),n.push(new ci("metadata","customMetadata",!0)),rg=n,rg}function xw(n,e,t){const r=ng(e);return null===r?null:function Sw(n,e,t){const r={type:"file"},o=t.length;for(let u=0;u<o;u++){const d=t[u];r[d.local]=d.xform(r,e[d.server])}return function DD(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new ui(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function Mw(n,e){const t={},r=e.length;for(let o=0;o<r;o++){const u=e[o];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const Rw="prefixes";class Va{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ua(n){if(!n)throw mw()}function Qy(n,e){return function t(r,o){const u=xw(n,o,e);return Ua(null!==u),u}}function Xh(n){return function e(t,r){let o;return o=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function _w(){return new kn("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function yw(){return new kn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function pD(n){return new kn("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function BS(n){return new kn("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,o.serverResponse=r.serverResponse,o}}function ef(n){const e=Xh(n);return function t(r,o){let u=e(r,o);return 404===r.getStatus()&&(u=function $y(n){return new kn("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=o.serverResponse,u}}function Jl(n,e,t){const o=yo(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,m=new Va(o,"GET",Qy(n,t),d);return m.errorHandler=ef(e),m}function SD(n,e,t,r,o){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),o&&(u.maxResults=o);const m=yo(e.bucketOnlyServerUrl(),n.host,n._protocol),D=n.maxOperationRetryTime,x=new Va(m,"GET",function AD(n,e){return function t(r,o){const u=function TD(n,e,t){const r=ng(t);return null===r?null:function Yy(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Rw])for(const o of t[Rw]){const u=o.replace(/\/$/,""),d=n._makeStorageReference(new ui(e,u));r.prefixes.push(d)}if(t.items)for(const o of t.items){const u=n._makeStorageReference(new ui(e,o.name));r.items.push(u)}return r}(n,e,r)}(n,e,o);return Ua(null!==u),u}}(n,e.bucket),D);return x.urlParams=u,x.errorHandler=Xh(e),x}function Xy(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function MD(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class og{constructor(e,t,r,o){this.current=e,this.total=t,this.finalized=!!r,this.metadata=o||null}}function e_(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(o){Ua(!1)}return Ua(!!t&&-1!==(e||["active"]).indexOf(t)),t}const kw={STATE_CHANGED:"state_changed"},di={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function tf(n){switch(n){case"running":case"pausing":case"canceling":return di.RUNNING;case"paused":return di.PAUSED;case"success":return di.SUCCESS;case"canceled":return di.CANCELED;default:return di.ERROR}}class HS{constructor(e,t,r){if(function Xp(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function Bu(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class nf extends class GS{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ks.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ks.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ks.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o){if(this.sent_)throw Jh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==o)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Jh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Jh("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Jh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Jh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Ls(){return new nf}class rf{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Td(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{this._request=void 0,this._chunkMultiplier=1,o._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=o,this._transition("error"))},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals("canceled")?this.completeTransitions_():(this._error=o,this._transition("error"))},this._promise=new Promise((o,u)=>{this._resolve=o,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function RD(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),d=Xy(e,r,o),m={name:d.fullPath},w=yo(u,n.host,n._protocol),x={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},N=Mw(d,t),ie=new Va(w,"POST",function Z(Ne){let Ve;e_(Ne);try{Ve=Ne.getResponseHeader("X-Goog-Upload-URL")}catch(Tt){Ua(!1)}return Ua(eg(Ve)),Ve},n.maxUploadRetryTime);return ie.urlParams=m,ie.headers=x,ie.body=N,ie.errorHandler=Xh(e),ie}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,Ls,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const o=function ND(n,e,t,r){const w=new Va(t,"POST",function u(D){const x=e_(D,["active","final"]);let N=null;try{N=D.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Z){Ua(!1)}N||Ua(!1);const j=Number(N);return Ua(!isNaN(j)),new og(j,r.size(),"final"===x)},n.maxUploadRetryTime);return w.headers={"X-Goog-Upload-Command":"query"},w.errorHandler=Xh(e),w}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(o,Ls,t,r);this._request=u,u.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new og(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((o,u)=>{let d;try{d=function PD(n,e,t,r,o,u,d,m){const w=new og(0,0);if(d?(w.current=d.current,w.total=d.total):(w.current=0,w.total=r.size()),r.size()!==w.total)throw function mD(){return new kn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const D=w.total-w.current;let x=D;o>0&&(x=Math.min(x,o));const N=w.current,ie={"X-Goog-Upload-Command":x===D?"upload, finalize":"upload","X-Goog-Upload-Offset":`${w.current}`},Ne=r.slice(N,N+x);if(null===Ne)throw Hy();const mt=new Va(t,"POST",function Ve(it,xt){const $t=e_(it,["active","final"]),Ar=w.current+x,Ka=r.size();let wS;return wS="final"===$t?Qy(e,u)(it,xt):null,new og(Ar,Ka,"final"===$t,wS)},e.maxUploadRetryTime);return mt.headers=ie,mt.body=Ne.uploadData(),mt.progressCallback=m||null,mt.errorHandler=Xh(n),mt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(w){return this._error=w,void this._transition("error")}const m=this._ref.storage._makeRequest(d,Ls,o,u);this._request=m,m.getPromise().then(w=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(w.current),w.finalized?(this._metadata=w.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Jl(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(r,Ls,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Ow(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},w=function m(){let mt="";for(let it=0;it<2;it++)mt+=Math.random().toString().slice(2);return mt}();d["Content-Type"]="multipart/related; boundary="+w;const D=Xy(e,r,o),x=Mw(D,t),Z=vo.getBlob("--"+w+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+x+"\r\n--"+w+"\r\nContent-Type: "+D.contentType+"\r\n\r\n",r,"\r\n--"+w+"--");if(null===Z)throw Hy();const ie={name:D.fullPath},Ne=yo(u,n.host,n._protocol),Tt=n.maxUploadRetryTime,At=new Va(Ne,"POST",Qy(n,t),Tt);return At.urlParams=ie,At.headers=d,At.body=Z.uploadData(),At.errorHandler=Xh(e),At}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,Ls,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=gD(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=tf(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,o){const u=new HS(t||void 0,r||void 0,o||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(tf(this._state)){case di.SUCCESS:Bu(this._resolve.bind(null,this.snapshot))();break;case di.CANCELED:case di.ERROR:Bu(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(tf(this._state)){case di.RUNNING:case di.PAUSED:e.next&&Bu(e.next.bind(e,this.snapshot))();break;case di.SUCCESS:e.complete&&Bu(e.complete.bind(e))();break;default:e.error&&Bu(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Ba{constructor(e,t){this._service=e,this._location=t instanceof ui?t:ui.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ba(e,t)}get root(){const e=new ui(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Aw(this._location.path)}get storage(){return this._service}get parent(){const e=function ED(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ui(this._location.bucket,e);return new Ba(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Ew(e)}}function lg(n,e,t){return cg.apply(this,arguments)}function cg(){return(cg=(0,me.Z)(function*(n,e,t){const o=yield s_(n,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),null!=o.nextPageToken&&(yield lg(n,e,o.nextPageToken))})).apply(this,arguments)}function s_(n,e){null!=e&&"number"==typeof e.maxResults&&qy("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=SD(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Ls)}function FD(n){n._throwIfRoot("getDownloadURL");const e=function xD(n,e,t){const o=yo(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,m=new Va(o,"GET",function Nw(n,e){return function t(r,o){const u=xw(n,o,e);return Ua(null!==u),function CD(n,e,t,r){const o=ng(e);if(null===o||!eg(o.downloadTokens))return null;const u=o.downloadTokens;if(0===u.length)return null;const d=encodeURIComponent;return u.split(",").map(D=>{const N=n.fullPath;return yo("/b/"+d(n.bucket)+"/o/"+d(N),t,r)+_o({alt:"media",token:D})})[0]}(u,o,n.host,n._protocol)}}(n,t),d);return m.errorHandler=ef(e),m}(n.storage,n._location,Td());return n.storage.makeRequestWithTokens(e,Ls).then(t=>{if(null===t)throw function $S(){return new kn("no-download-url","The given file does not have any download URLs.")}();return t})}function a_(n,e){const t=function Tw(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ui(n._location.bucket,t);return new Ba(n.storage,r)}function $w(n,e){if(n instanceof sf){const t=n;if(null==t._bucket)throw function ww(){return new kn("no-default-bucket","No default bucket found. Did you set the '"+hD+"' property when initializing the app?")}();const r=new Ba(t,t._bucket);return null!=e?$w(r,e):r}return void 0!==e?a_(n,e):n}function LD(n,e){if(e&&function u_(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof sf)return function jw(n,e){return new Ba(n,e)}(n,e);throw Yl("To use ref(service, url), the first argument must be a Storage instance.")}return $w(n,e)}function Hw(n,e){const t=null==e?void 0:e[hD];return null==t?null:ui.makeFromBucketSpec(t,n)}class sf{constructor(e,t,r,o,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._bucket=null,this._host=jy,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=o?ui.makeFromBucketSpec(o,this._host):Hw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ui.makeFromBucketSpec(this._url,e):Hw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){qy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){qy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,me.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,me.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ba(this,e)}_makeRequest(e,t,r,o){if(this._deleted)return new yD(Jp());{const u=function Ed(n,e,t,r,o,u){const d=_o(n.urlParams),m=n.url+d,w=Object.assign({},n.headers);return function zy(n,e){e&&(n["X-Firebase-GMPID"]=e)}(w,e),function tg(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(w,t),function Fs(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(w,u),function wd(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(w,r),new li(m,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o)}(e,this._appId,r,o,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,me.Z)(function*(){const[o,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,o,u).getPromise()})()}}const c_="@firebase/storage";function Kn(n,e){return LD(n=(0,bt.m9)(n),e)}function Zw(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new sf(t,r,o,e,go.SDK_VERSION)}!function Kw(){(0,go._registerComponent)(new yd.wA("storage",Zw,"PUBLIC").setMultipleInstances(!0)),(0,go.registerVersion)(c_,"0.9.6",""),(0,go.registerVersion)(c_,"0.9.6","esm2017")}();class ja{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Yw{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new ja(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new ja(r,this,this._ref))},t)}on(e,t,r,o){let u;return t&&(u="function"==typeof t?d=>t(new ja(d,this,this._ref)):{next:t.next?d=>t.next(new ja(d,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,o||void 0)}}class Qw{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Zo(e,this._service))}get items(){return this._delegate.items.map(e=>new Zo(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Zo{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Ww(n,e){return a_(n,e)}(this._delegate,e);return new Zo(t,this.storage)}get root(){return new Zo(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Zo(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Yw(function Gw(n,e,t){return function i_(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new rf(n,new vo(e),t)}(n=(0,bt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=vr.RAW,r){this._throwIfRoot("putString");const o=Uu(t,e),u=Object.assign({},r);return null==u.contentType&&null!=o.contentType&&(u.contentType=o.contentType),new Yw(new rf(this._delegate,new vo(o.data,!0),u),this)}listAll(){return function $D(n){return function Vw(n){const e={prefixes:[],items:[]};return lg(n,e).then(()=>e)}(n=(0,bt.m9)(n))}(this._delegate).then(e=>new Qw(e,this.storage))}list(e){return function jD(n,e){return s_(n=(0,bt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Qw(t,this.storage))}getMetadata(){return function qw(n){return function o_(n){n._throwIfRoot("getMetadata");const e=Jl(n.storage,n._location,Td());return n.storage.makeRequestWithTokens(e,Ls)}(n=(0,bt.m9)(n))}(this._delegate)}updateMetadata(e){return function zS(n,e){return function Uw(n,e){n._throwIfRoot("updateMetadata");const t=function Pw(n,e,t,r){const u=yo(e.fullServerUrl(),n.host,n._protocol),m=Mw(t,r),D=n.maxOperationRetryTime,x=new Va(u,"PATCH",Qy(n,r),D);return x.headers={"Content-Type":"application/json; charset=utf-8"},x.body=m,x.errorHandler=ef(e),x}(n.storage,n._location,e,Td());return n.storage.makeRequestWithTokens(t,Ls)}(n=(0,bt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function zw(n){return FD(n=(0,bt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function HD(n){return function Bw(n){n._throwIfRoot("deleteObject");const e=function sg(n,e){const r=yo(e.fullServerUrl(),n.host,n._protocol),m=new Va(r,"DELETE",function d(w,D){},n.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=ef(e),m}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ls)}(n=(0,bt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Ew(e)}}class Jw{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(f_(e))throw Yl("ref() expected a child path but got a URL, use refFromURL instead.");return new Zo(Kn(this._delegate,e),this)}refFromURL(e){if(!f_(e))throw Yl("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ui.makeFromUrl(e,this._delegate.host)}catch(t){throw Yl("refFromUrl() expected a valid full URL but got an invalid one.")}return new Zo(Kn(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function GD(n,e,t,r={}){!function l_(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken="string"==typeof o?o:(0,bt.Sg)(o,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function f_(n){return/^[A-Za-z]+:\/\//.test(n)}function Ko(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new Jw(t,r)}!function zD(n){const e={TaskState:di,TaskEvent:kw,StringFormat:vr,Storage:Jw,Reference:Zo};n.INTERNAL.registerComponent(new yd.wA("storage-compat",Ko,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.14")}(fw.Z);var WD=P(127),Yo=P(6451),Ki=P(5363),wo=P(6063);class eE extends dn.x{constructor(e=1/0,t=1/0,r=wo.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var tE=P(3099);function nE(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,tE.B)({connector:()=>new eE(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function rE(n,e){return(0,kl.m)(e)?tn(()=>n,e):tn(()=>n)}var g_=P(9468),hi=P(5813),ds=P(2011);P(5867);var $a=P(1877);const __=new Map,tC={activated:!1,tokenObservers:[]},nC={initialized:!1,enabled:!1};function wr(n){return __.get(n)||tC}function Eo(n,e){__.set(n,e)}function fg(){return nC}class aC{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new bt.BH,yield function uC(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new bt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Mi=new bt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function lE(n){if(!wr(n).activated)throw Mi.create("use-before-activation",{appName:n.name})}function mg(n,e){return yg.apply(this,arguments)}function yg(){return(yg=(0,me.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(N){throw Mi.create("fetch-network-error",{originalErrorMessage:N.message})}if(200!==d.status)throw Mi.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(N){throw Mi.create("fetch-parse-error",{originalErrorMessage:N.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw Mi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const D=1e3*Number(w[1]),x=Date.now();return{token:m.token,expireTimeMillis:x+D,issuedAtTimeMillis:x}})).apply(this,arguments)}function hE(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Sd="firebase-app-check-store";let Qo=null;function gE(){return Qo||(Qo=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Mi.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Sd,{keyPath:"compositeKey"})}}catch(t){e(Mi.create("storage-open",{originalErrorMessage:t.message}))}}),Qo)}function _g(){return(_g=(0,me.Z)(function*(n,e){const r=(yield gE()).transaction(Sd,"readwrite"),u=r.objectStore(Sd).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var D;m(Mi.create("storage-set",{originalErrorMessage:null===(D=w.target.error)||void 0===D?void 0:D.message}))}})})).apply(this,arguments)}const af=new $a.Yd("@firebase/app-check");function uf(n,e){return(0,bt.hl)()?function xd(n,e){return function hC(n,e){return _g.apply(this,arguments)}(function ht(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{af.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function lf(){return fg().enabled}function An(){return yE.apply(this,arguments)}function yE(){return(yE=(0,me.Z)(function*(){const n=fg();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const gC={error:"UNKNOWN_ERROR"};function mC(n){return bt.US.encodeString(JSON.stringify(n),!1)}function cf(n){return vg.apply(this,arguments)}function vg(){return(vg=(0,me.Z)(function*(n,e=!1){const t=n.app;lE(t);const r=wr(t);let u,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&ju(w)&&(o=w)}if(!e&&o&&ju(o))return{token:o.token};let m,d=!1;if(lf()){r.exchangeTokenPromise||(r.exchangeTokenPromise=mg(hE(t,yield An()),n.heartbeatServiceProvider).then(D=>(r.exchangeTokenPromise=void 0,D)),d=!0);const w=yield r.exchangeTokenPromise;return yield uf(t,w),Eo(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?af.warn(w.message):af.error(w),u=w}return o?(m={token:o.token},Eo(t,Object.assign(Object.assign({},r),{token:o})),yield uf(t,o)):m=_C(u),d&&wE(t,m),m})).apply(this,arguments)}function Eg(n,e){const t=wr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Eo(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function vE(n){const{app:e}=n,t=wr(e);let r=t.tokenRefresher;r||(r=function yC(n){const{app:e}=n;return new aC((0,me.Z)(function*(){let r;if(r=wr(e).token?yield cf(n,!0):yield cf(n),r.error)throw r.error}),()=>!0,()=>{const t=wr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Eo(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function wE(n,e){const t=wr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function ju(n){return n.expireTimeMillis-Date.now()>0}function _C(n){return{token:mC(gC),error:n}}class vC{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=wr(this.app);for(const t of e)Eg(this.app,t.next);return Promise.resolve()}}const Rd="app-check-internal";!function TC(){(0,go._registerComponent)(new yd.wA("app-check",n=>function wC(n,e){return new vC(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Rd).initialize()})),(0,go._registerComponent)(new yd.wA(Rd,n=>function bg(n){return{getToken:e=>cf(n,e),addTokenListener:e=>function wg(n,e,t,r){const{app:o}=n,u=wr(o),d={next:t,error:r,type:e};if(Eo(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&ju(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),vE(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>vE(n))}(n,"INTERNAL",e),removeTokenListener:e=>Eg(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,go.registerVersion)("@firebase/app-check","0.5.8")}();class S_{constructor(){return(0,hi.vb)("app-check")}}"undefined"!=typeof window&&window;const kE=new f.OlP("angularfire2.auth.use-emulator"),FE=new f.OlP("angularfire2.auth.settings"),LE=new f.OlP("angularfire2.auth.tenant-id"),Tg=new f.OlP("angularfire2.auth.langugage-code"),VE=new f.OlP("angularfire2.auth.use-device-language"),x_=new f.OlP("angularfire.auth.persistence"),UE=(n,e,t,r,o,u,d,m)=>(0,ds.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),d)for(const[D,x]of Object.entries(d))w.settings[D]=x;return m&&w.setPersistence(m),w},[t,r,o,u,d,m]);let M_=(()=>{class n{constructor(t,r,o,u,d,m,w,D,x,N,j,Z){const ie=new dn.x,Ne=gt(void 0).pipe((0,Ki.Q)(d.outsideAngular),tn(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,8775)))),(0,Et.U)(()=>(0,ds.on)(t,u,r)),(0,Et.U)(Ve=>UE(Ve,u,m,D,x,N,w,j)),nE({bufferSize:1,refCount:!1}));if(xo(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=gt(null);else{Ne.pipe(y()).subscribe();const Tt=Ne.pipe(tn(it=>it.getRedirectResult().then(xt=>xt,()=>null)),hi.iC,nE({bufferSize:1,refCount:!1})),At=Ne.pipe(tn(it=>new Ss.y(xt=>({unsubscribe:u.runOutsideAngular(()=>it.onAuthStateChanged($t=>xt.next($t),$t=>xt.error($t),()=>xt.complete()))})))),mt=Ne.pipe(tn(it=>new Ss.y(xt=>({unsubscribe:u.runOutsideAngular(()=>it.onIdTokenChanged($t=>xt.next($t),$t=>xt.error($t),()=>xt.complete()))}))));this.authState=Tt.pipe(rE(At),(0,g_.R)(d.outsideAngular),(0,Ki.Q)(d.insideAngular)),this.user=Tt.pipe(rE(mt),(0,g_.R)(d.outsideAngular),(0,Ki.Q)(d.insideAngular)),this.idToken=this.user.pipe(tn(it=>it?(0,pn.D)(it.getIdToken()):gt(null))),this.idTokenResult=this.user.pipe(tn(it=>it?(0,pn.D)(it.getIdTokenResult()):gt(null))),this.credential=(0,Yo.T)(Tt,ie,this.authState.pipe(xi(it=>!it))).pipe((0,Et.U)(it=>(null==it?void 0:it.user)?it:null),(0,g_.R)(d.outsideAngular),(0,Ki.Q)(d.insideAngular))}return(0,ds.pX)(this,Ne,u,{spy:{apply:(Ve,Tt,At)=>{(Ve.startsWith("signIn")||Ve.startsWith("createUser"))&&At.then(mt=>ie.next(mt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ds.Dh),f.LFG(ds.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(hi.HU),f.LFG(kE,8),f.LFG(FE,8),f.LFG(LE,8),f.LFG(Tg,8),f.LFG(VE,8),f.LFG(x_,8),f.LFG(S_,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var PC=P(4986);function R_(){return(0,Si.e)((n,e)=>{let t,r=!1;n.subscribe((0,jt.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function kC(n,e){return n===e}P(8775);var et,BE="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Jo={},N_=N_||{},Ct=BE||self;function Ag(){}function P_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function pf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var gf="closure_uid_"+(1e9*Math.random()>>>0),jE=0;function k_(n,e,t){return n.call.apply(n.bind,arguments)}function FC(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Br(n,e,t){return(Br=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?k_:FC).apply(null,arguments)}function Nd(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function jr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function Ha(){this.s=this.s,this.o=this.o}var $E={};Ha.prototype.s=!1,Ha.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function O_(n){return Object.prototype.hasOwnProperty.call(n,gf)&&n[gf]||(n[gf]=++jE)}(this);delete $E[n]}},Ha.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const HE=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},F_=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function GE(n){return Array.prototype.concat.apply([],arguments)}function Pd(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Sg(n){return/^[\s\xa0]*$/.test(n)}var Yi,Xl=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function or(n,e){return-1!=n.indexOf(e)}function L_(n,e){return n<e?-1:n>e?1:0}e:{var V_=Ct.navigator;if(V_){var qE=V_.userAgent;if(qE){Yi=qE;break e}}Yi=""}function U_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function zE(n){const e={};for(const t in n)e[t]=n[t];return e}var WE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B_(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<WE.length;u++)t=WE[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function xg(n){return xg[" "](n),n}xg[" "]=Ag;var Od,n,Mg=or(Yi,"Opera"),Xo=or(Yi,"Trident")||or(Yi,"MSIE"),ZE=or(Yi,"Edge"),Rg=ZE||Xo,$_=or(Yi,"Gecko")&&!(or(Yi.toLowerCase(),"webkit")&&!or(Yi,"Edge"))&&!(or(Yi,"Trident")||or(Yi,"MSIE"))&&!or(Yi,"Edge"),VC=or(Yi.toLowerCase(),"webkit")&&!or(Yi,"Edge");function KE(){var n=Ct.document;return n?n.documentMode:void 0}e:{var H_="",YE=(n=Yi,$_?/rv:([^\);]+)(\)|;)/.exec(n):ZE?/Edge\/([\d\.]+)/.exec(n):Xo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):VC?/WebKit\/(\S+)/.exec(n):Mg?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(YE&&(H_=YE?YE[1]:""),Xo){var G_=KE();if(null!=G_&&G_>parseFloat(H_)){Od=String(G_);break e}}Od=H_}var UC={};var lx=Ct.document&&Xo&&(KE()||parseInt(Od,10))||void 0,QE=function(){if(!Ct.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ct.addEventListener("test",Ag,e),Ct.removeEventListener("test",Ag,e)}catch(t){}return n}();function fi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Pg(n,e){if(fi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if($_){e:{try{xg(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:JE[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Pg.Z.h.call(this)}}fi.prototype.h=function(){this.defaultPrevented=!0},jr(Pg,fi);var JE={2:"touch",3:"pen",4:"mouse"};Pg.prototype.h=function(){Pg.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Og="closure_listenable_"+(1e6*Math.random()|0),XE=0;function q_(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++XE,this.ca=this.fa=!1}function kg(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Fg(n){this.src=n,this.g={},this.h=0}function z_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=HE(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(kg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function W_(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}Fg.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=W_(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new q_(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var Z_="closure_lm_"+(1e6*Math.random()|0),K_={};function eb(n,e,t,r,o){if(r&&r.once)return nb(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)eb(n,e[u],t,r,o);return null}return t=Q_(t),n&&n[Og]?n.N(e,t,pf(r)?!!r.capture:!!r,o):tb(n,e,t,!1,r,o)}function tb(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=pf(o)?!!o.capture:!!o,m=Vg(n);if(m||(n[Z_]=m=new Fg(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function BC(){var e=rb;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)QE||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Y_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function nb(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)nb(n,e[u],t,r,o);return null}return t=Q_(t),n&&n[Og]?n.O(e,t,pf(r)?!!r.capture:!!r,o):tb(n,e,t,!0,r,o)}function Fd(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)Fd(n,e[u],t,r,o);else r=pf(r)?!!r.capture:!!r,t=Q_(t),n&&n[Og]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=W_(u=n.g[e],t,r,o))&&(kg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Vg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=W_(e,t,r,o)),(t=-1<n?e[n]:null)&&Lg(t))}function Lg(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Og])z_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Y_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Vg(e))?(z_(t,n),0==t.h&&(t.src=null,e[Z_]=null)):kg(n)}}}function Y_(n){return n in K_?K_[n]:K_[n]="on"+n}function rb(n,e){if(n.ca)n=!0;else{e=new Pg(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Lg(n),n=t.call(r,e)}return n}function Vg(n){return(n=n[Z_])instanceof Fg?n:null}var Ug="__closure_events_fn_"+(1e9*Math.random()>>>0);function Q_(n){return"function"==typeof n?n:(n[Ug]||(n[Ug]=function(e){return n.handleEvent(e)}),n[Ug])}function Er(){Ha.call(this),this.i=new Fg(this),this.P=this,this.I=null}function $r(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new fi(e,n);else if(e instanceof fi)e.target=e.target||n;else{var o=e;B_(e=new fi(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=Bg(d,r,!0,e)&&o}if(o=Bg(d=e.g=n,r,!0,e)&&o,o=Bg(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Bg(d=e.g=t[u],r,!1,e)&&o}function Bg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,w=d.ia||d.src;d.fa&&z_(n.i,d),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}jr(Er,Ha),Er.prototype[Og]=!0,Er.prototype.removeEventListener=function(n,e,t,r){Fd(this,n,e,t,r)},Er.prototype.M=function(){if(Er.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)kg(t[r]);delete n.g[e],n.h--}}this.I=null},Er.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Er.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var J_=Ct.JSON.stringify;function jC(){var n=ib;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var ev,Ld=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new HC,n=>n.reset());class HC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function X_(n){Ct.setTimeout(()=>{throw n},0)}function Vs(n,e){ev||function tv(){var n=Ct.Promise.resolve(void 0);ev=function(){n.then(GC)}}(),tc||(ev(),tc=!0),ib.add(n,e)}var tc=!1,ib=new class $C{constructor(){this.h=this.g=null}add(e,t){const r=Ld.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function GC(){for(var n;n=jC();){try{n.h.call(n.g)}catch(t){X_(t)}var e=Ld;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}tc=!1}function jg(n,e){Er.call(this),this.h=n||1,this.g=e||Ct,this.j=Br(this.kb,this),this.l=Date.now()}function Vd(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Ud(n,e,t){if("function"==typeof n)t&&(n=Br(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Br(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ct.setTimeout(n,e||0)}function sb(n){n.g=Ud(()=>{n.g=null,n.i&&(n.i=!1,sb(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}jr(jg,Er),(et=jg.prototype).da=!1,et.S=null,et.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),$r(this,"tick"),this.da&&(Vd(this),this.start()))}},et.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},et.M=function(){jg.Z.M.call(this),Vd(this),delete this.g};class qC extends Ha{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:sb(this)}M(){super.M(),this.g&&(Ct.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bd(n){Ha.call(this),this.h=n,this.g={}}jr(Bd,Ha);var nv=[];function $g(n,e,t,r){Array.isArray(t)||(t&&(nv[0]=t.toString()),t=nv);for(var o=0;o<t.length;o++){var u=eb(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function rv(n){U_(n.g,function(e,t){this.g.hasOwnProperty(t)&&Lg(e)},n),n.g={}}function Hg(){this.g=!0}function $u(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ob(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return J_(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}Bd.prototype.M=function(){Bd.Z.M.call(this),rv(this)},Bd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Hg.prototype.Aa=function(){this.g=!1},Hg.prototype.info=function(){};var Ga={},Gg=null;function qg(){return Gg=Gg||new Er}function ab(n){fi.call(this,Ga.Ma,n)}function mf(n){const e=qg();$r(e,new ab(e,n))}function ub(n,e){fi.call(this,Ga.STAT_EVENT,n),this.stat=e}function pi(n){const e=qg();$r(e,new ub(e,n))}function zg(n,e){fi.call(this,Ga.Na,n),this.size=e}function jd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ct.setTimeout(function(){n()},e)}Ga.Ma="serverreachability",jr(ab,fi),Ga.STAT_EVENT="statevent",jr(ub,fi),Ga.Na="timingevent",jr(zg,fi);var Wg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},sv={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Zg(){}function ov(){}Zg.prototype.h=null;var uv,$d={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function av(){fi.call(this,"d")}function Kg(){fi.call(this,"c")}function br(){}function ea(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Bd(this),this.P=WC,this.W=new jg(n=Rg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new cb}function cb(){this.i=null,this.g="",this.h=!1}jr(av,fi),jr(Kg,fi),jr(br,Zg),br.prototype.g=function(){return new XMLHttpRequest},br.prototype.i=function(){return{}},uv=new br;var WC=45e3,db={},Hu={};function lv(n,e,t){n.K=1,n.v=nm(bo(e)),n.s=t,n.U=!0,Yg(n,null)}function Yg(n,e){n.F=Date.now(),yf(n),n.A=bo(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),QC(t.h,"t",r),n.C=0,t=n.l.H,n.h=new cb,n.g=fm(n.l,t?e:null,!n.s),0<n.O&&(n.L=new qC(Br(n.Ia,n,n.g),n.O)),$g(n.V,n.g,"readystatechange",n.gb),e=n.H?zE(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),mf(1),function zC(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),w=0;w<m.length;w++){var D=m[w].split("=");if(1<D.length){var x=D[0];D=D[1];var N=x.split("_");d=2<=N.length&&"type"==N[1]?d+(x+"=")+D+"&":d+(x+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function hb(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function cv(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=ZC(n,t),o==Hu){4==e&&(n.o=4,pi(14),r=!1),$u(n.j,n.m,null,"[Incomplete Response]");break}if(o==db){n.o=4,pi(15),$u(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}$u(n.j,n.m,o,null),vf(n,o)}hb(n)&&o!=Hu&&o!=db&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,pi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Tb(e),e.L=!0,pi(11))):($u(n.j,n.m,t,"[Invalid Chunked Response]"),ta(n),Hd(n))}function ZC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Hu:(t=Number(e.substring(t,r)),isNaN(t)?db:(r+=1)+t>e.length?Hu:(e=e.substr(r,t),n.C=r+t,e))}function yf(n){n.Y=Date.now()+n.P,Qg(n,n.P)}function Qg(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=jd(Br(n.eb,n),e)}function _f(n){n.B&&(Ct.clearTimeout(n.B),n.B=null)}function Hd(n){0==n.l.G||n.I||Sb(n.l,n)}function ta(n){_f(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Vd(n.W),rv(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function vf(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||qd(t.i,n)))if(t.I=n.N,!n.J&&qd(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(D){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=jd(Br(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;hm(t),lm(t)}Iv(t),pi(18)}if(1>=eT(t.i)&&t.ka){try{t.ka()}catch(D){}t.ka=void 0}}else ic(t,11)}else if((n.J||t.g==n)&&hm(t),!Sg(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let D=o[e];if(t.U=D[0],D=D[1],2==t.G)if("c"==D[0]){t.J=D[1],t.la=D[2];const x=D[3];null!=x&&(t.ma=x,t.h.info("VER="+t.ma));const N=D[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const j=D[5];null!=j&&"number"==typeof j&&0<j&&(t.K=r=1.5*j,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const Z=n.g;if(Z){const ie=Z.g?Z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ie){var u=r.i;!u.g&&(or(ie,"spdy")||or(ie,"quic")||or(ie,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Eb(u,u.h),u.h=null))}if(r.D){const Ne=Z.g?Z.g.getResponseHeader("X-HTTP-Session-Id"):null;Ne&&(r.sa=Ne,mn(r.F,r.D,Ne))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=lT(r,r.H?r.la:null,r.W),d.J){gv(r.i,d);var m=d,w=r.K;w&&m.setTimeout(w),m.B&&(_f(m),yf(m)),r.g=d}else bv(r);0<t.l.length&&cm(t)}else"stop"!=D[0]&&"close"!=D[0]||ic(t,7);else 3==t.G&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?ic(t,7):um(t):"noop"!=D[0]&&t.j&&t.j.wa(D),t.A=0)}mf(4)}catch(D){}}function Jg(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(P_(n)||"string"==typeof n)F_(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(P_(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function dx(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(P_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Gd(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Gd)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Xg(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];na(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)na(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function na(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(et=ea.prototype).setTimeout=function(n){this.P=n},et.gb=function(n){n=n.target;const e=this.L;e&&3==za(n)?e.l():this.Ia(n)},et.Ia=function(n){try{if(n==this.g)e:{const x=za(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>x)&&(3!=x||Rg||this.g&&(this.h.h||this.g.ga()||am(this.g)))){this.I||4!=x||7==e||mf(8==e||0>=N?3:2),_f(this);var t=this.g.ba();this.N=t;t:if(hb(this)){var r=am(this.g);n="";var o=r.length,u=4==za(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ta(this),Hd(this);var d="";break t}this.h.i=new Ct.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function cx(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,x,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Sg(m)){var D=m;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,pi(12),ta(this),Hd(this);break e}$u(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,vf(this,t)}this.U?(cv(this,x,d),Rg&&this.i&&3==x&&($g(this.V,this.W,"tick",this.fb),this.W.start())):($u(this.j,this.m,d,null),vf(this,d)),4==x&&ta(this),this.i&&!this.I&&(4==x?Sb(this.l,this):(this.i=!1,yf(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,pi(12)):(this.o=0,pi(13)),ta(this),Hd(this)}}}catch(x){}},et.fb=function(){if(this.g){var n=za(this.g),e=this.g.ga();this.C<e.length&&(_f(this),cv(this,n,e),this.i&&4!=n&&yf(this))}},et.cancel=function(){this.I=!0,ta(this)},et.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function iv(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(mf(3),pi(17)),ta(this),this.o=2,Hd(this)):Qg(this,this.Y-n)},(et=Gd.prototype).R=function(){Xg(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},et.T=function(){return Xg(this),this.g.concat()},et.get=function(n,e){return na(this.h,n)?this.h[n]:e},et.set=function(n,e){na(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},et.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var dv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function qa(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof qa){this.g=void 0!==e?e:n.g,hv(this,n.j),this.s=n.s,em(this,n.i),tm(this,n.m),this.l=n.l,e=n.h;var t=new bf;t.i=e.i,e.g&&(t.g=new Gd(e.g),t.h=e.h),fv(this,t),this.o=n.o}else n&&(t=String(n).match(dv))?(this.g=!!e,hv(this,t[1]||"",!0),this.s=wf(t[2]||""),em(this,t[3]||"",!0),tm(this,t[4]),this.l=wf(t[5]||"",!0),fv(this,t[6]||"",!0),this.o=wf(t[7]||"")):(this.g=!!e,this.h=new bf(null,this.g))}function bo(n){return new qa(n)}function hv(n,e,t){n.j=t?wf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function em(n,e,t){n.i=t?wf(e,!0):e}function tm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function fv(n,e,t){e instanceof bf?(n.h=e,function hx(n,e){e&&!n.j&&(Gu(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(YC(this,r),QC(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Ef(e,vb)),n.h=new bf(e,n.g))}function mn(n,e,t){n.h.set(e,t)}function nm(n){return mn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function wf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ef(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,gb),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function gb(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}qa.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ef(e,mb,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ef(e,mb,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ef(t,"/"==t.charAt(0)?_b:yb,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ef(t,wb)),n.join("")};var mb=/[#\/\?@]/g,yb=/[#\?:]/g,_b=/[#\?]/g,vb=/[#\?@]/g,wb=/#/g;function bf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Gu(n){n.g||(n.g=new Gd,n.h=0,n.i&&function KC(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function YC(n,e){Gu(n),e=If(n,e),na(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,na((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Xg(n)))}function pv(n,e){return Gu(n),e=If(n,e),na(n.g.h,e)}function QC(n,e,t){YC(n,e),0<t.length&&(n.i=null,n.g.set(If(n,e),Pd(t)),n.h+=t.length)}function If(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function JC(n){this.l=n||px,n=Ct.PerformanceNavigationTiming?0<(n=Ct.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ct.g&&Ct.g.Ea&&Ct.g.Ea()&&Ct.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(et=bf.prototype).add=function(n,e){Gu(this),this.i=null,n=If(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},et.forEach=function(n,e){Gu(this),this.g.forEach(function(t,r){F_(t,function(o){n.call(e,o,r,this)},this)},this)},et.T=function(){Gu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},et.R=function(n){Gu(this);var e=[];if("string"==typeof n)pv(this,n)&&(e=GE(e,this.g.get(If(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=GE(e,n[t])}return e},et.set=function(n,e){return Gu(this),this.i=null,pv(this,n=If(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},et.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},et.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var px=10;function XC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function eT(n){return n.h?1:n.g?n.g.size:0}function qd(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Eb(n,e){n.g?n.g.add(e):n.h=e}function gv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function rm(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Pd(n.i)}function im(){}function bb(){this.g=new im}function gx(n,e,t){const r=t||"";try{Jg(n,function(o,u){let d=o;pf(o)&&(d=J_(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Df(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Cf(n){this.l=n.$b||null,this.j=n.ib||!1}function Tf(n,e){Er.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Ib,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}JC.prototype.cancel=function(){if(this.i=rm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},im.prototype.stringify=function(n){return Ct.JSON.stringify(n,void 0)},im.prototype.parse=function(n){return Ct.JSON.parse(n,void 0)},jr(Cf,Zg),Cf.prototype.g=function(){return new Tf(this.l,this.j)},Cf.prototype.i=function(n){return function(){return n}}({}),jr(Tf,Er);var Ib=0;function Db(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Af(n){n.readyState=4,n.l=null,n.j=null,n.A=null,nc(n)}function nc(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(et=Tf.prototype).open=function(n,e){if(this.readyState!=Ib)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,nc(this)},et.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ct).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Af(this)),this.readyState=Ib},et.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,nc(this)),this.g&&(this.readyState=3,nc(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ct.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Db(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},et.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Af(this):nc(this),3==this.readyState&&Db(this)}},et.Ua=function(n){this.g&&(this.response=this.responseText=n,Af(this))},et.Ta=function(n){this.g&&(this.response=n,Af(this))},et.ha=function(){this.g&&Af(this)},et.setRequestHeader=function(n,e){this.v.append(n,e)},et.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},et.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Tf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var tT=Ct.JSON.parse;function ar(n){Er.call(this),this.headers=new Gd,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=nT,this.K=this.L=!1}jr(ar,Er);var nT="",mx=/^https?$/i,rT=["POST","PUT"];function sT(n){return"content-type"==n.toLowerCase()}function oT(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Cb(n),om(n)}function Cb(n){n.D||(n.D=!0,$r(n,"complete"),$r(n,"error"))}function sm(n){if(n.h&&void 0!==N_&&(!n.C[1]||4!=za(n)||2!=n.ba()))if(n.v&&4==za(n))Ud(n.Fa,0,n);else if($r(n,"readystatechange"),4==za(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(dv)[1]||null;if(!o&&Ct.self&&Ct.self.location){var u=Ct.self.location.protocol;o=u.substr(0,u.length-1)}r=!mx.test(o?o.toLowerCase():"")}t=r}if(t)$r(n,"complete"),$r(n,"success");else{n.m=6;try{var d=2<za(n)?n.g.statusText:""}catch(w){d=""}n.j=d+" ["+n.ba()+"]",Cb(n)}}finally{om(n)}}}function om(n,e){if(n.g){Us(n);const t=n.g,r=n.C[0]?Ag:null;n.g=null,n.C=null,e||$r(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function Us(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ct.clearTimeout(n.A),n.A=null)}function za(n){return n.g?n.g.readyState:0}function am(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case nT:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function yv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function aT(n){let e="";return U_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):mn(n,e,t))}function rc(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function _v(n){this.za=0,this.l=[],this.h=new Hg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=rc("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=rc("baseRetryDelayMs",5e3,n),this.$a=rc("retryDelaySeedMs",1e4,n),this.Ya=rc("forwardChannelMaxRetries",2,n),this.ra=rc("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new JC(n&&n.concurrentRequestLimit),this.Ca=new bb,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function um(n){if(vv(n),3==n.G){var e=n.V++,t=bo(n.F);mn(t,"SID",n.J),mn(t,"RID",e),mn(t,"TYPE","terminate"),Io(n,t),(e=new ea(n,n.h,e,void 0)).K=2,e.v=nm(bo(t)),t=!1,Ct.navigator&&Ct.navigator.sendBeacon&&(t=Ct.navigator.sendBeacon(e.v.toString(),"")),!t&&Ct.Image&&((new Image).src=e.v,t=!0),t||(e.g=fm(e.l,null),e.g.ea(e.v)),e.F=Date.now(),yf(e)}xb(n)}function lm(n){n.g&&(Tb(n),n.g.cancel(),n.g=null)}function vv(n){lm(n),n.u&&(Ct.clearTimeout(n.u),n.u=null),hm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ct.clearTimeout(n.m),n.m=null)}function wv(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&cm(n)}function cm(n){XC(n.i)||n.m||(n.m=!0,Vs(n.Ha,n),n.C=0)}function dm(n,e){var t;t=e?e.m:n.V++;const r=bo(n.F);mn(r,"SID",n.J),mn(r,"RID",t),mn(r,"AID",n.U),Io(n,r),n.o&&n.s&&yv(r,n.o,n.s),t=new ea(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Ev(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Eb(n.i,t),lv(t,r,e)}function Io(n,e){n.j&&Jg({},function(t,r){mn(e,r,t)})}function Ev(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Br(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let D=o[w].h;const x=o[w].g;if(D-=u,0>D)u=Math.max(0,o[w].h-100),m=!1;else try{gx(x,d,"req"+D+"_")}catch(N){r&&r(x)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function bv(n){n.g||n.u||(n.Y=1,Vs(n.Ga,n),n.A=0)}function Iv(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=jd(Br(n.Ga,n),Dv(n,n.A)),n.A++,0))}function Tb(n){null!=n.B&&(Ct.clearTimeout(n.B),n.B=null)}function Ab(n){n.g=new ea(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=bo(n.oa);mn(e,"RID","rpc"),mn(e,"SID",n.J),mn(e,"CI",n.N?"0":"1"),mn(e,"AID",n.U),Io(n,e),mn(e,"TYPE","xmlhttp"),n.o&&n.s&&yv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=nm(bo(e)),t.s=null,t.U=!0,Yg(t,n)}function hm(n){null!=n.v&&(Ct.clearTimeout(n.v),n.v=null)}function Sb(n,e){var t=null;if(n.g==e){hm(n),Tb(n),n.g=null;var r=2}else{if(!qd(n.i,e))return;t=e.D,gv(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;$r(r=qg(),new zg(r,t,e,o)),cm(n)}else bv(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function uT(n,e){return!(eT(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=jd(Br(n.Ha,n,e),Dv(n,n.C)),n.C++,0)))}(n,e)||2==r&&Iv(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:ic(n,5);break;case 4:ic(n,10);break;case 3:ic(n,6);break;default:ic(n,2)}}function Dv(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function ic(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Br(n.jb,n);t||(t=new qa("//www.google.com/images/cleardot.gif"),Ct.location&&"http"==Ct.location.protocol||hv(t,"https"),nm(t)),function mv(n,e){const t=new Hg;if(Ct.Image){const r=new Image;r.onload=Nd(Df,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Nd(Df,t,r,"TestLoadImage: error",!1,e),r.onabort=Nd(Df,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Nd(Df,t,r,"TestLoadImage: timeout",!1,e),Ct.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else pi(2);n.G=0,n.j&&n.j.va(e),xb(n),vv(n)}function xb(n){n.G=0,n.I=-1,n.j&&((0!=rm(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Pd(n.l),n.l.length=0),n.j.ua())}function lT(n,e,t){let r=function fb(n){return n instanceof qa?bo(n):new qa(n,void 0)}(t);if(""!=r.i)e&&em(r,e+"."+r.i),tm(r,r.m);else{const o=Ct.location;r=function pb(n,e,t,r){var o=new qa(null,void 0);return n&&hv(o,n),e&&em(o,e),t&&tm(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&U_(n.aa,function(o,u){mn(r,u,o)}),t=n.sa,(e=n.D)&&t&&mn(r,e,t),mn(r,"VER",n.ma),Io(n,r),r}function fm(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ar(t&&n.Ba&&!n.qa?new Cf({ib:!0}):n.qa)).L=n.H,e}function Cv(){}function pm(){if(Xo&&!(10<=Number(lx)))throw Error("Environmental error: no available transport.")}function hs(n,e){Er.call(this),this.g=new _v(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Sg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Sg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new qu(this)}function Tv(n){av.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function gm(){Kg.call(this),this.status=1}function qu(n){this.g=n}(et=ar.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():uv.g(),this.C=function lb(n){return n.h||(n.h=n.i())}(this.u?this.u:uv),this.g.onreadystatechange=Br(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void oT(this,u)}n=t||"";const o=new Gd(this.headers);r&&Jg(r,function(u,d){o.set(d,u)}),r=function ux(n){e:{var e=sT;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Ct.FormData&&n instanceof Ct.FormData,!(0<=HE(rT,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Us(this),0<this.B&&((this.K=function iT(n){return Xo&&function kd(){return function j_(n){var e=UC;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Xl(String(Od)).split("."),t=Xl("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=L_(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||L_(0==o[2].length,0==u[2].length)||L_(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Br(this.pa,this)):this.A=Ud(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){oT(this,u)}},et.pa=function(){void 0!==N_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$r(this,"timeout"),this.abort(8))},et.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,$r(this,"complete"),$r(this,"abort"),om(this))},et.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),om(this,!0)),ar.Z.M.call(this)},et.Fa=function(){this.s||(this.F||this.v||this.l?sm(this):this.cb())},et.cb=function(){sm(this)},et.ba=function(){try{return 2<za(this)?this.g.status:-1}catch(n){return-1}},et.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},et.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),tT(e)}},et.Da=function(){return this.m},et.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(et=_v.prototype).ma=8,et.G=1,et.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},et.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new ea(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=zE(u),B_(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ev(this,o,e),mn(t=bo(this.F),"RID",n),mn(t,"CVER",22),this.D&&mn(t,"X-HTTP-Session-Id",this.D),Io(this,t),this.o&&u&&yv(t,this.o,u),Eb(this.i,o),this.Ra&&mn(t,"TYPE","init"),this.ja?(mn(t,"$req",e),mn(t,"SID","null"),o.$=!0,lv(o,t,null)):lv(o,t,e),this.G=2}}else 3==this.G&&(n?dm(this,n):0==this.l.length||XC(this.i)||dm(this))},et.Ga=function(){if(this.u=null,Ab(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=jd(Br(this.bb,this),n)}},et.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,pi(10),lm(this),Ab(this))},et.ab=function(){null!=this.v&&(this.v=null,lm(this),Iv(this),pi(19))},et.jb=function(n){n?(this.h.info("Successfully pinged google.com"),pi(2)):(this.h.info("Failed to ping google.com"),pi(1))},(et=Cv.prototype).xa=function(){},et.wa=function(){},et.va=function(){},et.ua=function(){},et.Oa=function(){},pm.prototype.g=function(n,e){return new hs(n,e)},jr(hs,Er),hs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Vs(Br(n.hb,n,e))),pi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=lT(n,null,n.W),cm(n)},hs.prototype.close=function(){um(this.g)},hs.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,wv(this.g,e)}else this.v?((e={}).__data__=J_(n),wv(this.g,e)):wv(this.g,n)},hs.prototype.M=function(){this.g.j=null,delete this.j,um(this.g),delete this.g,hs.Z.M.call(this)},jr(Tv,av),jr(gm,Kg),jr(qu,Cv),qu.prototype.xa=function(){$r(this.g,"a")},qu.prototype.wa=function(n){$r(this.g,new Tv(n))},qu.prototype.va=function(n){$r(this.g,new gm(n))},qu.prototype.ua=function(){$r(this.g,"b")},pm.prototype.createWebChannel=pm.prototype.g,hs.prototype.send=hs.prototype.u,hs.prototype.open=hs.prototype.m,hs.prototype.close=hs.prototype.close,Wg.NO_ERROR=0,Wg.TIMEOUT=8,Wg.HTTP_ERROR=6,sv.COMPLETE="complete",ov.EventType=$d,$d.OPEN="a",$d.CLOSE="b",$d.ERROR="c",$d.MESSAGE="d",Er.prototype.listen=Er.prototype.N,ar.prototype.listenOnce=ar.prototype.O,ar.prototype.getLastError=ar.prototype.La,ar.prototype.getLastErrorCode=ar.prototype.Da,ar.prototype.getStatus=ar.prototype.ba,ar.prototype.getResponseJson=ar.prototype.Qa,ar.prototype.getResponseText=ar.prototype.ga,ar.prototype.send=ar.prototype.ea;var Mb=Jo.createWebChannelTransport=function(){return new pm},cT=Jo.getStatEventTarget=function(){return qg()},mm=Jo.ErrorCode=Wg,Rb=Jo.EventType=sv,dT=Jo.Event=Ga,Nb=Jo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},yx=Jo.FetchXmlHttpFactory=Cf,Av=Jo.WebChannel=ov,Pb=Jo.XhrIo=ar;const Ob="@firebase/firestore";class Hr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Hr.UNAUTHENTICATED=new Hr(null),Hr.GOOGLE_CREDENTIALS=new Hr("google-credentials-uid"),Hr.FIRST_PARTY=new Hr("first-party-uid"),Hr.MOCK_USER=new Hr("mock-user");let zd="9.8.0";const sc=new $a.Yd("@firebase/firestore");function kb(){return sc.logLevel}function ke(n,...e){if(sc.logLevel<=$a.in.DEBUG){const t=e.map(Wd);sc.debug(`Firestore (${zd}): ${n}`,...t)}}function ur(n,...e){if(sc.logLevel<=$a.in.ERROR){const t=e.map(Wd);sc.error(`Firestore (${zd}): ${n}`,...t)}}function Sf(n,...e){if(sc.logLevel<=$a.in.WARN){const t=e.map(Wd);sc.warn(`Firestore (${zd}): ${n}`,...t)}}function Wd(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${zd}) INTERNAL ASSERTION FAILED: `+n;throw ur(e),new Error(e)}function It(n,e){n||tt()}function $e(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends bt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Lb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Sv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Hr.UNAUTHENTICATED))}shutdown(){}}class xv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ym{constructor(e){this.t=e,this.currentUser=Hr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=D=>this.i!==o?(o=this.i,t(D)):Promise.resolve();let d=new Yn;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Yn,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const D=d;e.enqueueRetryable((0,me.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},w=D=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(D=>w(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?w(D):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Yn)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It("string"==typeof r.accessToken),new Lb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return It(null===e||"string"==typeof e),new Hr(e)}}class vx{constructor(e,t,r){this.type="FirstParty",this.user=Hr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class wx{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new vx(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Hr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ex{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It("string"==typeof t.token),this.p=t.token,new hT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class fs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function pT(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}fs.A=-1;class Vb{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=pT(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Mt(n,e){return n<e?-1:n>e?1:0}function oc(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function Mv(n){return n+"\0"}class Fn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Se(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fn.fromMillis(Date.now())}static fromDate(e){return Fn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Fn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class wt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wt(e)}static min(){return new wt(new Fn(0,0))}static max(){return new wt(new Fn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Ub(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _m(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class vm{constructor(e,t,r){void 0===t?t=0:t>e.length&&tt(),void 0===r?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===vm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vm?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Gt extends vm{construct(e,t,r){return new Gt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Se(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Gt(t)}static emptyPath(){return new Gt([])}}const Rv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lr extends vm{construct(e,t,r){return new lr(e,t,r)}static isValidIdentifier(e){return Rv.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new lr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Se(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Se(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Se(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new Se(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lr(t)}static emptyPath(){return new lr([])}}class Zd{constructor(e){this.fields=e,e.sort(lr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return oc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ir{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ir(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Ir(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ir.EMPTY_BYTE_STRING=new Ir("");const gT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wu(n){if(It(!!n),"string"==typeof n){let e=0;const t=gT.exec(n);if(It(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Hn(n.seconds),nanos:Hn(n.nanos)}}function Hn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Kd(n){return"string"==typeof n?Ir.fromBase64String(n):Ir.fromUint8Array(n)}function Bb(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function mT(n){const e=n.mapValue.fields.__previous_value__;return Bb(e)?mT(e):e}function wm(n){const e=Wu(n.mapValue.fields.__local_write_time__.timestampValue);return new Fn(e.seconds,e.nanos)}class yT{constructor(e,t,r,o,u,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Zu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Zu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Zu&&e.projectId===this.projectId&&e.database===this.database}}function Em(n){return null==n}function bm(n){return 0===n&&1/n==-1/0}function _T(n){return"number"==typeof n&&Number.isInteger(n)&&!bm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class i{constructor(e){this.path=e}static fromPath(e){return new i(Gt.fromString(e))}static fromName(e){return new i(Gt.fromString(e).popFirst(5))}static empty(){return new i(Gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Gt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new i(new Gt(e.slice()))}}const s={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},a={nullValue:"NULL_VALUE"};function l(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Bb(n)?4:Xe(n)?9007199254740991:10:tt()}function c(n,e){if(n===e)return!0;const t=l(n);if(t!==l(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return wm(n).isEqual(wm(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Wu(r.timestampValue),d=Wu(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Kd(n.bytesValue).isEqual(Kd(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Hn(r.geoPointValue.latitude)===Hn(o.geoPointValue.latitude)&&Hn(r.geoPointValue.longitude)===Hn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Hn(r.integerValue)===Hn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Hn(r.doubleValue),d=Hn(o.doubleValue);return u===d?bm(u)===bm(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return oc(n.arrayValue.values||[],e.arrayValue.values||[],c);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(Ub(u)!==Ub(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!c(u[m],d[m])))return!1;return!0}(n,e);default:return tt()}var o}function p(n,e){return void 0!==(n.values||[]).find(t=>c(t,e))}function _(n,e){if(n===e)return 0;const t=l(n),r=l(e);if(t!==r)return Mt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Mt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=Hn(o.integerValue||o.doubleValue),m=Hn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return E(n.timestampValue,e.timestampValue);case 4:return E(wm(n),wm(e));case 5:return Mt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=Kd(o),m=Kd(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let w=0;w<d.length&&w<m.length;w++){const D=Mt(d[w],m[w]);if(0!==D)return D}return Mt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=Mt(Hn(o.latitude),Hn(u.latitude));return 0!==d?d:Mt(Hn(o.longitude),Hn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let w=0;w<d.length&&w<m.length;++w){const D=_(d[w],m[w]);if(D)return D}return Mt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===s.mapValue&&u===s.mapValue)return 0;if(o===s.mapValue)return 1;if(u===s.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),w=u.fields||{},D=Object.keys(w);m.sort(),D.sort();for(let x=0;x<m.length&&x<D.length;++x){const N=Mt(m[x],D[x]);if(0!==N)return N;const j=_(d[m[x]],w[D[x]]);if(0!==j)return j}return Mt(m.length,D.length)}(n.mapValue,e.mapValue);default:throw tt()}}function E(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Mt(n,e);const t=Wu(n),r=Wu(e),o=Mt(t.seconds,r.seconds);return 0!==o?o:Mt(t.nanos,r.nanos)}function b(n){return A(n)}function A(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Wu(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Kd(n.bytesValue).toBase64():"referenceValue"in n?i.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=A(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${A(r.fields[m])}`;return u+"}"}(n.mapValue):tt();var e}function S(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function k(n){return!!n&&"integerValue"in n}function V(n){return!!n&&"arrayValue"in n}function K(n){return!!n&&"nullValue"in n}function ye(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Oe(n){return!!n&&"mapValue"in n}function Be(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return zu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Be(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Be(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Xe(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Te(n){return"nullValue"in n?a:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?S(Zu.empty(),i.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:tt()}function lt(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?S(Zu.empty(),i.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?s:tt()}function Ft(n,e){const t=_(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Qt(n,e){const t=_(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Oe(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Be(t)}setAll(e){let t=lr.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=Be(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Oe(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return c(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Oe(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){zu(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new on(Be(this.value))}}function Ku(n){const e=[];return zu(n.fields,(t,r)=>{const o=new lr([t]);if(Oe(r)){const u=Ku(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Zd(e)}class hn{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new hn(e,0,wt.min(),wt.min(),on.empty(),0)}static newFoundDocument(e,t,r){return new hn(e,1,t,wt.min(),r,0)}static newNoDocument(e,t){return new hn(e,2,t,wt.min(),on.empty(),0)}static newUnknownDocument(e,t){return new hn(e,3,t,wt.min(),on.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Yd{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function xf(n){return n.fields.find(e=>2===e.kind)}function Wa(n){return n.fields.filter(e=>2!==e.kind)}Yd.UNKNOWN_ID=-1;class Qd{constructor(e,t){this.fieldPath=e,this.kind=t}}class ac{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ac(0,ps.min())}}function Im(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=wt.fromTimestamp(1e9===r?new Fn(t+1,0):new Fn(t,r));return new ps(o,i.empty(),e)}function Nv(n){return new ps(n.readTime,n.key,-1)}class ps{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ps(wt.min(),i.empty(),-1)}static max(){return new ps(wt.max(),i.empty(),-1)}}function Ix(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=i.comparator(n.documentKey,e.documentKey),0!==t?t:Mt(n.largestBatchId,e.largestBatchId))}class cr{constructor(e,t){this.comparator=e,this.root=t||Ri.EMPTY}insert(e,t){return new cr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ri.BLACK,null,null))}remove(e){return new cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ri.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jb(this.root,e,this.comparator,!1)}getReverseIterator(){return new jb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jb(this.root,e,this.comparator,!0)}}class jb{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ri{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:Ri.RED,this.left=null!=o?o:Ri.EMPTY,this.right=null!=u?u:Ri.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Ri(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ri.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Ri.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ri.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ri.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}Ri.EMPTY=null,Ri.RED=!0,Ri.BLACK=!1,Ri.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Ri(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class bn{constructor(e){this.comparator=e,this.data=new cr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Dx(this.data.getIterator())}getIteratorFrom(e){return new Dx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof bn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new bn(this.comparator);return t.data=e,t}}class Dx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Dm(n){return n.hasNext()?n.getNext():void 0}class T1{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.P=null}}function Cx(n,e=null,t=[],r=[],o=null,u=null,d=null){return new T1(n,e,t,r,o,u,d)}function Mf(n){const e=$e(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+b(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Em(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>b(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>b(r)).join(",")),e.P=t}return e.P}function Pv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!k1(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!c(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Mx(n.startAt,e.startAt)&&Mx(n.endAt,e.endAt)}function $b(n){return i.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Hb(n,e){return n.filters.filter(t=>t instanceof Ni&&t.field.isEqual(e))}function Tx(n,e,t){let r=a,o=!0;for(const u of Hb(n,e)){let d=a,m=!0;switch(u.op){case"<":case"<=":d=Te(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=a}Ft({value:r,inclusive:o},{value:d,inclusive:m})<0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Ft({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function Ax(n,e,t){let r=s,o=!0;for(const u of Hb(n,e)){let d=s,m=!0;switch(u.op){case">=":case">":d=lt(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=s}Qt({value:r,inclusive:o},{value:d,inclusive:m})>0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Qt({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Ni extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new S1(e,t,r):"array-contains"===t?new R1(e,r):"in"===t?new N1(e,r):"not-in"===t?new P1(e,r):"array-contains-any"===t?new O1(e,r):new Ni(e,t,r)}static V(e,t,r){return"in"===t?new x1(e,r):new M1(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(_(t,this.value)):null!==t&&l(this.value)===l(t)&&this.v(_(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class S1 extends Ni{constructor(e,t,r){super(e,t,r),this.key=i.fromName(r.referenceValue)}matches(e){const t=i.comparator(e.key,this.key);return this.v(t)}}class x1 extends Ni{constructor(e,t){super(e,"in",t),this.keys=Sx(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class M1 extends Ni{constructor(e,t){super(e,"not-in",t),this.keys=Sx(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Sx(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>i.fromName(r.referenceValue))}class R1 extends Ni{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return V(t)&&p(t.arrayValue,this.value)}}class N1 extends Ni{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&p(this.value.arrayValue,t)}}class P1 extends Ni{constructor(e,t){super(e,"not-in",t)}matches(e){if(p(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!p(this.value.arrayValue,t)}}class O1 extends Ni{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!V(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>p(this.value.arrayValue,r))}}class Jd{constructor(e,t){this.position=e,this.inclusive=t}}class Cm{constructor(e,t="asc"){this.field=e,this.dir=t}}function k1(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function xx(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?i.comparator(i.fromName(d.referenceValue),t.key):_(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Mx(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!c(n.position[t],e.position[t]))return!1;return!0}class uc{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=w,this.D=null,this.C=null}}function Rx(n,e,t,r,o,u,d,m){return new uc(n,e,t,r,o,u,d,m)}function Tm(n){return new uc(n)}function vT(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function wT(n){for(const e of n.filters)if(e.S())return e.field;return null}function ET(n){return null!==n.collectionGroup}function Am(n){const e=$e(n);if(null===e.D){e.D=[];const t=wT(e),r=vT(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Cm(t)),e.D.push(new Cm(lr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Cm(lr.keyField(),u))}}}return e.D}function ra(n){const e=$e(n);if(!e.C)if("F"===e.limitType)e.C=Cx(e.path,e.collectionGroup,Am(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Am(e))t.push(new Cm(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Jd(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Jd(e.startAt.position,e.startAt.inclusive):null;e.C=Cx(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function Nx(n,e,t){return new uc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ov(n,e){return Pv(ra(n),ra(e))&&n.limitType===e.limitType}function Px(n){return`${Mf(ra(n))}|lt:${n.limitType}`}function bT(n){return`Query(target=${function A1(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${b(r.value)}`;var r}).join(", ")}]`),Em(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>b(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>b(t)).join(",")),`Target(${e})`}(ra(n))}; limitType=${n.limitType})`}function IT(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):i.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=xx(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,Am(t),r)||t.endAt&&!function(o,u,d){const m=xx(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,Am(t),r)));var t,r}function Ox(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kx(n){return(e,t)=>{let r=!1;for(const o of Am(n)){const u=L1(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function L1(n,e,t){const r=n.field.isKeyField()?i.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),w=d.data.field(o);return null!==m&&null!==w?_(m,w):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}function Fx(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bm(e)?"-0":e}}function Lx(n){return{integerValue:""+n}}function Vx(n,e){return _T(e)?Lx(e):Fx(n,e)}class Gb{constructor(){this._=void 0}}function V1(n,e,t){return n instanceof Sm?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Rf?Bx(n,e):n instanceof Nf?jx(n,e):function(r,o){const u=Ux(r,o),d=$x(u)+$x(r.k);return k(u)&&k(r.k)?Lx(d):Fx(r.M,d)}(n,e)}function U1(n,e,t){return n instanceof Rf?Bx(n,e):n instanceof Nf?jx(n,e):t}function Ux(n,e){return n instanceof xm?k(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Sm extends Gb{}class Rf extends Gb{constructor(e){super(),this.elements=e}}function Bx(n,e){const t=Hx(e);for(const r of n.elements)t.some(o=>c(o,r))||t.push(r);return{arrayValue:{values:t}}}class Nf extends Gb{constructor(e){super(),this.elements=e}}function jx(n,e){let t=Hx(e);for(const r of n.elements)t=t.filter(o=>!c(o,r));return{arrayValue:{values:t}}}class xm extends Gb{constructor(e,t){super(),this.M=e,this.k=t}}function $x(n){return Hn(n.integerValue||n.doubleValue)}function Hx(n){return V(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class kv{constructor(e,t){this.field=e,this.transform=t}}class j1{constructor(e,t){this.version=e,this.transformResults=t}}class Dr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Dr}static exists(e){return new Dr(void 0,e)}static updateTime(e){return new Dr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qb(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class zb{}function $1(n,e,t){n instanceof Fv?function(r,o,u){const d=r.value.clone(),m=Wx(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Pf?function(r,o,u){if(!qb(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=Wx(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(zx(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function DT(n,e,t){var o;n instanceof Fv?function(r,o,u){if(!qb(r.precondition,o))return;const d=r.value.clone(),m=Zx(r.fieldTransforms,u,o);d.setAll(m),o.convertToFoundDocument(qx(o),d).setHasLocalMutations()}(n,e,t):n instanceof Pf?function(r,o,u){if(!qb(r.precondition,o))return;const d=Zx(r.fieldTransforms,u,o),m=o.data;m.setAll(zx(r)),m.setAll(d),o.convertToFoundDocument(qx(o),m).setHasLocalMutations()}(n,e,t):qb(n.precondition,o=e)&&o.convertToNoDocument(wt.min())}function H1(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=Ux(r.transform,o||null);null!=u&&(null==t&&(t=on.empty()),t.set(r.field,u))}return t||null}function Gx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&oc(t,r,(o,u)=>function B1(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Rf&&r instanceof Rf||t instanceof Nf&&r instanceof Nf?oc(t.elements,r.elements,c):t instanceof xm&&r instanceof xm?c(t.k,r.k):t instanceof Sm&&r instanceof Sm);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function qx(n){return n.isFoundDocument()?n.version:wt.min()}class Fv extends zb{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Pf extends zb{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function zx(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Wx(n,e,t){const r=new Map;It(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,U1(d,m,t[o]))}return r}function Zx(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,V1(u,d,e))}return r}class Lv extends zb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class CT extends zb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class G1{constructor(e){this.count=e}}var Cr,Kt;function Kx(n){switch(n){default:return tt();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function Yx(n){if(void 0===n)return ur("GRPC error has no .code"),le.UNKNOWN;switch(n){case Cr.OK:return le.OK;case Cr.CANCELLED:return le.CANCELLED;case Cr.UNKNOWN:return le.UNKNOWN;case Cr.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Cr.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Cr.INTERNAL:return le.INTERNAL;case Cr.UNAVAILABLE:return le.UNAVAILABLE;case Cr.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Cr.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Cr.NOT_FOUND:return le.NOT_FOUND;case Cr.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Cr.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Cr.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Cr.ABORTED:return le.ABORTED;case Cr.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Cr.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Cr.DATA_LOSS:return le.DATA_LOSS;default:return tt()}}(Kt=Cr||(Cr={}))[Kt.OK=0]="OK",Kt[Kt.CANCELLED=1]="CANCELLED",Kt[Kt.UNKNOWN=2]="UNKNOWN",Kt[Kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kt[Kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kt[Kt.NOT_FOUND=5]="NOT_FOUND",Kt[Kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kt[Kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kt[Kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kt[Kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kt[Kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kt[Kt.ABORTED=10]="ABORTED",Kt[Kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kt[Kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kt[Kt.INTERNAL=13]="INTERNAL",Kt[Kt.UNAVAILABLE=14]="UNAVAILABLE",Kt[Kt.DATA_LOSS=15]="DATA_LOSS";class Xd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){zu(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return _m(this.inner)}size(){return this.innerSize}}const q1=new cr(i.comparator);function ia(){return q1}const z1=new cr(i.comparator);function TT(...n){let e=z1;for(const t of n)e=e.insert(t.key,t);return e}function Vv(){return new Xd(n=>n.toString(),(n,e)=>n.isEqual(e))}const W1=new cr(i.comparator),Z1=new bn(i.comparator);function an(...n){let e=Z1;for(const t of n)e=e.add(t);return e}const K1=new bn(Mt);function Wb(){return K1}class Uv{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Bv.createSynthesizedTargetChangeForCurrentChange(e,t)),new Uv(wt.min(),r,Wb(),ia(),an())}}class Bv{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Bv(Ir.EMPTY_BYTE_STRING,t,an(),an(),an())}}class Zb{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class Qx{constructor(e,t){this.targetId=e,this.$=t}}class Jx{constructor(e,t,r=Ir.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Xx{constructor(){this.B=0,this.L=tM(),this.U=Ir.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=an(),t=an(),r=an();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:tt()}}),new Bv(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=tM()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Y1{constructor(e){this.nt=e,this.st=new Map,this.it=ia(),this.rt=eM(),this.ot=new bn(Mt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if($b(u))if(0===r){const d=new i(u.path);this.ct(t,d,hn.newNoDocument(d,wt.min()))}else It(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,d)=>{const m=this.wt(d);if(m){if(u.current&&$b(m.target)){const w=new i(m.target.path);null!==this.it.get(w)||this.It(d,w)||this.ct(d,w,hn.newNoDocument(w,e))}u.j&&(t.set(d,u.H()),u.J())}});let r=an();this.rt.forEach((u,d)=>{let m=!0;d.forEachWhile(w=>{const D=this.wt(w);return!D||2===D.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,d)=>d.setReadTime(e));const o=new Uv(e,t,this.ot,this.it,r);return this.it=ia(),this.rt=eM(),this.ot=new bn(Mt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Xx,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new bn(Mt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Xx),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function eM(){return new cr(i.comparator)}function tM(){return new cr(i.comparator)}const Q1={asc:"ASCENDING",desc:"DESCENDING"},J1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class X1{constructor(e,t){this.databaseId=e,this.N=t}}function jv(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nM(n,e){return n.N?e.toBase64():e.toUint8Array()}function eN(n,e){return jv(n,e.toTimestamp())}function gi(n){return It(!!n),wt.fromTimestamp(function(e){const t=Wu(e);return new Fn(t.seconds,t.nanos)}(n))}function AT(n,e){return(t=n,new Gt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function rM(n){const e=Gt.fromString(n);return It(hM(e)),e}function $v(n,e){return AT(n.databaseId,e.path)}function Yu(n,e){const t=rM(e);if(t.get(1)!==n.databaseId.projectId)throw new Se(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Se(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new i(sM(t))}function ST(n,e){return AT(n.databaseId,e)}function iM(n){const e=rM(n);return 4===e.length?Gt.emptyPath():sM(e)}function Hv(n){return new Gt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sM(n){return It(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function oM(n,e,t){return{name:$v(n,e),fields:t.value.mapValue.fields}}function aM(n,e,t){const r=Yu(n,e.name),o=gi(e.updateTime),u=new on({mapValue:{fields:e.fields}}),d=hn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Gv(n,e){let t;if(e instanceof Fv)t={update:oM(n,e.key,e.value)};else if(e instanceof Lv)t={delete:$v(n,e.key)};else if(e instanceof Pf)t={update:oM(n,e.key,e.data),updateMask:lN(e.fieldMask)};else{if(!(e instanceof CT))return tt();t={verify:$v(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof Sm)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Rf)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Nf)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof xm)return{fieldPath:u.field.canonicalString(),increment:d.k};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:eN(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:tt()),t;var o}function xT(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Dr.updateTime(gi(o.updateTime)):void 0!==o.exists?Dr.exists(o.exists):Dr.none():Dr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(It("REQUEST_TIME"===d.setToServerValue),m=new Sm):"appendMissingElements"in d?m=new Rf(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new Nf(d.removeAllFromArray.values||[]):"increment"in d?m=new xm(u,d.increment):tt();const w=lr.fromServerFormat(d.fieldPath);return new kv(w,m)}(n,o)):[];var o;if(e.update){const o=Yu(n,e.update.name),u=new on({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Zd((e.updateMask.fieldPaths||[]).map(D=>lr.fromServerFormat(D)));return new Pf(o,u,d,t,r)}return new Fv(o,u,t,r)}if(e.delete){const o=Yu(n,e.delete);return new Lv(o,t)}if(e.verify){const o=Yu(n,e.verify);return new CT(o,t)}return tt()}function uM(n,e){return{documents:[ST(n,e.path)]}}function lM(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=ST(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=ST(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const D=w.map(x=>function(N){if("=="===N.op){if(ye(N.value))return{unaryFilter:{field:Mm(N.field),op:"IS_NAN"}};if(K(N.value))return{unaryFilter:{field:Mm(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(ye(N.value))return{unaryFilter:{field:Mm(N.field),op:"IS_NOT_NAN"}};if(K(N.value))return{unaryFilter:{field:Mm(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mm(N.field),op:oN(N.op),value:N.value}}}(x));return 1===D.length?D[0]:{compositeFilter:{op:"AND",filters:D}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(D=>{return{field:Mm((x=D).field),direction:sN(x.dir)};var x})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(D=e.limit,n.N||Em(D)?D:{value:D});var D,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function cM(n){let e=iM(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){It(1===r);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let u=[];t.where&&(u=dM(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(x=>{return new Cm(Rm((N=x).field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(x){let N;return N="object"==typeof x?x.value:x,Em(N)?null:N}(t.limit));let w=null;var x;t.startAt&&(w=new Jd((x=t.startAt).values||[],!!x.before));let D=null;return t.endAt&&(D=function(x){return new Jd(x.values||[],!x.before)}(t.endAt)),Rx(e,o,d,u,m,"F",w,D)}function dM(n){return n?void 0!==n.unaryFilter?[uN(n)]:void 0!==n.fieldFilter?[aN(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>dM(e)).reduce((e,t)=>e.concat(t)):tt():[]}function sN(n){return Q1[n]}function oN(n){return J1[n]}function Mm(n){return{fieldPath:n.canonicalString()}}function Rm(n){return lr.fromServerFormat(n.fieldPath)}function aN(n){return Ni.create(Rm(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(n.fieldFilter.op),n.fieldFilter.value)}function uN(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Rm(n.unaryFilter.field);return Ni.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Rm(n.unaryFilter.field);return Ni.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Rm(n.unaryFilter.field);return Ni.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Rm(n.unaryFilter.field);return Ni.create(o,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}function lN(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function hM(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function gs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=fM(e)),e=cN(n.get(t),e);return fM(e)}function cN(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function fM(n){return n+"\x01\x01"}function Qu(n){const e=n.length;if(It(e>=2),2===e)return It("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Gt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&tt(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:tt()}u=d+2}return new Gt(r)}const pM=["userId","batchId"];function Kb(n,e){return[n,gs(e)]}function gM(n,e,t){return[n,gs(e),t]}const dN={},hN=["prefixPath","collectionGroup","readTime","documentId"],fN=["prefixPath","collectionGroup","documentId"],pN=["collectionGroup","readTime","prefixPath","documentId"],gN=["canonicalId","targetId"],mN=["targetId","path"],yN=["path","targetId"],_N=["collectionId","parent"],vN=["indexId","uid"],wN=["uid","sequenceNumber"],EN=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],bN=["indexId","uid","orderedDocumentKey"],IN=["userId","collectionPath","documentId"],DN=["userId","collectionPath","largestBatchId"],CN=["userId","collectionGroup","largestBatchId"],mM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],TN=[...mM,"documentOverlays"],yM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],AN=[...yM,"indexConfiguration","indexState","indexEntries"],_M="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.reject(t)}static resolve(e){return new fe((t,r)=>{t(e)})}static reject(e){return new fe((t,r)=>{r(e)})}static waitFor(e){return new fe((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},w=>r(w))}),d=!0,u===o&&t()})}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next(o=>o?fe.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class Yb{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Yn,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new qv(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=MT(r.target.error);this.At.reject(new qv(e,o))}}static open(e,t,r,o){try{return new Yb(t,e.transaction(o,r))}catch(u){throw new qv(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new xN(t)}}class Za{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Za.Vt((0,bt.z$)())&&ur("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),kf(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,bt.hl)())return!1;if(Za.St())return!0;const e=(0,bt.z$)(),t=Za.Vt(e),r=0<t&&t<10,o=Za.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,me.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new qv(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new Se(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Se(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new qv(e,m))},u.onupgradeneeded=d=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Pt.kt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,me.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const w=Yb.open(u.db,e,d?"readonly":"readwrite",r),D=o(w).next(x=>(w.bt(),x)).catch(x=>(w.abort(x),fe.reject(x))).toPromise();return D.catch(()=>{}),yield w.Rt,D}catch(w){const D="FirebaseError"!==w.name&&m<3;if(ke("SimpleDb","Transaction failed with error:",w.message,"Retrying:",D),u.close(),!D)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class SN{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return kf(this.Ft.delete())}}class qv extends Se{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Of(n){return"IndexedDbTransactionError"===n.name}class xN{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),kf(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),kf(this.store.add(e))}get(e){return kf(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),kf(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),kf(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new fe((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new fe((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Qt(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,d,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new fe((r,o)=>{t.onerror=u=>{const d=MT(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new fe((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const w=new SN(m),D=t(m.primaryKey,m.value,w);if(D instanceof fe){const x=D.catch(N=>(w.done(),fe.reject(N)));r.push(x)}w.isDone?o():null===w.Lt?m.continue():m.continue(w.Lt)}}).next(()=>fe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function kf(n){return new fe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=MT(r.target.error);t(o)}})}let wM=!1;function MT(n){const e=Za.Vt((0,bt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wM||(wM=!0,setTimeout(()=>{throw r},0)),r}}return n}class EM extends vM{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function mi(n,e){const t=$e(n);return Za.xt(t.Ht,e)}class RT{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&$1(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&DT(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&DT(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(wt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),an())}isEqual(e){return this.batchId===e.batchId&&oc(this.mutations,e.mutations,(t,r)=>Gx(t,r))&&oc(this.baseMutations,e.baseMutations,(t,r)=>Gx(t,r))}}class NT{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){It(e.mutations.length===r.length);let o=W1;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new NT(e,t,r,o)}}class PT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class eh{constructor(e,t,r,o,u=wt.min(),d=wt.min(),m=Ir.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new eh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new eh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new eh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class bM{constructor(e){this.Jt=e}}function IM(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Qb(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:$v(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:jv(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ff(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:Ff(e.version)}}var o,u;return r}function Qb(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ff(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Lf(n){const e=new Fn(n.seconds,n.nanoseconds);return wt.fromTimestamp(e)}function Nm(n,e){const t=(e.baseMutations||[]).map(u=>xT(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>xT(n.Jt,u)),o=Fn.fromMillis(e.localWriteTimeMs);return new RT(e.batchId,o,t,r)}function zv(n){const e=Lf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Lf(n.lastLimboFreeSnapshotVersion):wt.min();let r;var o;return void 0!==n.query.documents?(It(1===(o=n.query).documents.length),r=ra(Tm(iM(o.documents[0])))):r=ra(cM(n.query)),new eh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ir.fromBase64String(n.resumeToken))}function DM(n,e){const t=Ff(e.snapshotVersion),r=Ff(e.lastLimboFreeSnapshotVersion);let o;o=$b(e.target)?uM(n.Jt,e.target):lM(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Mf(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function OT(n){const e=cM({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Nx(e,e.limit,"L"):e}function kT(n,e){return new PT(e.largestBatchId,xT(n.Jt,e.overlayMutation))}function CM(n,e){const t=e.path.lastSegment();return[n,gs(e.path.popLast()),t]}class RN{getBundleMetadata(e,t){return TM(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Lf(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return TM(e).put({bundleId:(r=t).id,createTime:Ff(gi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return AM(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:OT(o.bundledQuery),readTime:Lf(o.readTime)};var o})}saveNamedQuery(e,t){return AM(e).put({name:(r=t).name,readTime:Ff(gi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function TM(n){return mi(n,"bundles")}function AM(n){return mi(n,"namedQueries")}class FT{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new FT(e,t.uid||"")}getOverlay(e,t){return Wv(e).get(CM(this.userId,t)).next(r=>r?kT(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new PT(t,d);o.push(this.Xt(e,m))}),fe.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(gs(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(Wv(e).Qt("collectionPathOverlayIndex",m))}),fe.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Vv(),u=gs(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Wv(e).qt("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const D=kT(this.M,w);o.set(D.getKey(),D)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Vv();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Wv(e).Wt({index:"collectionGroupOverlayIndex",range:m},(w,D,x)=>{const N=kT(this.M,D);u.size()<o||N.largestBatchId===d?(u.set(N.getKey(),N),d=N.largestBatchId):x.done()}).next(()=>u)}Xt(e,t){return Wv(e).put(function(r,o,u){const[d,m,w]=CM(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Gv(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function Wv(n){return mi(n,"documentOverlays")}class Vf{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Hn(e.integerValue));else if("doubleValue"in e){const r=Hn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),bm(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Kd(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?Xe(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):tt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),i.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function NN(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function SM(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=NN(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Vf.fe=new Vf;class PN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=SM(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=SM(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class ON{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class kN{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Zv{constructor(){this.De=new PN,this.Ce=new ON(this.De),this.xe=new kN(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Uf{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Uf(this.indexId,this.documentKey,this.arrayValue,r)}}function Bf(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=xM(n.arrayValue,e.arrayValue),0!==t?t:(t=xM(n.directionalValue,e.directionalValue),0!==t?t:i.comparator(n.documentKey,e.documentKey)))}function xM(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class FN{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=xf(e);if(void 0!==t&&!this.Be(t))return!1;const r=Wa(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const d=r[o];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class LN{constructor(){this.qe=new LT}addToCollectionParentIndex(e,t){return this.qe.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(ps.min())}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class LT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new bn(Gt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new bn(Gt.comparator)).toArray()}}const Jb=new Uint8Array(0);class VN{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new LT,this.Ge=new Xd(r=>Mf(r),(r,o)=>Pv(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:gs(o)};return MM(e).put(u)}return fe.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Mv(t),""],!1,!0);return MM(e).qt(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(Qu(d.parent))}return r})}addFieldIndex(e,t){const r=Xb(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=Xb(e),o=eI(e),u=Kv(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Kv(e);let o=!0;const u=new Map;return fe.forEach(this.Qe(t),d=>this.je(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=an();const m=[];return fe.forEach(u,(w,D)=>{var x;ke("IndexedDbIndexManager",`Using index ${x=w,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(mt=>`${mt.fieldPath}:${mt.kind}`).join(",")}`} to execute ${Mf(t)}`);const N=function(mt,it){const xt=xf(it);if(void 0===xt)return null;for(const $t of Hb(mt,xt.fieldPath))switch($t.op){case"array-contains-any":return $t.value.arrayValue.values||[];case"array-contains":return[$t.value]}return null}(D,w),j=function(mt,it){const xt=new Map;for(const $t of Wa(it))for(const Ar of Hb(mt,$t.fieldPath))switch(Ar.op){case"==":case"in":xt.set($t.fieldPath.canonicalString(),Ar.value);break;case"not-in":case"!=":return xt.set($t.fieldPath.canonicalString(),Ar.value),Array.from(xt.values())}return null}(D,w),Z=function(mt,it){const xt=[];let $t=!0;for(const Ar of Wa(it)){const Ka=0===Ar.kind?Tx(mt,Ar.fieldPath,mt.startAt):Ax(mt,Ar.fieldPath,mt.startAt);xt.push(Ka.value),$t&&($t=Ka.inclusive)}return new Jd(xt,$t)}(D,w),ie=function(mt,it){const xt=[];let $t=!0;for(const Ar of Wa(it)){const Ka=0===Ar.kind?Ax(mt,Ar.fieldPath,mt.endAt):Tx(mt,Ar.fieldPath,mt.endAt);xt.push(Ka.value),$t&&($t=Ka.inclusive)}return new Jd(xt,$t)}(D,w),Ne=this.We(w,D,Z),Ve=this.We(w,D,ie),Tt=this.ze(w,D,j),At=this.He(w.indexId,N,Ne,Z.inclusive,Ve,ie.inclusive,Tt);return fe.forEach(At,mt=>r.Gt(mt,t.limit).next(it=>{it.forEach(xt=>{const $t=i.fromSegments(xt.documentKey);d.has($t)||(d=d.add($t),m.push($t))})}))}).next(()=>m)}return fe.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,o,u,d,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),D=w/(null!=t?t.length:1),x=[];for(let N=0;N<w;++N){const j=t?this.Je(t[N/D]):Jb,Z=this.Ye(e,j,r[N%D],o),ie=this.Xe(e,j,u[N%D],d),Ne=m.map(Ve=>this.Ye(e,j,Ve,!0));x.push(...this.createRange(Z,ie,Ne))}return x}Ye(e,t,r,o){const u=new Uf(e,i.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new Uf(e,i.empty(),t,r);return o?u.ke():u}je(e,t){const r=new FN(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const m of u)r.$e(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return fe.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let m=new bn(lr.comparator),w=!1;for(const D of d.filters){const x=D;x.field.isKeyField()||("array-contains"===x.op||"array-contains-any"===x.op?w=!0:m=m.add(x.field))}for(const D of d.orderBy)D.field.isKeyField()||(m=m.add(D.field));return m.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new Zv;for(const o of Wa(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Ne(o.kind);Vf.fe.Zt(u,d)}return r.Se()}Je(e){const t=new Zv;return Vf.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Zv;return Vf.fe.Zt(S(this.databaseId,t),r.Ne(function(o){const u=Wa(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let o=[];o.push(new Zv);let u=0;for(const d of Wa(e)){const m=r[u++];for(const w of o)if(this.en(t,d.fieldPath)&&V(m))o=this.nn(o,d,m);else{const D=w.Ne(d.kind);Vf.fe.Zt(m,D)}}return this.sn(o)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const w=new Zv;w.seed(m.Se()),Vf.fe.Zt(d,w.Ne(t.kind)),u.push(w)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Ni&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Xb(e),o=eI(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const d=[];return fe.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{d.push(function(D,x){const N=x?new ac(x.sequenceNumber,new ps(Lf(x.readTime),new i(Qu(x.documentKey)),x.largestBatchId)):ac.empty(),j=D.fields.map(([Z,ie])=>new Qd(lr.fromServerFormat(Z),ie));return new Yd(D.indexId,D.collectionGroup,j,N)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Mt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Xb(e),u=eI(e);return this.rn(e).next(d=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>fe.forEach(m,w=>{return u.put({indexId:w.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:Ff((j=r).readTime),documentKey:gs(j.documentKey.path),largestBatchId:j.largestBatchId});var j})))}updateIndexEntries(e,t){const r=new Map;return fe.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?fe.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),fe.forEach(m,w=>this.on(e,o,w).next(D=>{const x=this.un(u,w);return D.isEqual(x)?fe.resolve():this.an(e,u,w,D,x)}))))})}cn(e,t,r,o){return Kv(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return Kv(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=Kv(e);let u=new bn(Bf);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(d,m)=>{u=u.add(new Uf(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}un(e,t){let r=new bn(Bf);const o=this.Ze(t,e);if(null==o)return r;const u=xf(t);if(null!=u){const d=e.data.field(u.fieldPath);if(V(d))for(const m of d.arrayValue.values||[])r=r.add(new Uf(t.indexId,e.key,this.Je(m),o))}else r=r.add(new Uf(t.indexId,e.key,Jb,o));return r}an(e,t,r,o,u){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,D,x,N){const j=m.getIterator(),Z=w.getIterator();let ie=Dm(j),Ne=Dm(Z);for(;ie||Ne;){let Ve=!1,Tt=!1;if(ie&&Ne){const At=D(ie,Ne);At<0?Tt=!0:At>0&&(Ve=!0)}else null!=ie?Tt=!0:Ve=!0;Ve?(x(Ne),Ne=Dm(Z)):Tt?(N(ie),ie=Dm(j)):(ie=Dm(j),Ne=Dm(Z))}}(o,u,Bf,m=>{d.push(this.cn(e,t,r,m))},m=>{d.push(this.hn(e,t,r,m))}),fe.waitFor(d)}rn(e){let t=1;return eI(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>Bf(d,m)).filter((d,m,w)=>!m||0!==Bf(d,w[m-1]));const o=[];o.push(e);for(const d of r){const m=Bf(d,e),w=Bf(d,t);if(0===m)o[0]=e.ke();else if(m>0&&w<0)o.push(d),o.push(d.ke());else if(w>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,Jb,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,Jb,[]]));return u}getMinOffset(e,t){let r;return fe.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?(!r||Ix(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=ps.min()})).next(()=>r)}}function MM(n){return mi(n,"collectionParents")}function Kv(n){return mi(n,"indexEntries")}function Xb(n){return mi(n,"indexConfiguration")}function eI(n){return mi(n,"indexState")}const RM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Bs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Bs(e,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function NM(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Wt({range:d},(x,N,j)=>(m++,j.delete()));u.push(w.next(()=>{It(1===m)}));const D=[];for(const x of t.mutations){const N=gM(e,x.key.path,t.batchId);u.push(o.delete(N)),D.push(x.key)}return fe.waitFor(u).next(()=>D)}function tI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}Bs.DEFAULT_COLLECTION_PERCENTILE=10,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bs.DEFAULT=new Bs(41943040,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bs.DISABLED=new Bs(-1,0,0);class VT{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){It(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new VT(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return th(e).Wt({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Pm(e),d=th(e);return d.add({}).next(m=>{It("number"==typeof m);const w=new RT(m,t,r,o),D=function(j,Z,ie){const Ne=ie.baseMutations.map(Tt=>Gv(j.Jt,Tt)),Ve=ie.mutations.map(Tt=>Gv(j.Jt,Tt));return{userId:Z,batchId:ie.batchId,localWriteTimeMs:ie.localWriteTime.toMillis(),baseMutations:Ne,mutations:Ve}}(this.M,this.userId,w),x=[];let N=new bn((j,Z)=>Mt(j.canonicalString(),Z.canonicalString()));for(const j of o){const Z=gM(this.userId,j.key.path,m);N=N.add(j.key.path.popLast()),x.push(d.put(D)),x.push(u.put(Z,dN))}return N.forEach(j=>{x.push(this.indexManager.addToCollectionParentIndex(e,j))}),e.addOnCommittedListener(()=>{this.ln[m]=w.keys()}),fe.waitFor(x).next(()=>w)})}lookupMutationBatch(e,t){return th(e).get(t).next(r=>r?(It(r.userId===this.userId),Nm(this.M,r)):null)}fn(e,t){return this.ln[t]?fe.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return th(e).Wt({index:"userMutationsIndex",range:o},(d,m,w)=>{m.userId===this.userId&&(It(m.batchId>=r),u=Nm(this.M,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return th(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return th(e).qt("userMutationsIndex",t).next(r=>r.map(o=>Nm(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Kb(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Pm(e).Wt({range:o},(d,m,w)=>{const[D,x,N]=d,j=Qu(x);if(D===this.userId&&t.path.isEqual(j))return th(e).get(N).next(Z=>{if(!Z)throw tt();It(Z.userId===this.userId),u.push(Nm(this.M,Z))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bn(Mt);const o=[];return t.forEach(u=>{const d=Kb(this.userId,u.path),m=IDBKeyRange.lowerBound(d),w=Pm(e).Wt({range:m},(D,x,N)=>{const[j,Z,ie]=D,Ne=Qu(Z);j===this.userId&&u.path.isEqual(Ne)?r=r.add(ie):N.done()});o.push(w)}),fe.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Kb(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new bn(Mt);return Pm(e).Wt({range:d},(w,D,x)=>{const[N,j,Z]=w,ie=Qu(j);N===this.userId&&r.isPrefixOf(ie)?ie.length===o&&(m=m.add(Z)):x.done()}).next(()=>this.dn(e,m))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(th(e).get(u).next(d=>{if(null===d)throw tt();It(d.userId===this.userId),r.push(Nm(this.M,d))}))}),fe.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return NM(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),fe.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return fe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Pm(e).Wt({range:r},(u,d,m)=>{if(u[0]===this.userId){const w=Qu(u[1]);o.push(w)}else m.done()}).next(()=>{It(0===o.length)})})}containsKey(e,t){return PM(e,this.userId,t)}wn(e){return OM(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function PM(n,e,t){const r=Kb(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Pm(n).Wt({range:u,jt:!0},(m,w,D)=>{const[x,N,j]=m;x===e&&N===o&&(d=!0),D.done()}).next(()=>d)}function th(n){return mi(n,"mutations")}function Pm(n){return mi(n,"documentMutations")}function OM(n){return mi(n,"mutationQueues")}class jf{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new jf(0)}static yn(){return new jf(-1)}}class UN{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new jf(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>wt.fromTimestamp(new Fn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Om(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(It(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Om(e).Wt((d,m)=>{const w=zv(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>fe.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Om(e).Wt((r,o)=>{const u=zv(o);t(u)})}pn(e){return kM(e).get("targetGlobalKey").next(t=>(It(null!==t),t))}In(e,t){return kM(e).put("targetGlobalKey",t)}Tn(e,t){return Om(e).put(DM(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Mf(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Om(e).Wt({range:o,index:"queryTargetsIndex"},(d,m,w)=>{const D=zv(m);Pv(t,D.target)&&(u=D,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=nh(e);return t.forEach(d=>{const m=gs(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),fe.waitFor(o)}removeMatchingKeys(e,t,r){const o=nh(e);return fe.forEach(t,u=>{const d=gs(u.path);return fe.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=nh(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=nh(e);let u=an();return o.Wt({range:r,jt:!0},(d,m,w)=>{const D=Qu(d[1]),x=new i(D);u=u.add(x)}).next(()=>u)}containsKey(e,t){const r=gs(t.path),o=IDBKeyRange.bound([r],[Mv(r)],!1,!0);let u=0;return nh(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([d,m],w,D)=>{0!==d&&(u++,D.done())}).next(()=>u>0)}Et(e,t){return Om(e).get(t).next(r=>r?zv(r):null)}}function Om(n){return mi(n,"targets")}function kM(n){return mi(n,"targetGlobal")}function nh(n){return mi(n,"targetDocuments")}function $f(n){return UT.apply(this,arguments)}function UT(){return UT=(0,me.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==_M)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),UT.apply(this,arguments)}function FM([n,e],[t,r]){const o=Mt(n,t);return 0===o?Mt(e,r):o}class BN{constructor(e){this.An=e,this.buffer=new bn(FM),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();FM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class jN{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;ke("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,me.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Of(o)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield $f(o)}yield t.Sn(e)}))}}class $N{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return fe.resolve(fs.A);const r=new BN(t);return this.Dn.forEachTarget(e,o=>r.Pn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.Pn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(RM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),RM):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,d,m,w,D;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(D=Date.now(),kb()<=$a.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-x}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(D-w)+`ms\nTotal Duration: ${D-x}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class HN{constructor(e,t){this.db=e,this.garbageCollector=new $N(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return nI(e,r)}removeReference(e,t,r){return nI(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return nI(e,t)}On(e,t){return function(r,o){let u=!1;return OM(r).zt(d=>PM(r,d,o).next(m=>(m&&(u=!0),fe.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(d,m)=>{if(m<=t){const w=this.On(e,d).next(D=>{if(!D)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,wt.min()),nh(e).delete([0,gs(d.path)])))});o.push(w)}}).next(()=>fe.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return nI(e,t)}Mn(e,t){const r=nh(e);let o,u=fs.A;return r.Wt({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:D})=>{0===d?(u!==fs.A&&t(new i(Qu(o)),u),u=D,o=w):u=fs.A}).next(()=>{u!==fs.A&&t(new i(Qu(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function nI(n,e){return nh(n).put((r=n.currentSequenceNumber,{targetId:0,path:gs(e.path),sequenceNumber:r}));var r}class LM{constructor(){this.changes=new Xd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class GN{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Hf(e).put(r)}removeEntry(e,t,r){return Hf(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Qb(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=hn.newInvalidDocument(t);return Hf(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Yv(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:hn.newInvalidDocument(t)};return Hf(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Yv(t))},(o,u)=>{r={document:this.$n(t,u),size:tI(u)}}).next(()=>r)}getEntries(e,t){let r=ia();return this.Ln(e,t,(o,u)=>{const d=this.$n(o,u);r=r.insert(o,d)}).next(()=>r)}Un(e,t){let r=ia(),o=new cr(i.comparator);return this.Ln(e,t,(u,d)=>{const m=this.$n(u,d);r=r.insert(u,m),o=o.insert(u,tI(d))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return fe.resolve();let o=new bn(BM);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(Yv(o.first()),Yv(o.last())),d=o.getIterator();let m=d.getNext();return Hf(e).Wt({index:"documentKeyIndex",range:u},(w,D,x)=>{const N=i.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;m&&BM(m,N)<0;)r(m,null),m=d.getNext();m&&m.isEqual(N)&&(r(m,D),m=d.hasNext()?d.getNext():null),m?x.Ut(Yv(m)):x.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Qb(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hf(e).qt(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=ia();for(const w of d){const D=this.$n(i.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(D.key,D)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=ia();const d=UM(t,r),m=UM(t,ps.max());return Hf(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,D,x)=>{const N=this.$n(i.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(N.key,N),u.size===o&&x.done()}).next(()=>u)}newChangeBuffer(e){return new qN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return VM(e).get("remoteDocumentGlobalKey").next(t=>(It(!!t),t))}Fn(e,t){return VM(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function MN(n,e){let t;if(e.document)t=aM(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=i.fromSegments(e.noDocument.path),o=Lf(e.noDocument.readTime);t=hn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const r=i.fromSegments(e.unknownDocument.path),o=Lf(e.unknownDocument.version);t=hn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Fn(r[0],r[1]);return wt.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(wt.min()))return r}return hn.newInvalidDocument(e)}}class qN extends LM{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Xd(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new bn((u,d)=>Mt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const w=IM(this.Kn.M,d);o=o.add(u.path.popLast()),r+=tI(w)-m.size,t.push(this.Kn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=IM(this.Kn.M,d.convertToNoDocument(wt.min()));t.push(this.Kn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),fe.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,d)=>{this.Gn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function VM(n){return mi(n,"remoteDocumentGlobal")}function Hf(n){return mi(n,"remoteDocumentsV14")}function Yv(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function UM(n,e){const t=e.documentKey.path.toArray();return[n,Qb(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function BM(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Mt(t[u],r[u]),o)return o;return o=Mt(t.length,r.length),o||(o=Mt(t[t.length-2],r[r.length-2]),o||Mt(t[t.length-1],r[r.length-1]))}class zN{constructor(e){this.M=e}kt(e,t,r,o){const u=new Yb("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pM,{unique:!0}),m.createObjectStore("documentMutations"),jM(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=fe.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),jM(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:wt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",D)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").qt().next(D=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pM,{unique:!0});const x=w.store("mutations"),N=D.map(j=>x.put(j));return fe.waitFor(N)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Qn(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(d=d.next(()=>this.Wn(u))),r<8&&o>=8&&(d=d.next(()=>this.zn(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Hn(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:IN});w.createIndex("collectionPathOverlayIndex",DN,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",CN,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:hN});w.createIndex("documentKeyIndex",fN),w.createIndex("collectionGroupIndex",pN)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:vN}).createIndex("sequenceNumberIndex",wN,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:EN}).createIndex("documentKeyIndex",bN,{unique:!1})}(e)})),d}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=tI(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>fe.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(m=>fe.forEach(m,w=>{It(w.userId===u.userId);const D=Nm(this.M,w);return NM(e,u.userId,D).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((d,m)=>{const w=new Gt(d),D=[0,gs(w)];u.push(t.get(D).next(x=>x?fe.resolve():t.put({targetId:0,path:gs(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>fe.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:_N});const r=t.store("collectionParents"),o=new LT,u=d=>{if(o.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:gs(w)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,m)=>{const w=new Gt(d);return u(w.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,m,w],D)=>{const x=Qu(m);return u(x.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=zv(o),d=DM(this.M,u);return t.put(d)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,d)=>{const m=t.store("remoteDocumentsV14"),w=(D=d,D.document?new i(Gt.fromString(D.document.name).popFirst(5)):D.noDocument?i.fromSegments(D.noDocument.path):D.unknownDocument?i.fromSegments(D.unknownDocument.path):tt()).path.toArray();var D;const x={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(x))}).next(()=>fe.waitFor(o))}}function jM(n){n.createObjectStore("targetDocuments",{keyPath:mN}).createIndex("documentTargetsIndex",yN,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gN,{unique:!0}),n.createObjectStore("targetGlobal")}const BT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class jT{constructor(e,t,r,o,u,d,m,w,D,x,N=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=d,this.document=m,this.Xn=D,this.Zn=x,this.ts=N,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=j=>Promise.resolve(),!jT.vt())throw new Se(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new HN(this,o),this.hs=t+"main",this.M=new bM(w),this.ls=new Za(this.hs,this.ts,new zN(this.M)),this.fs=new UN(this.referenceDelegate,this.M),this.ds=new GN(this.M),this._s=new RN,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===x&&ur("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Se(le.FAILED_PRECONDITION,BT);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new fs(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,me.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Of(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Qv(e).get("owner").next(t=>fe.resolve(this.Ps(t)))}Vs(e){return rI(e).delete(this.clientId)}vs(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=mi(r,"clientMetadata");return o.qt().next(u=>{const d=e.Ds(u,18e5),m=u.filter(w=>-1===d.indexOf(w));return fe.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?fe.resolve(!0):Qv(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Se(le.FAILED_PRECONDITION,BT);return!1}}return!(!this.networkEnabled||!this.inForeground)||rI(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new EM(t,fs.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>rI(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return VT.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new VN(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return FT.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(d=this.ts)?AN:13===d?yM:12===d?TN:11===d?mM:void tt();var d;let m;return this.ls.runTransaction(e,o,u,w=>(m=new EM(w,this.es?this.es.next():fs.A),"readwrite-primary"===t?this.Es(m).next(D=>!!D||this.As(m)).next(D=>{if(!D)throw ur(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Se(le.FAILED_PRECONDITION,_M);return r(m)}).next(D=>this.bs(m).next(()=>D)):this.$s(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}$s(e){return Qv(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Se(le.FAILED_PRECONDITION,BT)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qv(e).put("owner",t)}static vt(){return Za.vt()}Rs(e){const t=Qv(e);return t.get("owner").next(r=>this.Ps(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):fe.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(ur(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,bt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ur("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){ur("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qv(n){return mi(n,"owner")}function rI(n){return mi(n,"clientMetadata")}function $T(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class WN{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return i.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):ET(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new i(t)).next(r=>{let o=TT();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=TT();return this.indexManager.getCollectionParents(e,o).next(d=>fe.forEach(d,m=>{const w=(D=t,x=m.child(o),new uc(x,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,x;return this.zs(e,w,r).next(D=>{D.forEach((x,N)=>{u=u.insert(x,N)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const d of u)for(const m of d.mutations){const w=m.key;let D=o.get(w);null==D&&(D=hn.newInvalidDocument(w),o=o.insert(w,D)),DT(m,D,d.localWriteTime),D.isFoundDocument()||(o=o.remove(w))}}).next(()=>(o.forEach((u,d)=>{IT(t,d)||(o=o.remove(u))}),o))}}class HT{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=an(),o=an();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new HT(e,t.fromCache,r,o)}}class $M{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,o){return this.ti(e,t).next(u=>u||this.ei(e,t,o,r)).next(u=>u||this.ni(e,t))}ti(e,t){return fe.resolve(null)}ei(e,t,r,o){return function F1(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||o.isEqual(wt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const d=this.si(t,u);return this.ii(t,d,r,o)?this.ni(e,t):(kb()<=$a.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),bT(t)),this.ri(e,d,t,Im(o,-1)))})}si(e,t){let r=new bn(kx(e));return t.forEach((o,u)=>{IT(e,u)&&(r=r.add(u))}),r}ii(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ni(e,t){return kb()<=$a.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",bT(t)),this.Zs.Qs(e,t,ps.min())}ri(e,t,r,o){return this.Zs.Qs(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class ZN{constructor(e,t,r,o){this.persistence=e,this.oi=t,this.M=o,this.ui=new cr(Mt),this.ai=new Xd(u=>Mf(u),Pv),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new WN(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function HM(n,e,t,r){return new ZN(n,e,t,r)}function GM(n,e){return GT.apply(this,arguments)}function GT(){return GT=(0,me.Z)(function*(n,e){const t=$e(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let w=an();for(const D of o){d.push(D.batchId);for(const x of D.mutations)w=w.add(x.key)}for(const D of u){m.push(D.batchId);for(const x of D.mutations)w=w.add(x.key)}return t.fi.Ks(r,w).next(D=>({di:D,removedBatchIds:d,addedBatchIds:m}))})})}),GT.apply(this,arguments)}function KN(n,e){const t=$e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(d,m,w,D){const x=w.batch,N=x.keys();let j=fe.resolve();return N.forEach(Z=>{j=j.next(()=>D.getEntry(m,Z)).next(ie=>{const Ne=w.docVersions.get(Z);It(null!==Ne),ie.version.compareTo(Ne)<0&&(x.applyToRemoteDocument(ie,w),ie.isValidDocument()&&(ie.setReadTime(w.commitVersion),D.addEntry(ie)))})}),j.next(()=>d.Bs.removeMutationBatch(m,x))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,o))})}function qM(n){const e=$e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function YN(n,e){const t=$e(n),r=e.snapshotVersion;let o=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.hi.newChangeBuffer({trackRemovals:!0});o=t.ui;const m=[];e.targetChanges.forEach((D,x)=>{const N=o.get(x);if(!N)return;m.push(t.fs.removeMatchingKeys(u,D.removedDocuments,x).next(()=>t.fs.addMatchingKeys(u,D.addedDocuments,x)));let j=N.withSequenceNumber(u.currentSequenceNumber);var Z,ie,Ne;e.targetMismatches.has(x)?j=j.withResumeToken(Ir.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):D.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(D.resumeToken,r)),o=o.insert(x,j),ie=j,Ne=D,(0===(Z=N).resumeToken.approximateByteSize()||ie.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||Ne.addedDocuments.size+Ne.modifiedDocuments.size+Ne.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(u,j))});let w=ia();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,D))}),m.push(zM(u,d,e.documentUpdates).next(D=>{w=D})),!r.isEqual(wt.min())){const D=t.fs.getLastRemoteSnapshotVersion(u).next(x=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(D)}return fe.waitFor(m).next(()=>d.apply(u)).next(()=>t.fi.Gs(u,w)).next(()=>w)}).then(u=>(t.ui=o,u))}function zM(n,e,t){let r=an();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=ia();return t.forEach((d,m)=>{const w=o.get(d);m.isNoDocument()&&m.version.isEqual(wt.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):ke("LocalStore","Ignoring outdated watch update for ",d,". Current version:",w.version," Watch version:",m.version)}),u})}function QN(n,e){const t=$e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function km(n,e){const t=$e(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,fe.resolve(o)):t.fs.allocateTargetId(r).next(d=>(o=new eh(e,d,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function Fm(n,e,t){return qT.apply(this,arguments)}function qT(){return qT=(0,me.Z)(function*(n,e,t){const r=$e(n),o=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Of(d))throw d;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ui=r.ui.remove(e),r.ai.delete(o.target)}),qT.apply(this,arguments)}function iI(n,e,t){const r=$e(n);let o=wt.min(),u=an();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,D){const x=$e(m),N=x.ai.get(D);return void 0!==N?fe.resolve(x.ui.get(N)):x.fs.getTargetData(w,D)}(r,d,ra(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{u=w})}).next(()=>r.oi.Qs(d,e,t?o:wt.min(),t?u:an())).next(m=>(KM(r,Ox(e),m),{documents:m,_i:u})))}function WM(n,e){const t=$e(n),r=$e(t.fs),o=t.ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(d=>d?d.target:null))}function ZM(n,e){const t=$e(n),r=t.ci.get(e)||wt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.hi.getAllFromCollectionGroup(o,e,Im(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(KM(t,e,o),o))}function KM(n,e,t){let r=wt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function zT(){return zT=(0,me.Z)(function*(n,e,t,r){const o=$e(n);let u=an(),d=ia();for(const D of t){const x=e.wi(D.metadata.name);D.document&&(u=u.add(x));const N=e.mi(D);N.setReadTime(e.gi(D.metadata.readTime)),d=d.insert(x,N)}const m=o.hi.newChangeBuffer({trackRemovals:!0}),w=yield km(o,(D=r,ra(Tm(Gt.fromString(`__bundle__/docs/${D}`)))));var D;return o.persistence.runTransaction("Apply bundle documents","readwrite",D=>zM(D,m,d).next(x=>(m.apply(D),x)).next(x=>o.fs.removeMatchingKeysForTargetId(D,w.targetId).next(()=>o.fs.addMatchingKeys(D,u,w.targetId)).next(()=>o.fi.Gs(D,x)).next(()=>x)))}),zT.apply(this,arguments)}function XN(n,e){return WT.apply(this,arguments)}function WT(){return WT=(0,me.Z)(function*(n,e,t=an()){const r=yield km(n,ra(OT(e.bundledQuery))),o=$e(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=gi(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o._s.saveNamedQuery(u,e);const m=r.withResumeToken(Ir.EMPTY_BYTE_STRING,d);return o.ui=o.ui.insert(m.targetId,m),o.fs.updateTargetData(u,m).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})}),WT.apply(this,arguments)}class eP{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return fe.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:gi(r.createTime)}),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:OT(r.bundledQuery),readTime:gi(r.readTime)}),fe.resolve();var r}}class tP{constructor(){this.overlays=new cr(i.comparator),this.Ii=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),fe.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ii.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const o=Vv(),u=t.length+1,d=new i(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,D=w.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return fe.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new cr((D,x)=>D-x);const d=this.overlays.getIterator();for(;d.hasNext();){const D=d.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let x=u.get(D.largestBatchId);null===x&&(x=Vv(),u=u.insert(D.largestBatchId,x)),x.set(D.getKey(),D)}}const m=Vv(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((D,x)=>m.set(D,x)),!(m.size()>=o)););return fe.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const d=this.Ii.get(o.largestBatchId).delete(r.key);this.Ii.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new PT(t,r));let u=this.Ii.get(t);void 0===u&&(u=an(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class ZT{constructor(){this.Ti=new bn(yi.Ei),this.Ai=new bn(yi.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new yi(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new yi(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new i(new Gt([])),r=new yi(t,e),o=new yi(t,e+1),u=[];return this.Ai.forEachInRange([r,o],d=>{this.Pi(d),u.push(d.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new i(new Gt([])),r=new yi(t,e),o=new yi(t,e+1);let u=an();return this.Ai.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new yi(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class yi{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return i.comparator(e.key,t.key)||Mt(e.Ci,t.Ci)}static Ri(e,t){return Mt(e.Ci,t.Ci)||i.comparator(e.key,t.key)}}class nP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new bn(yi.Ei)}checkEmpty(e){return fe.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.xi;this.xi++;const d=new RT(u,t,r,o);this.Bs.push(d);for(const m of o)this.Ni=this.Ni.add(new yi(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return fe.resolve(d)}lookupMutationBatch(e,t){return fe.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Mi(t+1),u=o<0?0:o;return fe.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return fe.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new yi(t,0),o=new yi(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,o],d=>{const m=this.ki(d.Ci);u.push(m)}),fe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bn(Mt);return t.forEach(o=>{const u=new yi(o,0),d=new yi(o,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,d],m=>{r=r.add(m.Ci)})}),fe.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;i.isDocumentKey(u)||(u=u.child(""));const d=new yi(new i(u),0);let m=new bn(Mt);return this.Ni.forEachWhile(w=>{const D=w.key.path;return!!r.isPrefixOf(D)&&(D.length===o&&(m=m.add(w.Ci)),!0)},d),fe.resolve(this.Oi(m))}Oi(e){const t=[];return e.forEach(r=>{const o=this.ki(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){It(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return fe.forEach(t.mutations,o=>{const u=new yi(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new yi(t,0),o=this.Ni.firstAfterOrEqual(r);return fe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return fe.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class rP{constructor(e){this.$i=e,this.docs=new cr(i.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():hn.newInvalidDocument(t))}getEntries(e,t){let r=ia();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():hn.newInvalidDocument(o))}),fe.resolve(r)}getAllFromCollection(e,t,r){let o=ia();const u=new i(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||Ix(Nv(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return fe.resolve(o)}getAllFromCollectionGroup(e,t,r,o){tt()}Bi(e,t){return fe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new iP(this)}getSize(e){return fe.resolve(this.size)}}class iP extends LM{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),fe.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class sP{constructor(e){this.persistence=e,this.Li=new Xd(t=>Mf(t),Pv),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new ZT,this.targetCount=0,this.Ki=jf.gn()}forEachTarget(e,t){return this.Li.forEach((r,o)=>t(o)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),fe.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new jf(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.Tn(t),fe.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Li.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Li.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),fe.waitFor(u).next(()=>o)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),fe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this.qi.containsKey(t))}}class oP{constructor(e,t){this.Gi={},this.overlays={},this.es=new fs(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new sP(this),this.indexManager=new LN,this.ds=new rP(r=>this.referenceDelegate.Qi(r)),this.M=new bM(t),this._s=new eP(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new nP(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const o=new aP(this.es.next());return this.referenceDelegate.ji(),r(o).next(u=>this.referenceDelegate.Wi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}zi(e,t){return fe.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class aP extends vM{constructor(e){super(),this.currentSequenceNumber=e}}class KT{constructor(e){this.persistence=e,this.Hi=new ZT,this.Ji=null}static Yi(e){return new KT(e)}get Xi(){if(this.Ji)return this.Ji;throw tt()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(o=>this.Xi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.Xi,r=>{const o=i.fromPath(r);return this.Zi(e,o).next(u=>{u||t.removeEntry(o,wt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return fe.or([()=>fe.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function YM(n,e){return`firestore_clients_${n}_${e}`}function QM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function YT(n,e){return`firestore_targets_${n}_${e}`}class sI{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static tr(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Se(o.error.code,o.error.message))),d?new sI(e,t,o.state,u):(ur("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jv{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Se(r.error.code,r.error.message))),u?new Jv(e,r.state,o):(ur("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class oI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Wb();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=_T(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new oI(e,u):(ur("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class QT{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new QT(t.clientId,t.onlineState):(ur("SharedClientState",`Failed to parse online state: ${e}`),null)}}class JT{constructor(){this.activeTargetIds=Wb()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XT{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new cr(Mt),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=YM(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new JT),this.dr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.ir)continue;const u=e.getItem(YM(e.persistenceKey,o));if(u){const d=oI.tr(o,u);d&&(e.ar=e.ar.insert(d.clientId,d))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const o=e.pr(r);o&&e.Ir(o)}for(const o of e.cr)e.ur(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(YT(this.persistenceKey,e));if(r){const o=Jv.tr(e,r);o&&(t=o.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(YT(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ar(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void ur("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Sr(o,null)}{const o=t.Dr(r.key,r.newValue);if(o)return t.Sr(o.clientId,o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Cr(r.key,r.newValue);if(o)return t.Nr(o)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const o=t.kr(r.key,r.newValue);if(o)return t.Mr(o)}}else if(r.key===t.mr){if(null!==r.newValue){const o=t.pr(r.newValue);if(o)return t.Ir(o)}}else if(r.key===t.lr){const o=function(u){let d=fs.A;if(null!=u)try{const m=JSON.parse(u);It("number"==typeof m),d=m}catch(m){ur("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==fs.A&&t.sequenceNumberHandler(o)}else if(r.key===t.gr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const o=new sI(this.currentUser,e,t,r),u=QM(this.persistenceKey,this.currentUser,e);this.setItem(u,o.er())}Ar(e){const t=QM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const o=YT(this.persistenceKey,e),u=new Jv(e,t,r);this.setItem(o,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return oI.tr(r,t)}Cr(e,t){const r=this._r.exec(e),o=Number(r[1]);return sI.tr(new Hr(void 0!==r[2]?r[2]:null),o,t)}kr(e,t){const r=this.wr.exec(e),o=Number(r[1]);return Jv.tr(o,t)}pr(e){return QT.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),o=this.Tr(this.ar),u=this.Tr(r),d=[],m=[];return u.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Lr(d,m).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Wb();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class JM{constructor(){this.Ur=new JT,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new JT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class uP{Kr(e){}shutdown(){}}class XM{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const lP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class cP{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class dP extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const d=this.ho(e,t);ke("RestConnection","Sending: ",d,r);const m={};return this.lo(m,o,u),this.fo(e,d,m,r).then(w=>(ke("RestConnection","Received: ",w),w),w=>{throw Sf("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}_o(e,t,r,o,u){return this.co(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+zd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.uo}/v1/${t}:${lP[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,d)=>{const m=new Pb;m.listenOnce(Rb.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case mm.NO_ERROR:const D=m.getResponseJson();ke("Connection","XHR received:",JSON.stringify(D)),u(D);break;case mm.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),d(new Se(le.DEADLINE_EXCEEDED,"Request time out"));break;case mm.HTTP_ERROR:const x=m.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',x,"response text:",m.getResponseText()),x>0){const N=m.getResponseJson().error;if(N&&N.status&&N.message){const j=function(Z){const ie=Z.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(ie)>=0?ie:le.UNKNOWN}(N.status);d(new Se(j,N.message))}else d(new Se(le.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Se(le.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}wo(e,t,r){const o=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Mb(),d=cT(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new yx({})),this.lo(m.initMessageHeaders,t,r),(0,bt.uI)()||(0,bt.b$)()||(0,bt.d)()||(0,bt.w1)()||(0,bt.Mn)()||(0,bt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");ke("Connection","Creating WebChannel: "+w,m);const D=u.createWebChannel(w,m);let x=!1,N=!1;const j=new cP({Jr:ie=>{N?ke("Connection","Not sending because WebChannel is closed:",ie):(x||(ke("Connection","Opening WebChannel transport."),D.open(),x=!0),ke("Connection","WebChannel sending:",ie),D.send(ie))},Yr:()=>D.close()}),Z=(ie,Ne,Ve)=>{ie.listen(Ne,Tt=>{try{Ve(Tt)}catch(At){setTimeout(()=>{throw At},0)}})};return Z(D,Av.EventType.OPEN,()=>{N||ke("Connection","WebChannel transport opened.")}),Z(D,Av.EventType.CLOSE,()=>{N||(N=!0,ke("Connection","WebChannel transport closed"),j.ro())}),Z(D,Av.EventType.ERROR,ie=>{N||(N=!0,Sf("Connection","WebChannel transport errored:",ie),j.ro(new Se(le.UNAVAILABLE,"The operation could not be completed")))}),Z(D,Av.EventType.MESSAGE,ie=>{var Ne;if(!N){const Ve=ie.data[0];It(!!Ve);const Tt=Ve,At=Tt.error||(null===(Ne=Tt[0])||void 0===Ne?void 0:Ne.error);if(At){ke("Connection","WebChannel received error:",At);const mt=At.status;let it=function($t){const Ar=Cr[$t];if(void 0!==Ar)return Yx(Ar)}(mt),xt=At.message;void 0===it&&(it=le.INTERNAL,xt="Unknown error status: "+mt+" with message "+At.message),N=!0,j.ro(new Se(it,xt)),D.close()}else ke("Connection","WebChannel received:",Ve),j.oo(Ve)}}),Z(d,dT.STAT_EVENT,ie=>{ie.stat===Nb.PROXY?ke("Connection","Detected buffering proxy"):ie.stat===Nb.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{j.io()},0),j}}function eR(){return"undefined"!=typeof window?window:null}function aI(){return"undefined"!=typeof document?document:null}function Xv(n){return new X1(n,!0)}class eA{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&ke("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class tR{constructor(e,t,r,o,u,d,m,w){this.Yn=e,this.Vo=r,this.vo=o,this.So=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new eA(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,me.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,me.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(ur(t.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Do===t&&this.Qo(r,o)},r=>{e(()=>{const o=new Se(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(o)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(o=>{r(()=>this.jo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.No.Ro((0,me.Z)(function*(){e.state=0,e.start()}))}jo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hP extends tR{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function nN(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:tt(),o=e.targetChange.targetIds||[],u=function(w,D){return w.N?(It(void 0===D||"string"==typeof D),Ir.fromBase64String(D||"")):(It(void 0===D||D instanceof Uint8Array),Ir.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const D=void 0===w.code?le.UNKNOWN:Yx(w.code);return new Se(D,w.message||"")}(d);t=new Jx(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Yu(n,r.document.name),u=gi(r.document.updateTime),d=new on({mapValue:{fields:r.document.fields}}),m=hn.newFoundDocument(o,u,d);t=new Zb(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=Yu(n,r.document),u=r.readTime?gi(r.readTime):wt.min(),d=hn.newNoDocument(o,u);t=new Zb([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Yu(n,r.document);t=new Zb([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return tt();{const r=e.filter,u=new G1(r.count||0);t=new Qx(r.targetId,u)}}var w;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return wt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?wt.min():u.readTime?gi(u.readTime):wt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Hv(this.M),t.addTarget=function(o,u){let d;const m=u.target;return d=$b(m)?{documents:uM(o,m)}:{query:lM(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=nM(o,u.resumeToken):u.snapshotVersion.compareTo(wt.min())>0&&(d.readTime=jv(o,u.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function iN(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Hv(this.M),t.removeTarget=e,this.Lo(t)}}class fP extends tR{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(It(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function rN(n,e){return n&&n.length>0?(It(void 0!==e),n.map(t=>function(r,o){let u=gi(r.updateTime?r.updateTime:o);return u.isEqual(wt.min())&&(u=gi(o)),new j1(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=gi(e.commitTime);return this.listener.tu(r,t)}return It(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Hv(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Gv(this.M,r))};this.Lo(t)}}class pP extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=o,this.su=!1}iu(){if(this.su)throw new Se(le.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(le.UNKNOWN,o.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So._o(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(le.UNKNOWN,o.toString())})}terminate(){this.su=!0}}class gP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(ur(t),this.uu=!1):ke("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class mP{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(m=>{r.enqueueAndForget((0,me.Z)(function*(){var w;rh(d)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,me.Z)(function*(D){const x=$e(D);x.wu.add(4),yield Lm(x),x.yu.set("Unknown"),x.wu.delete(4),yield e0(x)}),function(D){return w.apply(this,arguments)})(d))}))}),this.yu=new gP(r,o)}}function e0(n){return tA.apply(this,arguments)}function tA(){return tA=(0,me.Z)(function*(n){if(rh(n))for(const e of n.mu)yield e(!0)}),tA.apply(this,arguments)}function Lm(n){return nA.apply(this,arguments)}function nA(){return nA=(0,me.Z)(function*(n){for(const e of n.mu)yield e(!1)}),nA.apply(this,arguments)}function uI(n,e){const t=$e(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),sA(t)?iA(t):Um(t).Mo()&&rA(t,e))}function t0(n,e){const t=$e(n),r=Um(t);t._u.delete(e),r.Mo()&&nR(t,e),0===t._u.size&&(r.Mo()?r.$o():rh(t)&&t.yu.set("Unknown"))}function rA(n,e){n.pu.Z(e.targetId),Um(n).Ho(e)}function nR(n,e){n.pu.Z(e),Um(n).Jo(e)}function iA(n){n.pu=new Y1({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),Um(n).start(),n.yu.au()}function sA(n){return rh(n)&&!Um(n).ko()&&n._u.size>0}function rh(n){return 0===$e(n).wu.size}function rR(n){n.pu=void 0}function yP(n){return oA.apply(this,arguments)}function oA(){return oA=(0,me.Z)(function*(n){n._u.forEach((e,t)=>{rA(n,e)})}),oA.apply(this,arguments)}function _P(n,e){return aA.apply(this,arguments)}function aA(){return aA=(0,me.Z)(function*(n,e){rR(n),sA(n)?(n.yu.lu(e),iA(n)):n.yu.set("Unknown")}),aA.apply(this,arguments)}function vP(n,e,t){return uA.apply(this,arguments)}function uA(){return uA=(0,me.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof Jx&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o._u.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o._u.delete(m),o.pu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield lI(n,r)}else if(e instanceof Zb?n.pu.ut(e):e instanceof Qx?n.pu._t(e):n.pu.ht(e),!t.isEqual(wt.min()))try{const r=yield qM(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.pu.yt(u);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const D=o._u.get(w);D&&o._u.set(w,D.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const w=o._u.get(m);if(!w)return;o._u.set(m,w.withResumeToken(Ir.EMPTY_BYTE_STRING,w.snapshotVersion)),nR(o,m);const D=new eh(w.target,m,1,w.sequenceNumber);rA(o,D)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield lI(n,r)}var r}),uA.apply(this,arguments)}function lI(n,e,t){return lA.apply(this,arguments)}function lA(){return lA=(0,me.Z)(function*(n,e,t){if(!Of(e))throw e;n.wu.add(1),yield Lm(n),n.yu.set("Offline"),t||(t=()=>qM(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield e0(n)}))}),lA.apply(this,arguments)}function iR(n,e){return e().catch(t=>lI(n,t,e))}function Vm(n){return cA.apply(this,arguments)}function cA(){return cA=(0,me.Z)(function*(n){const e=$e(n),t=ih(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;wP(e);)try{const o=yield QN(e.localStore,r);if(null===o){0===e.du.length&&t.$o();break}r=o.batchId,EP(e,o)}catch(o){yield lI(e,o)}sR(e)&&oR(e)}),cA.apply(this,arguments)}function wP(n){return rh(n)&&n.du.length<10}function EP(n,e){n.du.push(e);const t=ih(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function sR(n){return rh(n)&&!ih(n).ko()&&n.du.length>0}function oR(n){ih(n).start()}function bP(n){return dA.apply(this,arguments)}function dA(){return dA=(0,me.Z)(function*(n){ih(n).nu()}),dA.apply(this,arguments)}function IP(n){return hA.apply(this,arguments)}function hA(){return hA=(0,me.Z)(function*(n){const e=ih(n);for(const t of n.du)e.Zo(t.mutations)}),hA.apply(this,arguments)}function DP(n,e,t){return fA.apply(this,arguments)}function fA(){return fA=(0,me.Z)(function*(n,e,t){const r=n.du.shift(),o=NT.from(r,e,t);yield iR(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Vm(n)}),fA.apply(this,arguments)}function CP(n,e){return pA.apply(this,arguments)}function pA(){return pA=(0,me.Z)(function*(n,e){var t;e&&ih(n).Xo&&(yield(t=(0,me.Z)(function*(r,o){if(Kx(u=o.code)&&u!==le.ABORTED){const d=r.du.shift();ih(r).Fo(),yield iR(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield Vm(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),sR(n)&&oR(n)}),pA.apply(this,arguments)}function aR(n,e){return gA.apply(this,arguments)}function gA(){return gA=(0,me.Z)(function*(n,e){const t=$e(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=rh(t);t.wu.add(3),yield Lm(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield e0(t)}),gA.apply(this,arguments)}function mA(n,e){return yA.apply(this,arguments)}function yA(){return yA=(0,me.Z)(function*(n,e){const t=$e(n);e?(t.wu.delete(2),yield e0(t)):e||(t.wu.add(2),yield Lm(t),t.yu.set("Unknown"))}),yA.apply(this,arguments)}function Um(n){return n.Iu||(n.Iu=function(e,t,r){const o=$e(e);return o.iu(),new hP(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:yP.bind(null,n),eo:_P.bind(null,n),zo:vP.bind(null,n)}),n.mu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Iu.Fo(),sA(n)?iA(n):n.yu.set("Unknown")):(yield n.Iu.stop(),rR(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function ih(n){return n.Tu||(n.Tu=function(e,t,r){const o=$e(e);return o.iu(),new fP(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:bP.bind(null,n),eo:CP.bind(null,n),eu:IP.bind(null,n),tu:DP.bind(null,n)}),n.mu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Tu.Fo(),yield Vm(n)):(yield n.Tu.stop(),n.du.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class _A{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new _A(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Se(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bm(n,e){if(ur("AsyncQueue",`${e}: ${n}`),Of(n))return new Se(le.UNAVAILABLE,`${e}: ${n}`);throw n}class jm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||i.comparator(t.key,r.key):(t,r)=>i.comparator(t.key,r.key),this.keyedMap=TT(),this.sortedSet=new cr(this.comparator)}static emptySet(e){return new jm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof jm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new jm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class uR{constructor(){this.Eu=new cr(i.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):tt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class $m{constructor(e,t,r,o,u,d,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new $m(e,t,jm.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ov(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class TP{constructor(){this.Ru=void 0,this.listeners=[]}}class AP{constructor(){this.queries=new Xd(e=>Px(e),Ov),this.onlineState="Unknown",this.bu=new Set}}function vA(n,e){return wA.apply(this,arguments)}function wA(){return wA=(0,me.Z)(function*(n,e){const t=$e(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new TP),o)try{u.Ru=yield t.onListen(r)}catch(d){const m=Bm(d,`Initialization of query '${bT(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&IA(t)}),wA.apply(this,arguments)}function EA(n,e){return bA.apply(this,arguments)}function bA(){return bA=(0,me.Z)(function*(n,e){const t=$e(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),bA.apply(this,arguments)}function SP(n,e){const t=$e(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Vu(o)&&(r=!0);d.Ru=o}}r&&IA(t)}function xP(n,e,t){const r=$e(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function IA(n){n.bu.forEach(e=>{e.next()})}class DA{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new $m(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=$m.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class MP{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class lR{constructor(e){this.M=e}wi(e){return Yu(this.M,e)}mi(e){return e.metadata.exists?aM(this.M,e.document,!1):hn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return gi(e)}}class RP{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=cR(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Gt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new lR(this.M);for(const o of e)if(o.metadata.queries){const u=r.wi(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||an()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function JN(n,e,t,r){return zT.apply(this,arguments)}(e.localStore,new lR(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const o of e.queries)yield XN(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function cR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class dR{constructor(e){this.key=e}}class hR{constructor(e){this.key=e}}class fR{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=an(),this.mutatedKeys=an(),this.Gu=kx(e),this.Qu=new jm(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new uR,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,D="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((x,N)=>{const j=o.get(x),Z=IT(this.query,N)?N:null,ie=!!j&&this.mutatedKeys.has(j.key),Ne=!!Z&&(Z.hasLocalMutations||this.mutatedKeys.has(Z.key)&&Z.hasCommittedMutations);let Ve=!1;j&&Z?j.data.isEqual(Z.data)?ie!==Ne&&(r.track({type:3,doc:Z}),Ve=!0):this.Hu(j,Z)||(r.track({type:2,doc:Z}),Ve=!0,(w&&this.Gu(Z,w)>0||D&&this.Gu(Z,D)<0)&&(m=!0)):!j&&Z?(r.track({type:0,doc:Z}),Ve=!0):j&&!Z&&(r.track({type:1,doc:j}),Ve=!0,(w||D)&&(m=!0)),Ve&&(Z?(d=d.add(Z),u=Ne?u.add(x):u.delete(x)):(d=d.delete(x),u=u.delete(x)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const x="F"===this.query.limitType?d.last():d.first();d=d.delete(x.key),u=u.delete(x.key),r.track({type:1,doc:x})}return{Qu:d,zu:r,ii:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((D,x)=>function(N,j){const Z=ie=>{switch(ie){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return Z(N)-Z(j)}(D.type,x.type)||this.Gu(D.doc,x.doc)),this.Ju(r);const d=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,w=m!==this.qu;return this.qu=m,0!==u.length||w?{snapshot:new $m(this.query,e.Qu,o,u,e.mutatedKeys,0===m,w,!1),Xu:d}:{Xu:d}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new uR,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=an(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new hR(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new dR(r))}),t}ta(e){this.Uu=e._i,this.Ku=an();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return $m.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class NP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class PP{constructor(e){this.key=e,this.na=!1}}class OP{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sa={},this.ia=new Xd(m=>Px(m),Ov),this.ra=new Map,this.oa=new Set,this.ua=new cr(i.comparator),this.aa=new Map,this.ca=new ZT,this.ha={},this.la=new Map,this.fa=jf.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function kP(n,e){return CA.apply(this,arguments)}function CA(){return CA=(0,me.Z)(function*(n,e){const t=ZA(n);let r,o;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ea();else{const d=yield km(t.localStore,ra(e));t.isPrimaryClient&&uI(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield TA(t,e,r,"current"===m)}return o}),CA.apply(this,arguments)}function TA(n,e,t,r){return AA.apply(this,arguments)}function AA(){return AA=(0,me.Z)(function*(n,e,t,r){n._a=(x,N,j)=>{return(Z=(0,me.Z)(function*(ie,Ne,Ve,Tt){let At=Ne.view.Wu(Ve);At.ii&&(At=yield iI(ie.localStore,Ne.query,!1).then(({documents:xt})=>Ne.view.Wu(xt,At)));const mt=Tt&&Tt.targetChanges.get(Ne.targetId),it=Ne.view.applyChanges(At,ie.isPrimaryClient,mt);return LA(ie,Ne.targetId,it.Xu),it.snapshot}),function(ie,Ne,Ve,Tt){return Z.apply(this,arguments)})(n,x,N,j);var Z};const o=yield iI(n.localStore,e,!0),u=new fR(e,o._i),d=u.Wu(o.documents),m=Bv.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(d,n.isPrimaryClient,m);LA(n,t,w.Xu);const D=new NP(e,t,u);return n.ia.set(e,D),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),w.snapshot}),AA.apply(this,arguments)}function FP(n,e){return SA.apply(this,arguments)}function SA(){return SA=(0,me.Z)(function*(n,e){const t=$e(n),r=t.ia.get(e),o=t.ra.get(r.targetId);if(o.length>1)return t.ra.set(r.targetId,o.filter(u=>!Ov(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Fm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),t0(t.remoteStore,r.targetId),Hm(t,r.targetId)}).catch($f))):(Hm(t,r.targetId),yield Fm(t.localStore,r.targetId,!0))}),SA.apply(this,arguments)}function xA(){return xA=(0,me.Z)(function*(n,e,t){const r=KA(n);try{const o=yield function(u,d){const m=$e(u),w=Fn.now(),D=d.reduce((N,j)=>N.add(j.key),an());let x;return m.persistence.runTransaction("Locally write mutations","readwrite",N=>m.fi.Ks(N,D).next(j=>{x=j;const Z=[];for(const ie of d){const Ne=H1(ie,x.get(ie.key));null!=Ne&&Z.push(new Pf(ie.key,Ne,Ku(Ne.value.mapValue),Dr.exists(!0)))}return m.Bs.addMutationBatch(N,w,Z,d)})).then(N=>(N.applyToLocalDocumentSet(x),{batchId:N.batchId,changes:x}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let w=u.ha[u.currentUser.toKey()];w||(w=new cr(Mt)),w=w.insert(d,m),u.ha[u.currentUser.toKey()]=w}(r,o.batchId,t),yield lc(r,o.changes),yield Vm(r.remoteStore)}catch(o){const u=Bm(o,"Failed to persist write");t.reject(u)}}),xA.apply(this,arguments)}function pR(n,e){return MA.apply(this,arguments)}function MA(){return MA=(0,me.Z)(function*(n,e){const t=$e(n);try{const r=yield YN(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.aa.get(u);d&&(It(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.na=!0:o.modifiedDocuments.size>0?It(d.na):o.removedDocuments.size>0&&(It(d.na),d.na=!1))}),yield lc(t,r,e)}catch(r){yield $f(r)}}),MA.apply(this,arguments)}function gR(n,e,t){const r=$e(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ia.forEach((u,d)=>{const m=d.view.Pu(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=$e(u);m.onlineState=d;let w=!1;m.queries.forEach((D,x)=>{for(const N of x.listeners)N.Pu(d)&&(w=!0)}),w&&IA(m)}(r.eventManager,e),o.length&&r.sa.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function VP(n,e,t){return RA.apply(this,arguments)}function RA(){return RA=(0,me.Z)(function*(n,e,t){const r=$e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.aa.get(e),u=o&&o.key;if(u){let d=new cr(i.comparator);d=d.insert(u,hn.newNoDocument(u,wt.min()));const m=an().add(u),w=new Uv(wt.min(),new Map,new bn(Mt),d,m);yield pR(r,w),r.ua=r.ua.remove(u),r.aa.delete(e),VA(r)}else yield Fm(r.localStore,e,!1).then(()=>Hm(r,e,t)).catch($f)}),RA.apply(this,arguments)}function UP(n,e){return NA.apply(this,arguments)}function NA(){return NA=(0,me.Z)(function*(n,e){const t=$e(n),r=e.batch.batchId;try{const o=yield KN(t.localStore,e);FA(t,r,null),kA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield lc(t,o)}catch(o){yield $f(o)}}),NA.apply(this,arguments)}function BP(n,e,t){return PA.apply(this,arguments)}function PA(){return PA=(0,me.Z)(function*(n,e,t){const r=$e(n);try{const o=yield function(u,d){const m=$e(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let D;return m.Bs.lookupMutationBatch(w,d).next(x=>(It(null!==x),D=x.keys(),m.Bs.removeMutationBatch(w,x))).next(()=>m.Bs.performConsistencyCheck(w)).next(()=>m.fi.Ks(w,D))})}(r.localStore,e);FA(r,e,t),kA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield lc(r,o)}catch(o){yield $f(o)}}),PA.apply(this,arguments)}function OA(){return OA=(0,me.Z)(function*(n,e){const t=$e(n);rh(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=$e(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.la.get(r)||[];o.push(e),t.la.set(r,o)}catch(r){const o=Bm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),OA.apply(this,arguments)}function kA(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function FA(n,e,t){const r=$e(n);let o=r.ha[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ha[r.currentUser.toKey()]=o}}function Hm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||mR(n,r)})}function mR(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(t0(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),VA(n))}function LA(n,e,t){for(const r of t)r instanceof dR?(n.ca.addReference(r.key,e),$P(n,r)):r instanceof hR?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||mR(n,r.key)):tt()}function $P(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.oa.add(r),VA(n))}function VA(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new i(Gt.fromString(e)),r=n.fa.next();n.aa.set(r,new PP(t)),n.ua=n.ua.insert(t,r),uI(n.remoteStore,new eh(ra(Tm(t.path)),r,2,fs.A))}}function lc(n,e,t){return UA.apply(this,arguments)}function UA(){return UA=(0,me.Z)(function*(n,e,t){const r=$e(n),o=[],u=[],d=[];var m;r.ia.isEmpty()||(r.ia.forEach((m,w)=>{d.push(r._a(w,e,t).then(D=>{if(D){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,D.fromCache?"not-current":"current"),o.push(D);const x=HT.Ys(w.targetId,D);u.push(x)}}))}),yield Promise.all(d),r.sa.zo(o),yield(m=(0,me.Z)(function*(w,D){const x=$e(w);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>fe.forEach(D,j=>fe.forEach(j.Hs,Z=>x.persistence.referenceDelegate.addReference(N,j.targetId,Z)).next(()=>fe.forEach(j.Js,Z=>x.persistence.referenceDelegate.removeReference(N,j.targetId,Z)))))}catch(N){if(!Of(N))throw N;ke("LocalStore","Failed to update sequence numbers: "+N)}for(const N of D){const j=N.targetId;if(!N.fromCache){const Z=x.ui.get(j),Ne=Z.withLastLimboFreeSnapshotVersion(Z.snapshotVersion);x.ui=x.ui.insert(j,Ne)}}}),function(w,D){return m.apply(this,arguments)})(r.localStore,u))}),UA.apply(this,arguments)}function HP(n,e){return BA.apply(this,arguments)}function BA(){return BA=(0,me.Z)(function*(n,e){const t=$e(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield GM(t.localStore,e);t.currentUser=e,(o=t).la.forEach(d=>{d.forEach(m=>{m.reject(new Se(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield lc(t,r.di)}var o}),BA.apply(this,arguments)}function GP(n,e){const t=$e(n),r=t.aa.get(e);if(r&&r.na)return an().add(r.key);{let o=an();const u=t.ra.get(e);if(!u)return o;for(const d of u){const m=t.ia.get(d);o=o.unionWith(m.view.ju)}return o}}function qP(n,e){return jA.apply(this,arguments)}function jA(){return jA=(0,me.Z)(function*(n,e){const t=$e(n),r=yield iI(t.localStore,e.query,!0),o=e.view.ta(r);return t.isPrimaryClient&&LA(t,e.targetId,o.Xu),o}),jA.apply(this,arguments)}function zP(n,e){return $A.apply(this,arguments)}function $A(){return $A=(0,me.Z)(function*(n,e){const t=$e(n);return ZM(t.localStore,e).then(r=>lc(t,r))}),$A.apply(this,arguments)}function WP(n,e,t,r){return HA.apply(this,arguments)}function HA(){return HA=(0,me.Z)(function*(n,e,t,r){const o=$e(n),u=yield function(d,m){const w=$e(d),D=$e(w.Bs);return w.persistence.runTransaction("Lookup mutation documents","readonly",x=>D.fn(x,m).next(N=>N?w.fi.Ks(x,N):fe.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Vm(o.remoteStore):"acknowledged"===t||"rejected"===t?(FA(o,e,r||null),kA(o,e),m=e,$e($e(o.localStore).Bs)._n(m)):tt(),yield lc(o,u)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),HA.apply(this,arguments)}function GA(){return GA=(0,me.Z)(function*(n,e){const t=$e(n);if(ZA(t),KA(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield yR(t,r.toArray());t.da=!0,yield mA(t.remoteStore,!0);for(const u of o)uI(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let o=Promise.resolve();t.ra.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(Hm(t,d),Fm(t.localStore,d,!0))),t0(t.remoteStore,d)}),yield o,yield yR(t,r),function(u){const d=$e(u);d.aa.forEach((m,w)=>{t0(d.remoteStore,w)}),d.ca.Si(),d.aa=new Map,d.ua=new cr(i.comparator)}(t),t.da=!1,yield mA(t.remoteStore,!1)}}),GA.apply(this,arguments)}function yR(n,e,t){return qA.apply(this,arguments)}function qA(){return qA=(0,me.Z)(function*(n,e,t){const r=$e(n),o=[],u=[];for(const d of e){let m;const w=r.ra.get(d);if(w&&0!==w.length){m=yield km(r.localStore,ra(w[0]));for(const D of w){const x=r.ia.get(D),N=yield qP(r,x);N.snapshot&&u.push(N.snapshot)}}else{const D=yield WM(r.localStore,d);m=yield km(r.localStore,D),yield TA(r,_R(D),d,!1)}o.push(m)}return r.sa.zo(u),o}),qA.apply(this,arguments)}function _R(n){return Rx(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function KP(n){const e=$e(n);return $e($e(e.localStore).persistence).Fs()}function YP(n,e,t,r){return zA.apply(this,arguments)}function zA(){return zA=(0,me.Z)(function*(n,e,t,r){const o=$e(n);if(o.da)return void ke("SyncEngine","Ignoring unexpected query state notification.");const u=o.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield ZM(o.localStore,Ox(u[0])),m=Uv.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield lc(o,d,m);break}case"rejected":yield Fm(o.localStore,e,!0),Hm(o,e,r);break;default:tt()}}),zA.apply(this,arguments)}function QP(n,e,t){return WA.apply(this,arguments)}function WA(){return WA=(0,me.Z)(function*(n,e,t){const r=ZA(n);if(r.da){for(const o of e){if(r.ra.has(o)){ke("SyncEngine","Adding an already active target "+o);continue}const u=yield WM(r.localStore,o),d=yield km(r.localStore,u);yield TA(r,_R(u),d.targetId,!1),uI(r.remoteStore,d)}for(const o of t)r.ra.has(o)&&(yield Fm(r.localStore,o,!1).then(()=>{t0(r.remoteStore,o),Hm(r,o)}).catch($f))}}),WA.apply(this,arguments)}function ZA(n){const e=$e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=pR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VP.bind(null,e),e.sa.zo=SP.bind(null,e.eventManager),e.sa.wa=xP.bind(null,e.eventManager),e}function KA(n){const e=$e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BP.bind(null,e),e}class vR{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.M=Xv(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return HM(this.persistence,new $M,e.initialUser,this.M)}ya(e){return new oP(KT.Yi,this.M)}ga(e){return new JM}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class wR extends vR{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield KA(r.Ta.syncEngine),yield Vm(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return HM(this.persistence,new $M,e.initialUser,this.M)}pa(e){return new jN(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=$T(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Bs.withCacheSize(this.cacheSizeBytes):Bs.DEFAULT;return new jT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,eR(),aI(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new JM}}class XP extends wR{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const o=r.Ta.syncEngine;r.sharedClientState instanceof XT&&(r.sharedClientState.syncEngine={$r:WP.bind(null,o),Br:YP.bind(null,o),Lr:QP.bind(null,o),Fs:KP.bind(null,o),Fr:zP.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,me.Z)(function*(d){yield function ZP(n,e){return GA.apply(this,arguments)}(r.Ta.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}ga(e){const t=eR();if(!XT.vt(t))throw new Se(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=$T(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new XT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class YA{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>gR(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=HP.bind(null,r.syncEngine),yield mA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new AP}createDatastore(e){const t=Xv(e.databaseInfo.databaseId),r=new dP(e.databaseInfo);return new pP(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>gR(this.syncEngine,m,0),d=XM.vt()?new XM:new uP,new mP(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,w,D){const x=new OP(r,o,u,d,m,w);return D&&(x.da=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=$e(t);ke("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Lm(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ER(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class cI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class eO{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Yn,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,me.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),o=Number(r);isNaN(o)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(o);return new MP(JSON.parse(u),t.length+o)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,me.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,me.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class tO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Se(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,me.Z)(function*(u,d){const m=$e(u),w=Hv(m.M)+"/documents",D={documents:d.map(Z=>$v(m.M,Z))},x=yield m._o("BatchGetDocuments",w,D),N=new Map;x.forEach(Z=>{const ie=function tN(n,e){return"found"in e?function(t,r){It(!!r.found);const o=Yu(t,r.found.name),u=gi(r.found.updateTime),d=new on({mapValue:{fields:r.found.fields}});return hn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){It(!!r.missing),It(!!r.readTime);const o=Yu(t,r.missing),u=gi(r.readTime);return hn.newNoDocument(o,u)}(n,e):tt()}(m.M,Z);N.set(ie.key.toString(),ie)});const j=[];return d.forEach(Z=>{const ie=N.get(Z.toString());It(!!ie),j.push(ie)}),j}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Lv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=i.fromPath(o);e.mutations.push(new CT(u,e.precondition(u)))}),yield(r=(0,me.Z)(function*(o,u){const d=$e(o),m=Hv(d.M)+"/documents",w={writes:u.map(D=>Gv(d.M,D))};yield d.co("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=wt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Se(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Dr.updateTime(t):Dr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(wt.min()))throw new Se(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Dr.updateTime(t)}return Dr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class nO{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.xa=r.maxAttempts,this.No=new eA(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,me.Z)(function*(){const t=new tO(e.datastore),r=e.ka(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ma(u)}))}).catch(o=>{e.Ma(o)})}))}ka(e){try{const t=this.updateFunction(e);return!Em(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Kx(t)}return!1}}class rO{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Hr.UNAUTHENTICATED,this.clientId=Vb.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,me.Z)(function*(m){ke("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(ke("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Se(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Bm(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function bR(n,e){return QA.apply(this,arguments)}function QA(){return QA=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,me.Z)(function*(u){r.isEqual(u)||(yield GM(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),QA.apply(this,arguments)}function IR(n,e){return JA.apply(this,arguments)}function JA(){return JA=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield XA(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>aR(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>aR(e.remoteStore,u)),n.onlineComponents=e}),JA.apply(this,arguments)}function XA(n){return eS.apply(this,arguments)}function eS(){return eS=(0,me.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield bR(n,new vR)),n.offlineComponents}),eS.apply(this,arguments)}function dI(n){return tS.apply(this,arguments)}function tS(){return tS=(0,me.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield IR(n,new YA)),n.onlineComponents}),tS.apply(this,arguments)}function DR(n){return XA(n).then(e=>e.persistence)}function nS(n){return XA(n).then(e=>e.localStore)}function CR(n){return dI(n).then(e=>e.remoteStore)}function rS(n){return dI(n).then(e=>e.syncEngine)}function Gm(n){return iS.apply(this,arguments)}function iS(){return iS=(0,me.Z)(function*(n){const e=yield dI(n),t=e.eventManager;return t.onListen=kP.bind(null,e.syncEngine),t.onUnlisten=FP.bind(null,e.syncEngine),t}),iS.apply(this,arguments)}function TR(n,e,t={}){const r=new Yn;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,u,d,m,w){const D=new cI({next:N=>{u.enqueueAndForget(()=>EA(o,x));const j=N.docs.has(d);!j&&N.fromCache?w.reject(new Se(le.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&N.fromCache&&m&&"server"===m.source?w.reject(new Se(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),x=new DA(Tm(d.path),D,{includeMetadataChanges:!0,ku:!0});return vA(o,x)}(yield Gm(n),n.asyncQueue,e,t,r)})),r.promise}function AR(n,e,t={}){const r=new Yn;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,u,d,m,w){const D=new cI({next:N=>{u.enqueueAndForget(()=>EA(o,x)),N.fromCache&&"server"===m.source?w.reject(new Se(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),x=new DA(d,D,{includeMetadataChanges:!0,ku:!0});return vA(o,x)}(yield Gm(n),n.asyncQueue,e,t,r)})),r.promise}const SR=new Map;function sS(n,e,t){if(!t)throw new Se(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function xR(n,e,t,r){if(!0===e&&!0===r)throw new Se(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function MR(n){if(!i.isDocumentKey(n))throw new Se(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function RR(n){if(i.isDocumentKey(n))throw new Se(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function hI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function Wt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Se(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hI(n);throw new Se(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function NR(n,e){if(e<=0)throw new Se(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class PR{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Se(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Se(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,xR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class n0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PR({}),this._settingsFrozen=!1,e instanceof Zu?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Se(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zu(o.options.projectId)}(e))}get app(){if(!this._app)throw new Se(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Se(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PR(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Sv;switch(t.type){case"gapi":const r=t.client;return It(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new wx(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Se(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=SR.get(e);t&&(ke("ComponentProvider","Removing Datastore"),SR.delete(e),t.terminate())}(this),Promise.resolve()}}class Sn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ju(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sn(this.firestore,e,this._key)}}class Qi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qi(this.firestore,e,this._query)}}class Ju extends Qi{constructor(e,t,r){super(e,t,Tm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new i(e))}withConverter(e){return new Ju(this.firestore,e,this._path)}}function OR(n,e,...t){if(n=(0,bt.m9)(n),sS("collection","path",e),n instanceof n0){const r=Gt.fromString(e,...t);return RR(r),new Ju(n,null,r)}{if(!(n instanceof Sn||n instanceof Ju))throw new Se(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Gt.fromString(e,...t));return RR(r),new Ju(n.firestore,null,r)}}function fI(n,e,...t){if(n=(0,bt.m9)(n),1===arguments.length&&(e=Vb.R()),sS("doc","path",e),n instanceof n0){const r=Gt.fromString(e,...t);return MR(r),new Sn(n,null,new i(r))}{if(!(n instanceof Sn||n instanceof Ju))throw new Se(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Gt.fromString(e,...t));return MR(r),new Sn(n.firestore,n instanceof Ju?n.converter:null,new i(r))}}function kR(n,e){return n=(0,bt.m9)(n),e=(0,bt.m9)(e),(n instanceof Sn||n instanceof Ju)&&(e instanceof Sn||e instanceof Ju)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function FR(n,e){return n=(0,bt.m9)(n),e=(0,bt.m9)(e),n instanceof Qi&&e instanceof Qi&&n.firestore===e.firestore&&Ov(n._query,e._query)&&n.converter===e.converter}class pO{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new eA(this,"async_queue_retry"),this.Qa=()=>{const t=aI();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=aI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=aI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Yn;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,me.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Of(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,ur("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const o=_A.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(o),o}ja(){this.Ua&&tt()}verifyOperationInProgress(){}Ja(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function oS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class gO{constructor(){this._progressObserver={},this._taskCompletionResolver=new Yn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ln extends n0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new pO,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||LR(this),this._firestoreClient.terminate()}}function Tr(n){return n._firestoreClient||LR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function LR(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new yT(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new rO(n._authCredentials,n._appCheckCredentials,n._queue,r)}function VR(n,e,t){const r=new Yn;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield bR(n,t),yield IR(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===le.FAILED_PRECONDITION||u.code===le.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function UR(n){if(n._initialized||n._terminated)throw new Se(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class cc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Se(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Xu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xu(Ir.fromBase64String(e))}catch(t){throw new Se(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xu(Ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Gf{constructor(e){this._methodName=e}}class pI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}}const CO=/^__.*__$/;class TO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Pf(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fv(e,this.data,t,this.fieldTransforms)}}class BR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Pf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function jR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class gI{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new gI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.rc(e),o}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.tc(),o}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return _I(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(jR(this.ec)&&CO.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class AO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Xv(e)}lc(e,t,r,o=!1){return new gI({ec:e,methodName:t,hc:r,path:lr.emptyPath(),ic:!1,cc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function qf(n){const e=n._freezeSettings(),t=Xv(n._databaseId);return new AO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function mI(n,e,t,r,o,u={}){const d=n.lc(u.merge||u.mergeFields?2:0,e,t,o);cS("Data must be an object, but it was:",d,r);const m=GR(r,d);let w,D;if(u.merge)w=new Zd(d.fieldMask),D=d.fieldTransforms;else if(u.mergeFields){const x=[];for(const N of u.mergeFields){const j=dS(e,N,t);if(!d.contains(j))throw new Se(le.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);zR(x,j)||x.push(j)}w=new Zd(x),D=d.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,D=d.fieldTransforms;return new TO(new on(m),w,D)}class r0 extends Gf{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof r0}}function $R(n,e,t){return new gI({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class aS extends Gf{_toFieldTransform(e){return new kv(e.path,new Sm)}isEqual(e){return e instanceof aS}}class SO extends Gf{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=$R(this,e,!0),r=this.fc.map(u=>zf(u,t)),o=new Rf(r);return new kv(e.path,o)}isEqual(e){return this===e}}class xO extends Gf{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=$R(this,e,!0),r=this.fc.map(u=>zf(u,t)),o=new Nf(r);return new kv(e.path,o)}isEqual(e){return this===e}}class MO extends Gf{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new xm(e.M,Vx(e.M,this.dc));return new kv(e.path,t)}isEqual(e){return this===e}}function uS(n,e,t,r){const o=n.lc(1,e,t);cS("Data must be an object, but it was:",o,r);const u=[],d=on.empty();zu(r,(w,D)=>{const x=yI(e,w,t);D=(0,bt.m9)(D);const N=o.oc(x);if(D instanceof r0)u.push(x);else{const j=zf(D,N);null!=j&&(u.push(x),d.set(x,j))}});const m=new Zd(u);return new BR(d,m,o.fieldTransforms)}function lS(n,e,t,r,o,u){const d=n.lc(1,e,t),m=[dS(e,r,t)],w=[o];if(u.length%2!=0)throw new Se(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let j=0;j<u.length;j+=2)m.push(dS(e,u[j])),w.push(u[j+1]);const D=[],x=on.empty();for(let j=m.length-1;j>=0;--j)if(!zR(D,m[j])){const Z=m[j];let ie=w[j];ie=(0,bt.m9)(ie);const Ne=d.oc(Z);if(ie instanceof r0)D.push(Z);else{const Ve=zf(ie,Ne);null!=Ve&&(D.push(Z),x.set(Z,Ve))}}const N=new Zd(D);return new BR(x,N,d.fieldTransforms)}function HR(n,e,t,r=!1){return zf(t,n.lc(r?4:3,e))}function zf(n,e){if(qR(n=(0,bt.m9)(n)))return cS("Unsupported field value:",e,n),GR(n,e);if(n instanceof Gf)return function(t,r){if(!jR(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=zf(d,r.uc(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,bt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Vx(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Fn.fromDate(t);return{timestampValue:jv(r.M,o)}}if(t instanceof Fn){const o=new Fn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:jv(r.M,o)}}if(t instanceof pI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Xu)return{bytesValue:nM(r.M,t._byteString)};if(t instanceof Sn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:AT(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${hI(t)}`)}(n,e)}function GR(n,e){const t={};return _m(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zu(n,(r,o)=>{const u=zf(o,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function qR(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Fn||n instanceof pI||n instanceof Xu||n instanceof Sn||n instanceof Gf)}function cS(n,e,t){if(!qR(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=hI(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function dS(n,e,t){if((e=(0,bt.m9)(e))instanceof cc)return e._internalPath;if("string"==typeof e)return yI(n,e);throw _I("Field path arguments must be of type string or ",n,!1,void 0,t)}const RO=new RegExp("[~\\*/\\[\\]]");function yI(n,e,t){if(e.search(RO)>=0)throw _I(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new cc(...e.split("."))._internalPath}catch(r){throw _I(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _I(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new Se(le.INVALID_ARGUMENT,m+n+w)}function zR(n,e){return n.some(t=>t.isEqual(e))}class s0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new NO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class NO extends s0{data(){return super.data()}}function vI(n,e){return"string"==typeof e?yI(n,e):e instanceof cc?e._internalPath:e._delegate._internalPath}class Wf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dc extends s0{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new o0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(vI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class o0 extends dc{data(e={}){return super.data(e)}}class sh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Wf(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new o0(this._firestore,this._userDataWriter,r.key,r,new Wf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new o0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Wf(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new o0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Wf(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,D=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),D=u.indexOf(d.doc.key)),{type:PO(d.type),doc:m,oldIndex:w,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function PO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function WR(n,e){return n instanceof dc&&e instanceof dc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof sh&&e instanceof sh&&n._firestore===e._firestore&&FR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function ZR(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Se(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class a0{}function oh(n,...e){for(const t of e)n=t._apply(n);return n}class OO extends a0{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=qf(e.firestore),r=function(o,u,d,m,w,D,x){let N;if(w.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new Se(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){e1(x,D);const Z=[];for(const ie of x)Z.push(XR(m,o,ie));N={arrayValue:{values:Z}}}else N=XR(m,o,x)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||e1(x,D),N=HR(d,"where",x,"in"===D||"not-in"===D);const j=Ni.create(w,D,N);return function(Z,ie){if(ie.S()){const Ve=wT(Z);if(null!==Ve&&!Ve.isEqual(ie.field))throw new Se(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ve.toString()}' and '${ie.field.toString()}'`);const Tt=vT(Z);null!==Tt&&t1(0,ie.field,Tt)}const Ne=function(Ve,Tt){for(const At of Ve.filters)if(Tt.indexOf(At.op)>=0)return At.op;return null}(Z,function(Ve){switch(Ve){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ie.op));if(null!==Ne)throw new Se(le.INVALID_ARGUMENT,Ne===ie.op?`Invalid query. You cannot use more than one '${ie.op.toString()}' filter.`:`Invalid query. You cannot use '${ie.op.toString()}' filters with '${Ne.toString()}' filters.`)}(o,j),j}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Qi(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new uc(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class FO extends a0{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Se(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Se(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Cm(o,u);return function(m,w){if(null===vT(m)){const D=wT(m);null!==D&&t1(0,D,w.field)}}(r,d),d}(e._query,this._c,this.gc);return new Qi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new uc(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class KR extends a0{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new Qi(e.firestore,e.converter,Nx(e._query,this.yc,this.Ic))}}class YR extends a0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=JR(e,this.type,this.Tc,this.Ec);return new Qi(e.firestore,e.converter,(o=t,new uc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class QR extends a0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=JR(e,this.type,this.Tc,this.Ec);return new Qi(e.firestore,e.converter,(o=t,new uc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function JR(n,e,t,r){if(t[0]=(0,bt.m9)(t[0]),t[0]instanceof s0)return function(o,u,d,m,w){if(!m)throw new Se(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const D=[];for(const x of Am(o))if(x.field.isKeyField())D.push(S(u,m.key));else{const N=m.data.field(x.field);if(Bb(N))throw new Se(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const j=x.field.canonicalString();throw new Se(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${j}' (used as the orderBy) does not exist.`)}D.push(N)}return new Jd(D,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=qf(n.firestore);return function(u,d,m,w,D,x){const N=u.explicitOrderBy;if(D.length>N.length)throw new Se(le.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const j=[];for(let Z=0;Z<D.length;Z++){const ie=D[Z];if(N[Z].field.isKeyField()){if("string"!=typeof ie)throw new Se(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ie}`);if(!ET(u)&&-1!==ie.indexOf("/"))throw new Se(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ie}' contains a slash.`);const Ne=u.path.child(Gt.fromString(ie));if(!i.isDocumentKey(Ne))throw new Se(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Ne}' is not because it contains an odd number of segments.`);const Ve=new i(Ne);j.push(S(d,Ve))}else{const Ne=HR(m,w,ie);j.push(Ne)}}return new Jd(j,x)}(n._query,n.firestore._databaseId,o,e,t,r)}}function XR(n,e,t){if("string"==typeof(t=(0,bt.m9)(t))){if(""===t)throw new Se(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ET(e)&&-1!==t.indexOf("/"))throw new Se(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Gt.fromString(t));if(!i.isDocumentKey(r))throw new Se(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return S(n,new i(r))}if(t instanceof Sn)return S(n,t._key);throw new Se(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hI(t)}.`)}function e1(n,e){if(!Array.isArray(n)||0===n.length)throw new Se(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Se(le.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function t1(n,e,t){if(!t.isEqual(e))throw new Se(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const GO={maxAttempts:5};class hS{convertValue(e,t="none"){switch(l(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Kd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){const r={};return zu(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new pI(Hn(e.latitude),Hn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=mT(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(wm(e));default:return null}}convertTimestamp(e){const t=Wu(e);return new Fn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Gt.fromString(e);It(hM(r));const o=new Zu(r.get(1),r.get(3)),u=new i(r.popFirst(5));return o.isEqual(t)||ur(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function wI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class qO extends hS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,t)}}class n1{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=qf(e)}set(e,t,r){this._verifyNotCommitted();const o=ah(e,this._firestore),u=wI(o.converter,t,r),d=mI(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,Dr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=ah(e,this._firestore);let d;return d="string"==typeof(t=(0,bt.m9)(t))||t instanceof cc?lS(this._dataReader,"WriteBatch.update",u._key,t,r,o):uS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,Dr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ah(e,this._firestore);return this._mutations=this._mutations.concat(new Lv(t._key,Dr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ah(n,e){if((n=(0,bt.m9)(n)).firestore!==e)throw new Se(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Zf extends hS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,t)}}function r1(n,e,t){n=Wt(n,Sn);const r=Wt(n.firestore,Ln),o=wI(n.converter,e,t);return qm(r,[mI(qf(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Dr.none())])}function i1(n,e,t,...r){n=Wt(n,Sn);const o=Wt(n.firestore,Ln),u=qf(o);let d;return d="string"==typeof(e=(0,bt.m9)(e))||e instanceof cc?lS(u,"updateDoc",n._key,e,t,r):uS(u,"updateDoc",n._key,e),qm(o,[d.toMutation(n._key,Dr.exists(!0))])}function s1(n,...e){var t,r,o;n=(0,bt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||oS(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(oS(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,D,x;if(n instanceof Sn)D=Wt(n.firestore,Ln),x=Tm(n._key.path),w={next:N=>{e[d]&&e[d](fS(D,n,N))},error:e[d+1],complete:e[d+2]};else{const N=Wt(n,Qi);D=Wt(N.firestore,Ln),x=N._query;const j=new Zf(D);w={next:Z=>{e[d]&&e[d](new sh(D,j,N,Z))},error:e[d+1],complete:e[d+2]},ZR(n._query)}return function(N,j,Z,ie){const Ne=new cI(ie),Ve=new DA(j,Ne,Z);return N.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return vA(yield Gm(N),Ve)})),()=>{Ne.Aa(),N.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return EA(yield Gm(N),Ve)}))}}(Tr(D),x,m,w)}function qm(n,e){return function(t,r){const o=new Yn;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function LP(n,e,t){return xA.apply(this,arguments)}(yield rS(t),r,o)})),o.promise}(Tr(n),e)}function fS(n,e,t){const r=t.docs.get(e._key),o=new Zf(n);return new dc(n,o,e._key,r,new Wf(t.hasPendingWrites,t.fromCache),e.converter)}class tk extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=qf(e)}get(e){const t=ah(e,this._firestore),r=new qO(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return tt();const u=o[0];if(u.isFoundDocument())return new s0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new s0(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){const o=ah(e,this._firestore),u=wI(o.converter,t,r),d=mI(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=ah(e,this._firestore);let d;return d="string"==typeof(t=(0,bt.m9)(t))||t instanceof cc?lS(this._dataReader,"Transaction.update",u._key,t,r,o):uS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=ah(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ah(e,this._firestore),r=new Zf(this._firestore);return super.get(e).then(o=>new dc(this._firestore,r,t._key,o._document,new Wf(!1,!1),t.converter))}}function pS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Se("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function a1(){if("undefined"==typeof Uint8Array)throw new Se("unimplemented","Uint8Arrays are not available in this environment.")}function u1(){if(!function bx(){return"undefined"!=typeof atob}())throw new Se("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){zd=go.SDK_VERSION,(0,go._registerComponent)(new yd.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Ln(o,new ym(t.getProvider("auth-internal")),new Ex(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,go.registerVersion)(Ob,"3.4.9",n),(0,go.registerVersion)(Ob,"3.4.9","esm2017")}();class u0{constructor(e){this._delegate=e}static fromBase64String(e){return u1(),new u0(Xu.fromBase64String(e))}static fromUint8Array(e){return a1(),new u0(Xu.fromUint8Array(e))}toBase64(){return u1(),this._delegate.toBase64()}toUint8Array(){return a1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function gS(n){return function ck(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class dk{enableIndexedDbPersistence(e,t){return function yO(n,e){UR(n=Wt(n,Ln));const t=Tr(n),r=n._freezeSettings(),o=new YA;return VR(t,o,new wR(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function _O(n){UR(n=Wt(n,Ln));const e=Tr(n),t=n._freezeSettings(),r=new YA;return VR(e,r,new XP(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function vO(n){if(n._initialized&&!n._terminated)throw new Se(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Yn;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!Za.vt())return Promise.resolve();const o=r+"main";yield Za.delete(o)}),function(r){return t.apply(this,arguments)})($T(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class l1{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Zu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Sf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function hO(n,e,t,r={}){var o;const u=(n=Wt(n,n0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Sf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Hr.MOCK_USER;else{d=(0,bt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Se(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Hr(w)}n._authCredentials=new xv(new Lb(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function EO(n){return function iO(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield DR(n),t=yield CR(n);return e.setNetworkEnabled(!0),function(r){const o=$e(r);return o.wu.delete(0),e0(o)}(t)}))}(Tr(n=Wt(n,Ln)))}(this._delegate)}disableNetwork(){return function bO(n){return function sO(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield DR(n),t=yield CR(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(o){const u=$e(o);u.wu.add(0),yield Lm(u),u.yu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Tr(n=Wt(n,Ln)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,xR("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function wO(n){return function(e){const t=new Yn;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function jP(n,e){return OA.apply(this,arguments)}(yield rS(e),t)})),t.promise}(Tr(n=Wt(n,Ln)))}(this._delegate)}onSnapshotsInSync(e){return function ek(n,e){return function uO(n,e){const t=new cI(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield Gm(n),o=t,$e(r).bu.add(o),void o.next();var r,o})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield Gm(n),o=t,void $e(r).bu.delete(o);var r,o}))}}(Tr(n=Wt(n,Ln)),oS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Se("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new zm(this,OR(this._delegate,e))}catch(t){throw ms(t,"collection()","Firestore.collection()")}}doc(e){try{return new sa(this,fI(this._delegate,e))}catch(t){throw ms(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ys(this,function fO(n,e){if(n=Wt(n,n0),sS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Se(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Qi(n,null,(t=e,new uc(Gt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ms(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function nk(n,e,t){n=Wt(n,Ln);const r=Object.assign(Object.assign({},GO),t);return function(o){if(o.maxAttempts<1)throw new Se(le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function lO(n,e,t){const r=new Yn;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const o=yield(u=n,dI(u).then(d=>d.datastore));var u;new nO(n.asyncQueue,o,t,e,r).run()})),r.promise}(Tr(n),o=>e(new tk(n,o)),r)}(this._delegate,t=>e(new c1(this,t)))}batch(){return Tr(this._delegate),new d1(new n1(this._delegate,e=>qm(this._delegate,e)))}loadBundle(e){return function IO(n,e){const t=Tr(n=Wt(n,Ln)),r=new gO;return function cO(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,D){if(w instanceof Uint8Array)return ER(w,D);if(w instanceof ArrayBuffer)return ER(new Uint8Array(w),D);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new eO(w,d);var w}(t,Xv(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function JP(n,e,t){const r=$e(n);var o;(o=(0,me.Z)(function*(u,d,m){try{const w=yield d.getMetadata();if(yield function(j,Z){const ie=$e(j),Ne=gi(Z.createTime);return ie.persistence.runTransaction("hasNewerBundle","readonly",Ve=>ie._s.getBundleMetadata(Ve,Z.id)).then(Ve=>!!Ve&&Ve.createTime.compareTo(Ne)>=0)}(u.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(j=w).totalDocuments,bytesLoaded:j.totalBytes,totalDocuments:j.totalDocuments,totalBytes:j.totalBytes}),Promise.resolve(new Set);m._updateProgress(cR(w));const D=new RP(w,u.localStore,d.M);let x=yield d.ma();for(;x;){const j=yield D.Fu(x);j&&m._updateProgress(j),x=yield d.ma()}const N=yield D.complete();return yield lc(u,N.Lu,void 0),yield function(j,Z){const ie=$e(j);return ie.persistence.runTransaction("Save bundle","readwrite",Ne=>ie._s.saveBundleMetadata(Ne,Z))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Bu)}catch(w){return Sf("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var j}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield rS(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function DO(n,e){return function dO(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const o=$e(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield nS(n),e)}))}(Tr(n=Wt(n,Ln)),e).then(t=>t?new Qi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ys(this,t):null)}}class EI extends hS{constructor(e){super(),this.firestore=e}convertBytes(e){return new u0(new Xu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return sa.forKey(t,this.firestore,null)}}class c1{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new EI(e)}get(e){const t=Yf(e);return this._delegate.get(t).then(r=>new l0(this._firestore,new dc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Yf(e);return r?(pS("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Yf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Yf(e);return this._delegate.delete(t),this}}class d1{constructor(e){this._delegate=e}set(e,t,r){const o=Yf(e);return r?(pS("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Yf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Yf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Kf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new o0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new c0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Kf.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Kf(e,new EI(e),t),o.set(t,u)),u}}Kf.INSTANCES=new WeakMap;class sa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new EI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Se("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new sa(t,new Sn(t._delegate,r,new i(e)))}static forKey(e,t,r){return new sa(t,new Sn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new zm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new zm(this.firestore,OR(this._delegate,e))}catch(t){throw ms(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,bt.m9)(e))instanceof Sn&&kR(this._delegate,e)}set(e,t){t=pS("DocumentReference.set",t);try{return t?r1(this._delegate,e,t):r1(this._delegate,e)}catch(r){throw ms(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?i1(this._delegate,e):i1(this._delegate,e,t,...r)}catch(o){throw ms(o,"updateDoc()","DocumentReference.update()")}}delete(){return function JO(n){return qm(Wt(n.firestore,Ln),[new Lv(n._key,Dr.none())])}(this._delegate)}onSnapshot(...e){const t=h1(e),r=f1(e,o=>new l0(this.firestore,new dc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return s1(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function WO(n){n=Wt(n,Sn);const e=Wt(n.firestore,Ln),t=Tr(e),r=new Zf(e);return function oO(n,e){const t=new Yn;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,u,d){try{const m=yield function(w,D){const x=$e(w);return x.persistence.runTransaction("read document","readonly",N=>x.fi.Ls(N,D))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new Se(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Bm(m,`Failed to get document '${u} from cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield nS(n),e,t);var r})),t.promise}(t,n._key).then(o=>new dc(e,r,n._key,o,new Wf(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function ZO(n){n=Wt(n,Sn);const e=Wt(n.firestore,Ln);return TR(Tr(e),n._key,{source:"server"}).then(t=>fS(e,n,t))}(this._delegate):function zO(n){n=Wt(n,Sn);const e=Wt(n.firestore,Ln);return TR(Tr(e),n._key).then(t=>fS(e,n,t))}(this._delegate),t.then(r=>new l0(this.firestore,new dc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new sa(this.firestore,this._delegate.withConverter(e?Kf.getInstance(this.firestore,e):null))}}function ms(n,e,t){return n.message=n.message.replace(e,t),n}function h1(n){for(const e of n)if("object"==typeof e&&!gS(e))return e;return{}}function f1(n,e){var t,r;let o;return o=gS(n[0])?n[0]:gS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class l0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new sa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return WR(this._delegate,e._delegate)}}class c0 extends l0{data(e){const t=this._delegate.data(e);return function Fb(n,e){n||tt()}(void 0!==t),t}}class ys{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new EI(e)}where(e,t,r){try{return new ys(this.firestore,oh(this._delegate,function kO(n,e,t){const r=e,o=vI("where",n);return new OO(o,r,t)}(e,t,r)))}catch(o){throw ms(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ys(this.firestore,oh(this._delegate,function LO(n,e="asc"){const t=e,r=vI("orderBy",n);return new FO(r,t)}(e,t)))}catch(r){throw ms(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ys(this.firestore,oh(this._delegate,function VO(n){return NR("limit",n),new KR("limit",n,"F")}(e)))}catch(t){throw ms(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ys(this.firestore,oh(this._delegate,function UO(n){return NR("limitToLast",n),new KR("limitToLast",n,"L")}(e)))}catch(t){throw ms(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ys(this.firestore,oh(this._delegate,function BO(...n){return new YR("startAt",n,!0)}(...e)))}catch(t){throw ms(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ys(this.firestore,oh(this._delegate,function jO(...n){return new YR("startAfter",n,!1)}(...e)))}catch(t){throw ms(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ys(this.firestore,oh(this._delegate,function $O(...n){return new QR("endBefore",n,!1)}(...e)))}catch(t){throw ms(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ys(this.firestore,oh(this._delegate,function HO(...n){return new QR("endAt",n,!0)}(...e)))}catch(t){throw ms(t,"endAt()","Query.endAt()")}}isEqual(e){return FR(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function YO(n){n=Wt(n,Qi);const e=Wt(n.firestore,Ln),t=Tr(e),r=new Zf(e);return function aO(n,e){const t=new Yn;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,u,d){try{const m=yield iI(o,u,!0),w=new fR(u,m._i),D=w.Wu(m.documents),x=w.applyChanges(D,!1);d.resolve(x.snapshot)}catch(m){const w=Bm(m,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield nS(n),e,t);var r})),t.promise}(t,n._query).then(o=>new sh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function QO(n){n=Wt(n,Qi);const e=Wt(n.firestore,Ln),t=Tr(e),r=new Zf(e);return AR(t,n._query,{source:"server"}).then(o=>new sh(e,r,n,o))}(this._delegate):function KO(n){n=Wt(n,Qi);const e=Wt(n.firestore,Ln),t=Tr(e),r=new Zf(e);return ZR(n._query),AR(t,n._query).then(o=>new sh(e,r,n,o))}(this._delegate),t.then(r=>new mS(this.firestore,new sh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=h1(e),r=f1(e,o=>new mS(this.firestore,new sh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return s1(this._delegate,t,r)}withConverter(e){return new ys(this.firestore,this._delegate.withConverter(e?Kf.getInstance(this.firestore,e):null))}}class fk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new c0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class mS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ys(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new c0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new fk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new c0(this._firestore,r))})}isEqual(e){return WR(this._delegate,e._delegate)}}class zm extends ys{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new sa(this.firestore,e):null}doc(e){try{return new sa(this.firestore,void 0===e?fI(this._delegate):fI(this._delegate,e))}catch(t){throw ms(t,"doc()","CollectionReference.doc()")}}add(e){return function XO(n,e){const t=Wt(n.firestore,Ln),r=fI(n),o=wI(n.converter,e);return qm(t,[mI(qf(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Dr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new sa(this.firestore,t))}isEqual(e){return kR(this._delegate,e._delegate)}withConverter(e){return new zm(this.firestore,this._delegate.withConverter(e?Kf.getInstance(this.firestore,e):null))}}function Yf(n){return Wt(n,Sn)}class yS{constructor(...e){this._delegate=new cc(...e)}static documentId(){return new yS(lr.keyField().canonicalString())}isEqual(e){return(e=(0,bt.m9)(e))instanceof cc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Qf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function ik(){return new aS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Qf(e)}static delete(){const e=function rk(){return new r0("deleteField")}();return e._methodName="FieldValue.delete",new Qf(e)}static arrayUnion(...e){const t=function sk(...n){return new SO("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Qf(t)}static arrayRemove(...e){const t=function ok(...n){return new xO("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Qf(t)}static increment(e){const t=function ak(n){return new MO("increment",n)}(e);return t._methodName="FieldValue.increment",new Qf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const pk={Firestore:l1,GeoPoint:pI,Timestamp:Fn,Blob:u0,Transaction:c1,WriteBatch:d1,DocumentReference:sa,DocumentSnapshot:l0,Query:ys,QueryDocumentSnapshot:c0,QuerySnapshot:mS,CollectionReference:zm,FieldPath:yS,FieldValue:Qf,setLogLevel:function hk(n){!function _x(n){sc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function p1(n,e){return function yk(n,e=PC.z){return new Ss.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function _S(n,e){return p1(n,e).pipe((0,Et.U)(t=>({payload:t,type:"query"})))}function bI(n,e){return _S(n,e).pipe(xu(void 0),R_(),(0,Et.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=o.find(x=>x.doc.ref.isEqual(d.ref)),D=null==t?void 0:t.payload.docs.find(x=>x.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&D&&JSON.stringify(D.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function g1(n,e,t){return bI(n,t).pipe(ii((r,o)=>function vk(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function wk(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return vS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return vS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return vS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function OC(n,e=Na.y){return n=null!=n?n:kC,(0,Si.e)((t,r)=>{let o,u=!0;t.subscribe((0,jt.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,Et.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function vS(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function m1(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function mk(n){(function gk(n,e){n.INTERNAL.registerComponent(new yd.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},pk)))})(n,(e,t)=>new l1(e,t,new dk)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(fw.Z);class y1{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=bI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Et.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(xu(void 0),R_(),xi(([r,o])=>o.length>0||!r),(0,Et.U)(([r,o])=>o),hi.iC)}auditTrail(e){return this.stateChanges(e).pipe(ii((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=m1(e);return g1(this.query,t,this.afs.schedulers.outsideAngular).pipe(hi.iC)}valueChanges(e={}){return _S(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),hi.iC)}get(e){return(0,pn.D)(this.query.get(e)).pipe(hi.iC)}add(e){return this.ref.add(e)}doc(e){return new _1(this.ref.doc(e),this.afs)}}class _1{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=v1(r,t);return new y1(o,u,this.afs)}snapshotChanges(){return function _k(n,e){return p1(n,e).pipe(xu(void 0),R_(),(0,Et.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(hi.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Et.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,pn.D)(this.ref.get(e)).pipe(hi.iC)}}class Ek{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?bI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),xi(t=>t.length>0),hi.iC):bI(this.query,this.afs.schedulers.outsideAngular).pipe(hi.iC)}auditTrail(e){return this.stateChanges(e).pipe(ii((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=m1(e);return g1(this.query,t,this.afs.schedulers.outsideAngular).pipe(hi.iC)}valueChanges(e={}){return _S(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),hi.iC)}get(e){return(0,pn.D)(this.query.get(e)).pipe(hi.iC)}}const bk=new f.OlP("angularfire2.enableFirestorePersistence"),Ik=new f.OlP("angularfire2.firestore.persistenceSettings"),Dk=new f.OlP("angularfire2.firestore.settings"),Ck=new f.OlP("angularfire2.firestore.use-emulator");function v1(n,e=(t=>t)){return{query:e(n),ref:n}}let w1=(()=>{class n{constructor(t,r,o,u,d,m,w,D,x,N,j,Z,ie,Ne,Ve,Tt,At){this.schedulers=w;const mt=(0,ds.on)(t,m,r),it=x;N&&UE(mt,m,j,ie,Ne,Ve,Z,Tt),[this.firestore,this.persistenceEnabled$]=(0,ds.cc)(`${mt.name}.firestore`,"AngularFirestore",mt.name,()=>{const xt=m.runOutsideAngular(()=>mt.firestore());if(u&&xt.settings(u),it&&xt.useEmulator(...it),o&&!xo(d)){const $t=()=>{try{return(0,pn.D)(xt.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(Ar){return"undefined"!=typeof console&&console.warn(Ar),gt(!1)}};return[xt,m.runOutsideAngular($t)]}return[xt,gt(!1)]},[u,it,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=v1(o,r),m=this.schedulers.ngZone.run(()=>u);return new y1(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new Ek(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new _1(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ds.Dh),f.LFG(ds.xv,8),f.LFG(bk,8),f.LFG(Dk,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(hi.HU),f.LFG(Ik,8),f.LFG(Ck,8),f.LFG(M_,8),f.LFG(kE,8),f.LFG(FE,8),f.LFG(LE,8),f.LFG(Tg,8),f.LFG(VE,8),f.LFG(x_,8),f.LFG(S_,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Tk=(()=>{class n{constructor(t,r,o){this.afauth=t,this.fireStore=r,this.storage=o,this.storageRef=WD.Z.app().storage().ref(),this.containerRef=r.collection("especialistasColl")}subirImages(t,r,o){var u=this;return(0,me.Z)(function*(){try{let d=yield u.storageRef.child(`${t}/${r}`).putString(o,"data_url");return console.log(d),yield d.ref.getDownloadURL()}catch(d){return console.log(d),null}})()}addDataCollection(t,r){let o={status:!0,error:""},u=this.fireStore.collection(t);try{u.add(r).then(d=>{d||(o.status=!1,o.error="data vacia")})}catch(d){o.status=!1,o.error=`${d}`,console.log(d)}return o}getCollection(t){return this.fireStore.collection(t).valueChanges()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(M_),f.LFG(w1),f.LFG(w1))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ak(n,e){1&n&&(f.TgZ(0,"small",40),f._uU(1," El Nombre es requerido "),f.qZA())}function Sk(n,e){1&n&&(f.TgZ(0,"small",40),f._uU(1," El Apellido es requerido "),f.qZA())}function xk(n,e){1&n&&(f.TgZ(0,"small",40),f._uU(1," La edad es requerida "),f.qZA())}function Mk(n,e){1&n&&(f.TgZ(0,"small",40),f._uU(1," El email es requerido "),f.qZA())}function Rk(n,e){1&n&&(f.TgZ(0,"small",40),f._uU(1," Ingrese un formato valido "),f.qZA())}function Nk(n,e){1&n&&(f.TgZ(0,"small",40),f._uU(1," El DNI es requerido "),f.qZA())}function Pk(n,e){1&n&&(f.TgZ(0,"small",40),f._uU(1," La contrase\xf1a es requerida "),f.qZA())}function Ok(n,e){if(1&n&&(f.TgZ(0,"option",41),f._uU(1),f.qZA()),2&n){const t=e.$implicit;f.s9C("value",t.id),f.xp6(1),f.hij(" ",t.especialidad," ")}}function kk(n,e){1&n&&(f.TgZ(0,"small",40),f._uU(1," La Especialidad es requerida "),f.qZA())}function Fk(n,e){1&n&&(f.TgZ(0,"small",40),f._uU(1," La Foto es requerida "),f.qZA())}function Lk(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",10)(1,"div",11)(2,"h4",12),f._uU(3,"Registro de Especialista"),f.qZA(),f.TgZ(4,"form",13),f.NdJ("ngSubmit",function(){return f.CHM(t),f.oxw().registrarEspecialista()}),f.TgZ(5,"div",14)(6,"div",15)(7,"label",16),f._uU(8,"Nombre"),f.qZA(),f._UZ(9,"input",17),f.YNc(10,Ak,2,0,"small",18),f.qZA(),f.TgZ(11,"div",15)(12,"label",19),f._uU(13,"Apellido"),f.qZA(),f._UZ(14,"input",20),f.YNc(15,Sk,2,0,"small",18),f.qZA(),f.TgZ(16,"div",15)(17,"label",21),f._uU(18,"Edad"),f.qZA(),f._UZ(19,"input",22),f.YNc(20,xk,2,0,"small",18),f.qZA(),f.TgZ(21,"div",23)(22,"label",24),f._uU(23,"Correo"),f.qZA(),f.TgZ(24,"div",25)(25,"span",26),f._uU(26,"@"),f.qZA(),f._UZ(27,"input",27),f.YNc(28,Mk,2,0,"small",18),f.YNc(29,Rk,2,0,"small",18),f.qZA()(),f.TgZ(30,"div",23)(31,"label",28),f._uU(32,"Dni"),f.qZA(),f._UZ(33,"input",29),f.YNc(34,Nk,2,0,"small",18),f.qZA(),f.TgZ(35,"div",23)(36,"label",30),f._uU(37,"contrase\xf1a"),f.qZA(),f._UZ(38,"input",31),f.YNc(39,Pk,2,0,"small",18),f.qZA(),f.TgZ(40,"div",23)(41,"label",32),f._uU(42,"Especialidad"),f.qZA(),f.TgZ(43,"select",33)(44,"option",34),f._uU(45,"Escoge..."),f.qZA(),f.YNc(46,Ok,2,2,"option",35),f.qZA(),f.YNc(47,kk,2,0,"small",18),f.qZA(),f.TgZ(48,"div",23)(49,"label",36),f._uU(50,"Elige una foto de perfil!"),f.qZA(),f.TgZ(51,"input",37),f.NdJ("change",function(o){return f.CHM(t),f.oxw().cargarImagenLocalEspecialista(o)}),f.qZA(),f.YNc(52,Fk,2,0,"small",18),f.qZA()(),f._UZ(53,"hr",38),f.TgZ(54,"button",39),f._uU(55,"Registrar Especialista!"),f.qZA()()()()}if(2&n){const t=f.oxw();f.xp6(4),f.Q6J("formGroup",t.formaEspecialista),f.xp6(6),f.Q6J("ngIf",(null==t.formaEspecialista.controls.nombre.errors?null:t.formaEspecialista.controls.nombre.errors.required)&&t.formaEspecialista.controls.nombre.touched),f.xp6(5),f.Q6J("ngIf",(null==t.formaEspecialista.controls.apellido.errors?null:t.formaEspecialista.controls.apellido.errors.required)&&t.formaEspecialista.controls.apellido.touched),f.xp6(5),f.Q6J("ngIf",(null==t.formaEspecialista.controls.edad.errors?null:t.formaEspecialista.controls.edad.errors.required)&&t.formaEspecialista.controls.edad.touched),f.xp6(8),f.Q6J("ngIf",(null==t.formaEspecialista.controls.email.errors?null:t.formaEspecialista.controls.email.errors.required)&&t.formaEspecialista.controls.email.touched),f.xp6(1),f.Q6J("ngIf",(null==t.formaEspecialista.controls.email.errors?null:t.formaEspecialista.controls.email.errors.email)&&t.formaEspecialista.controls.email.touched),f.xp6(5),f.Q6J("ngIf",(null==t.formaEspecialista.controls.nombre2.errors?null:t.formaEspecialista.controls.nombre2.errors.required)&&t.formaEspecialista.controls.nombre2.touched),f.xp6(5),f.Q6J("ngIf",(null==t.formaEspecialista.controls.password.errors?null:t.formaEspecialista.controls.password.errors.required)&&t.formaEspecialista.controls.password.touched),f.xp6(7),f.Q6J("ngForOf",t.listaEspecialidades),f.xp6(1),f.Q6J("ngIf",(null==t.formaEspecialista.controls.especialidad.errors?null:t.formaEspecialista.controls.especialidad.errors.required)&&t.formaEspecialista.controls.especialidad.touched),f.xp6(5),f.Q6J("ngIf",(null==t.formaEspecialista.controls.foto.errors?null:t.formaEspecialista.controls.foto.errors.required)&&t.formaEspecialista.controls.foto.touched),f.xp6(2),f.Q6J("disabled",t.formaEspecialista.invalid)}}function Vk(n,e){1&n&&(f.TgZ(0,"small",40),f._uU(1," El Nombre es requerido. "),f.qZA())}function Uk(n,e){1&n&&(f.TgZ(0,"small",40),f._uU(1," El Apellido es requerido. "),f.qZA())}function Bk(n,e){1&n&&(f.TgZ(0,"small",40),f._uU(1," La edad es requerida. "),f.qZA())}function jk(n,e){1&n&&(f.TgZ(0,"small",40),f._uU(1," El correo es requerido. "),f.qZA())}function $k(n,e){1&n&&(f.TgZ(0,"small",40),f._uU(1," Ingrese un formato valido. "),f.qZA())}function Hk(n,e){1&n&&(f.TgZ(0,"small",40),f._uU(1," El DNI es requerido. "),f.qZA())}function Gk(n,e){1&n&&(f.TgZ(0,"small",40),f._uU(1," La contrase\xf1a es requerida. "),f.qZA())}function qk(n,e){1&n&&(f.TgZ(0,"small",40),f._uU(1," Tu obra social es requerida. "),f.qZA())}function zk(n,e){1&n&&(f.TgZ(0,"small",40),f._uU(1," Las Fotos son requeridas. "),f.qZA())}function Wk(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",10)(1,"div",11)(2,"h4",12),f._uU(3," \u{1f915} Registro de Pacientes \u{1f915}"),f.qZA(),f.TgZ(4,"form",13),f.NdJ("ngSubmit",function(){return f.CHM(t),f.oxw().registrarPaciente()}),f.TgZ(5,"div",14)(6,"div",15)(7,"label",42),f._uU(8,"Nombre"),f.qZA(),f._UZ(9,"input",43),f.YNc(10,Vk,2,0,"small",18),f.qZA(),f.TgZ(11,"div",15)(12,"label",44),f._uU(13,"Apellido"),f.qZA(),f._UZ(14,"input",45),f.YNc(15,Uk,2,0,"small",18),f.qZA(),f.TgZ(16,"div",15)(17,"label",46),f._uU(18,"Edad"),f.qZA(),f._UZ(19,"input",47),f.YNc(20,Bk,2,0,"small",18),f.qZA(),f.TgZ(21,"div",23)(22,"label",48),f._uU(23,"Correo"),f.qZA(),f.TgZ(24,"div",25)(25,"span",26),f._uU(26,"@"),f.qZA(),f._UZ(27,"input",49),f.YNc(28,jk,2,0,"small",18),f.YNc(29,$k,2,0,"small",18),f.qZA()(),f.TgZ(30,"div",23)(31,"label",28),f._uU(32,"Dni"),f.qZA(),f._UZ(33,"input",50),f.YNc(34,Hk,2,0,"small",18),f.qZA(),f.TgZ(35,"div",23)(36,"label",51),f._uU(37,"contrase\xf1a"),f.qZA(),f._UZ(38,"input",52),f.YNc(39,Gk,2,0,"small",18),f.qZA(),f.TgZ(40,"div",23)(41,"label",30),f._uU(42,"Obra Social"),f.qZA(),f._UZ(43,"input",53),f.YNc(44,qk,2,0,"small",18),f.qZA(),f.TgZ(45,"div",23)(46,"label",36),f._uU(47,"Elige 2 fotos para tu perfil!"),f.qZA(),f.TgZ(48,"input",54),f.NdJ("change",function(o){return f.CHM(t),f.oxw().cargarImagenesLocalPaciente(o)}),f.qZA(),f.YNc(49,zk,2,0,"small",18),f.qZA()(),f._UZ(50,"hr",38),f.TgZ(51,"button",39),f._uU(52,"Registrar Especialista!"),f.qZA()()()()}if(2&n){const t=f.oxw();f.xp6(4),f.Q6J("formGroup",t.formaPaciente),f.xp6(6),f.Q6J("ngIf",(null==t.formaPaciente.controls.nombrePaciente.errors?null:t.formaPaciente.controls.nombrePaciente.errors.required)&&t.formaPaciente.controls.nombrePaciente.touched),f.xp6(5),f.Q6J("ngIf",(null==t.formaPaciente.controls.apellidoP.errors?null:t.formaPaciente.controls.apellidoP.errors.required)&&t.formaPaciente.controls.apellidoP.touched),f.xp6(5),f.Q6J("ngIf",(null==t.formaPaciente.controls.edadP.errors?null:t.formaPaciente.controls.edadP.errors.required)&&t.formaPaciente.controls.edadP.touched),f.xp6(8),f.Q6J("ngIf",(null==t.formaPaciente.controls.emailP.errors?null:t.formaPaciente.controls.emailP.errors.required)&&t.formaPaciente.controls.emailP.touched),f.xp6(1),f.Q6J("ngIf",(null==t.formaPaciente.controls.emailP.errors?null:t.formaPaciente.controls.emailP.errors.email)&&t.formaPaciente.controls.emailP.touched),f.xp6(5),f.Q6J("ngIf",(null==t.formaPaciente.controls.dni_.errors?null:t.formaPaciente.controls.dni_.errors.required)&&t.formaPaciente.controls.dni_.touched),f.xp6(5),f.Q6J("ngIf",(null==t.formaPaciente.controls.passwordP.errors?null:t.formaPaciente.controls.passwordP.errors.required)&&t.formaPaciente.controls.passwordP.touched),f.xp6(5),f.Q6J("ngIf",(null==t.formaPaciente.controls.obraSocial.errors?null:t.formaPaciente.controls.obraSocial.errors.required)&&t.formaPaciente.controls.obraSocial.touched),f.xp6(5),f.Q6J("ngIf",(null==t.formaPaciente.controls.fotosP.errors?null:t.formaPaciente.controls.fotosP.errors.required)&&t.formaPaciente.controls.fotosP.touched),f.xp6(2),f.Q6J("disabled",t.formaPaciente.invalid)}}const Zk=[{path:"login",component:cw},{path:"registro",component:(()=>{class n{constructor(t,r,o){this.fb=t,this.firebaseApi=r,this.ruteo=o,this.firebaseApi.getCollection("especialidades").subscribe(u=>{this.listaEspecialidades=u}),this.formPaciente=!1,this.formEspecialista=!0,this.newEspecialista=new dw,this.newPaciente=new hw,this.formaEspecialista=this.fb.group({nombre2:["",[sn.required]],especialidad:["",[sn.required]],nombre:["",[sn.required]],apellido:["",sn.required],edad:["",[sn.required,sn.min(10)]],email:["",[sn.required,sn.email]],password:["",[sn.required]],foto:["",[sn.required]]}),this.formaPaciente=this.fb.group({dni_:["",[sn.required,sn.min(1)]],nombrePaciente:["",[sn.required]],apellidoP:["",sn.required],obraSocial:["",sn.required],edadP:["",[sn.required,sn.min(10)]],emailP:["",[sn.required,sn.email]],passwordP:["",[sn.required]],fotosP:["",[sn.required]]})}ngOnInit(){}registrarPaciente(){this.newPaciente.nombre=this.formaPaciente.value.nombrePaciente,this.newPaciente.apellido=this.formaPaciente.value.apellidoP,this.newPaciente.edad=this.formaPaciente.value.edadP,this.newPaciente.dni=this.formaPaciente.value.dni_,this.newPaciente.obraSocial=this.formaPaciente.value.obraSocial,this.newPaciente.email=this.formaPaciente.value.emailP,this.newPaciente.password=this.formaPaciente.value.passwordP;for(let t=0;t<this.fotosPaciente.length;t++){let r=new FileReader;r.readAsDataURL(this.fotosPaciente[t]),r.onloadend=()=>{this.firebaseApi.subirImages("fotosPacientes",`${this.newPaciente.dni}_${this.newPaciente.nombre}_img${t}`,r.result).then(o=>{if(null!=o&&(this.newPaciente.fotosPerfil.push(o),1==t)){let u=this.firebaseApi.addDataCollection("PacientesColl",JSON.parse(JSON.stringify(this.newPaciente)));u.status&&this.formaEspecialista.reset(),u.status&&this.ruteo.navigate(["/login"])}}).catch(o=>!1)}}}registrarEspecialista(){this.newEspecialista.nombre=this.formaEspecialista.value.nombre,this.newEspecialista.apellido=this.formaEspecialista.value.apellido,this.newEspecialista.edad=this.formaEspecialista.value.edad,this.newEspecialista.dni=this.formaEspecialista.value.nombre2,this.newEspecialista.especialidad=this.formaEspecialista.value.especialidad,this.newEspecialista.email=this.formaEspecialista.value.email,this.newEspecialista.password=this.formaEspecialista.value.password;let t=new FileReader;t.readAsDataURL(this.fotoEspecialista),t.onloadend=()=>{this.firebaseApi.subirImages("fotosEspecialista",`${this.newEspecialista.dni}_${this.newEspecialista.nombre}`,t.result).then(r=>{if(null!=r){this.newEspecialista.fotoPerfil=r,console.log(this.newEspecialista);let o=this.firebaseApi.addDataCollection("especialistasColl",JSON.parse(JSON.stringify(this.newEspecialista)));o.status&&this.formaEspecialista.reset(),o.status&&this.ruteo.navigate(["/login"])}}).catch(r=>!1)}}cargarImagenLocalEspecialista(t){this.fotoEspecialista=t.target.files[0]}cargarImagenesLocalPaciente(t){this.fotosPaciente=t.target.files,console.log(typeof this.fotosPaciente),console.log(this.fotosPaciente)}showFormPaciente(){this.formEspecialista=!1,this.formPaciente=!0}showFormEspecialista(){this.formEspecialista=!0,this.formPaciente=!1}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Nh),f.Y36(Tk),f.Y36(ai))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-registro"]],decls:16,vars:3,consts:[[1,"container"],[1,"ceter"],[1,"presentacion"],[1,"py-6","text-center","mt-5"],["alt","","width","100","height","150",1,"d-block","mx-auto","mb-4",3,"src"],[1,"lead"],[1,"d-grid","gap-2","d-sm-flex","justify-content-sm-center"],["type","button",1,"btn","btn-success","btn-lg","px-4","gap-3",3,"click"],[1,"btn","btn-secondary","btn-lg","px-4",3,"click"],["class","row g-5",4,"ngIf"],[1,"row","g-5"],[1,"col-md-7","col-lg-8"],[1,"mb-3"],[3,"formGroup","ngSubmit"],[1,"row","g-3"],[1,"col-sm-6"],["for","firstName",1,"form-label"],["type","text","id","firstName","placeholder","","value","","formControlName","nombre",1,"form-control"],["class","invalid","style","color:red ;",4,"ngIf"],["for","lastNameE",1,"form-label"],["type","text","id","lastNameE","placeholder","","formControlName","apellido",1,"form-control"],["for","lastName",1,"form-label"],["type","text","id","lastName","placeholder","","formControlName","edad",1,"form-control"],[1,"col-12"],["for","correo",1,"form-label"],[1,"input-group","has-validation"],[1,"input-group-text"],["type","text","id","correo","placeholder","Username","formControlName","email",1,"form-control"],["for","dni",1,"form-label"],["type","text","id","dni","placeholder","","formControlName","nombre2",1,"form-control"],["for","address",1,"form-label"],["type","password","id","address","placeholder","","formControlName","password",1,"form-control"],["for","inlineFormCustomSelect",1,"mr-sm-2"],["id","inlineFormCustomSelect","formControlName","especialidad",1,"custom-select","mr-sm-2"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["for","address2",1,"form-label"],["type","file","accept",".png, .jpg, .jpeg","multiple","","id","address2","formControlName","foto",1,"form-control",3,"change"],[1,"my-4"],["type","submit",1,"w-100","btn","btn-primary","btn-lg",3,"disabled"],[1,"invalid",2,"color","red"],[3,"value"],["for","firstNamep",1,"form-label"],["type","text","id","firstNamep","placeholder","","value","","formControlName","nombrePaciente",1,"form-control"],["for","lastNameP",1,"form-label"],["type","text","id","lastNameP","placeholder","","formControlName","apellidoP",1,"form-control"],["for","edadp",1,"form-label"],["type","text","id","edadp","placeholder","","formControlName","edadP",1,"form-control"],["for","correop",1,"form-label"],["type","text","id","correop","placeholder","Username","formControlName","emailP",1,"form-control"],["type","text","id","dni","placeholder","","formControlName","dni_",1,"form-control"],["for","addressp",1,"form-label"],["type","password","id","addressp","placeholder","1234 Main St","formControlName","passwordP",1,"form-control"],["type","text","id","address","placeholder","","formControlName","obraSocial",1,"form-control"],["type","file","accept",".png, .jpg, .jpeg","multiple","","id","address2","formControlName","fotosP",1,"form-control",3,"change"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"main",1)(2,"div",2)(3,"div",3),f._UZ(4,"img",4),f.TgZ(5,"h2"),f._uU(6,"Registro"),f.qZA(),f.TgZ(7,"p",5),f._uU(8,"Importante: se podran dar de alta Profesionales y Pacientes."),f.qZA(),f.TgZ(9,"div",6)(10,"button",7),f.NdJ("click",function(){return r.showFormEspecialista()}),f._uU(11,"Registrar Profesional"),f.qZA(),f.TgZ(12,"button",8),f.NdJ("click",function(){return r.showFormPaciente()}),f._uU(13,"Registrar Paciente "),f.qZA()()()(),f.YNc(14,Lk,56,12,"div",9),f.YNc(15,Wk,53,11,"div",9),f.qZA()()),2&t&&(f.xp6(4),f.Q6J("src",r.formPaciente?"../../../assets/registro/paciente.png":"../../../assets/registro/doctor.png",f.LSH),f.xp6(10),f.Q6J("ngIf",r.formEspecialista&&!r.formPaciente),f.xp6(1),f.Q6J("ngIf",r.formPaciente&&!r.formEspecialista))},directives:[qn,Pl,ro,Iu,as,yr,Du,Ma,Sh,zc,Un],styles:[".container[_ngcontent-%COMP%]{max-width:960px}"]}),n})()},{path:"",component:By}];let Kk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[Qp.forRoot(Zk)],Qp]}),n})(),Yk=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-top-nav-bar"]],decls:32,vars:0,consts:[["aria-label","Third navbar example",1,"navbar","navbar-expand-sm","navbar-dark","bg-info"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarsExample03","aria-controls","navbarsExample03","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarsExample03",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-sm-0"],[1,"nav-item"],["aria-current","page","href","#",1,"nav-link","active",2,"color","black"],["href","#",1,"nav-link",2,"color","black"],[1,"nav-link",2,"color","black"],[1,"nav-item","dropdown"],["href","#","id","dropdown03","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle",2,"color","black"],["aria-labelledby","dropdown03",1,"dropdown-menu"],["href","#",1,"dropdown-item",2,"color","grey"],["type","text","placeholder","Search","aria-label","Search",1,"form-control"]],template:function(t,r){1&t&&(f.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),f._uU(3,"Clinicas"),f.qZA(),f.TgZ(4,"button",3),f._UZ(5,"span",4),f.qZA(),f.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),f._uU(10,"Home"),f.qZA()(),f.TgZ(11,"li",7)(12,"a",9),f._uU(13,"Link"),f.qZA()(),f.TgZ(14,"li",7)(15,"a",10),f._uU(16,"Disabled"),f.qZA()(),f.TgZ(17,"li",11)(18,"a",12),f._uU(19,"Dropdown"),f.qZA(),f.TgZ(20,"ul",13)(21,"li")(22,"a",14),f._uU(23,"Action"),f.qZA()(),f.TgZ(24,"li")(25,"a",14),f._uU(26,"Another action"),f.qZA()(),f.TgZ(27,"li")(28,"a",14),f._uU(29,"Something else here"),f.qZA()()()()(),f.TgZ(30,"form"),f._UZ(31,"input",15),f.qZA()()()())},directives:[Pl,ro,Go],styles:["body[_ngcontent-%COMP%]{padding-bottom:20px}.navbar[_ngcontent-%COMP%]{margin-bottom:20px}"]}),n})(),Qk=(()=>{class n{constructor(){this.title="tpClinicas"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&f._UZ(0,"app-top-nav-bar")(1,"router-outlet")},directives:[Yk,zh],styles:[""]}),n})();const Jk_firebaseConfig={apiKey:"AIzaSyC17d1pAn5U5dlsaXA2iR-bplKdvwDMSHI",authDomain:"tp-clinicas.firebaseapp.com",projectId:"tp-clinicas",storageBucket:"tp-clinicas.appspot.com",messagingSenderId:"257024047381",appId:"1:257024047381:web:f59aa4deba51875bc0911c"};let Xk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[Qk]}),n.\u0275inj=f.cJS({providers:[],imports:[[ma,Kk,b0,Tu,ds.hO.initializeApp(Jk_firebaseConfig)]]}),n})();(0,f.G48)(),uu().bootstrapModule(Xk).catch(n=>console.error(n))},5867:(Ye,we,P)=>{P.d(we,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=P(9681);(0,f.registerVersion)("firebase","9.8.2","app")},127:(Ye,we,P)=>{P.d(we,{Z:()=>f.Z});var f=P(3942);f.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(Ye,we,P)=>{P.r(we);var f=P(5861),J=P(3942),O=P(2090),ae=P(9681),te=P(655),pe=P(1877),ue=P(4859);const Re=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Le=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ge=new pe.Yd("@firebase/auth");function We(y,...h){Ge.logLevel<=pe.in.ERROR&&Ge.error(`Auth (${ae.SDK_VERSION}): ${y}`,...h)}function De(y,...h){throw Ue(y,...h)}function ve(y,...h){return Ue(y,...h)}function Ee(y,h,g){const v=Object.assign(Object.assign({},Le()),{[h]:g});return new O.LL("auth","Firebase",v).create(h,{appName:y.name})}function je(y,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&De(y,"argument-error"),Ee(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ue(y,...h){if("string"!=typeof y){const g=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(g,...v)}return he.create(y,...h)}function B(y,h,...g){if(!y)throw Ue(h,...g)}function _e(y){const h="INTERNAL ASSERTION FAILED: "+y;throw We(h),new Error(h)}function W(y,h){y||_e(h)}const ne=new Map;function X(y){W(y instanceof Function,"Expected a class definition");let h=ne.get(y);return h?(W(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,ne.set(y,h),h)}function Pe(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function st(){return"http:"===Ut()||"https:"===Ut()}function Ut(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Zt{constructor(h,g){this.shortDelay=h,this.longDelay=g,W(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Ot(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(st()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function yn(y,h){W(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class Jt{static initialize(h,g,v){this.fetchImpl=h,g&&(this.headersImpl=g),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void _e("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void _e("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void _e("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},dr=new Zt(3e4,6e4);function Ht(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Nt(y,h,g,v){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,f.Z)(function*(y,h,g,v,T={}){return Gr(y,T,(0,f.Z)(function*(){let R={},z={};v&&("GET"===h?z=v:R={body:JSON.stringify(v)});const de=(0,O.xO)(Object.assign({key:y.config.apiKey},z)).slice(1),Fe=yield y._getAdditionalHeaders();return Fe["Content-Type"]="application/json",y.languageCode&&(Fe["X-Firebase-Locale"]=y.languageCode),Jt.fetch()(_s(y,y.config.apiHost,g,de),Object.assign({method:h,headers:Fe,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Gr(y,h,g){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,f.Z)(function*(y,h,g){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},qt),h);try{const T=new qr(y),R=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const z=yield R.json();if("needConfirmation"in z)throw _i(y,"account-exists-with-different-credential",z);if(R.ok&&!("errorMessage"in z))return z;{const de=R.ok?z.errorMessage:z.error.message,[Fe,Ke]=de.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw _i(y,"credential-already-in-use",z);if("EMAIL_EXISTS"===Fe)throw _i(y,"email-already-in-use",z);if("USER_DISABLED"===Fe)throw _i(y,"user-disabled",z);const at=v[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Ke)throw Ee(y,at,Ke);De(y,at)}}catch(T){if(T instanceof O.ZR)throw T;De(y,"network-request-failed")}})).apply(this,arguments)}function hr(y,h,g,v){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,f.Z)(function*(y,h,g,v,T={}){const R=yield Nt(y,h,g,v,T);return"mfaPendingCredential"in R&&De(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function _s(y,h,g,v){const T=`${h}${g}?${v}`;return y.config.emulator?yn(y.config,T):`${y.config.apiScheme}://${T}`}class qr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,v)=>{this.timer=setTimeout(()=>v(ve(this.auth,"network-request-failed")),dr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _i(y,h,g){const v={appName:y.name};g.email&&(v.email=g.email),g.phoneNumber&&(v.phoneNumber=g.phoneNumber);const T=ve(y,h,v);return T.customData._tokenResponse=g,T}function zr(){return(zr=(0,f.Z)(function*(y,h){return Nt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function gn(y,h){return _n.apply(this,arguments)}function _n(){return(_n=(0,f.Z)(function*(y,h){return Nt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function js(y,h){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,f.Z)(function*(y,h){return Nt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Vn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function Do(){return(Do=(0,f.Z)(function*(y,h=!1){const g=(0,O.m9)(y),v=yield g.getIdToken(h),T=nt(v);B(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const R="object"==typeof T.firebase?T.firebase:void 0,z=null==R?void 0:R.sign_in_provider;return{claims:T,token:v,authTime:Vn(Bt(T.auth_time)),issuedAtTime:Vn(Bt(T.iat)),expirationTime:Vn(Bt(T.exp)),signInProvider:z||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function Bt(y){return 1e3*Number(y)}function nt(y){const[h,g,v]=y.split(".");if(void 0===h||void 0===g||void 0===v)return We("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(g);return T?JSON.parse(T):(We("Failed to decode base64 JWT payload"),null)}catch(T){return We("Caught error parsing JWT payload as JSON",T),null}}function Jn(y,h){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,f.Z)(function*(y,h,g=!1){if(g)return h;try{return yield h}catch(v){throw v instanceof O.ZR&&kt(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function kt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class $s{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield g.iteration()}),v)}iteration(){var h=this;return(0,f.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&h.schedule(!0))}h.schedule()})()}}class Xn{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vn(this.lastLoginAt),this.creationTime=Vn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function er(y){return L.apply(this,arguments)}function L(){return(L=(0,f.Z)(function*(y){var h;const g=y.auth,v=yield y.getIdToken(),T=yield Jn(y,js(g,{idToken:v}));B(null==T?void 0:T.users.length,g,"internal-error");const R=T.users[0];y._notifyReloadListener(R);const z=(null===(h=R.providerUserInfo)||void 0===h?void 0:h.length)?H(R.providerUserInfo):[],de=Ie(y.providerData,z),at=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==de?void 0:de.length)),ot={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:de,metadata:new Xn(R.createdAt,R.lastLoginAt),isAnonymous:at};Object.assign(y,ot)})).apply(this,arguments)}function q(){return(q=(0,f.Z)(function*(y){const h=(0,O.m9)(y);yield er(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ie(y,h){return[...y.filter(v=>!h.some(T=>T.providerId===v.providerId)),...h]}function H(y){return y.map(h=>{var{providerId:g}=h,v=(0,te._T)(h,["providerId"]);return{providerId:g,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function xe(){return(xe=(0,f.Z)(function*(y,h){const g=yield Gr(y,{},(0,f.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:R}=y.config,z=_s(y,T,"/v1/token",`key=${R}`),de=yield y._getAdditionalHeaders();return de["Content-Type"]="application/x-www-form-urlencoded",Jt.fetch()(z,{method:"POST",headers:de,body:v})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Ze{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){B(h.idToken,"internal-error"),B(void 0!==h.idToken,"internal-error"),B(void 0!==h.refreshToken,"internal-error");const g="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function ft(y){const h=nt(y);return B(h,"internal-error"),B(void 0!==h.exp,"internal-error"),B(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var v=this;return(0,f.Z)(function*(){return B(!v.accessToken||v.refreshToken,h,"user-token-expired"),g||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var v=this;return(0,f.Z)(function*(){const{accessToken:T,refreshToken:R,expiresIn:z}=yield function Q(y,h){return xe.apply(this,arguments)}(h,g);v.updateTokensAndExpiration(T,R,Number(z))})()}updateTokensAndExpiration(h,g,v){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,g){const{refreshToken:v,accessToken:T,expirationTime:R}=g,z=new Ze;return v&&(B("string"==typeof v,"internal-error",{appName:h}),z.refreshToken=v),T&&(B("string"==typeof T,"internal-error",{appName:h}),z.accessToken=T),R&&(B("number"==typeof R,"internal-error",{appName:h}),z.expirationTime=R),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Ze,this.toJSON())}_performRefresh(){return _e("not implemented")}}function ut(y,h){B("string"==typeof y||void 0===y,"internal-error",{appName:h})}class _t{constructor(h){var{uid:g,auth:v,stsTokenManager:T}=h,R=(0,te._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $s(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new Xn(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,f.Z)(function*(){const v=yield Jn(g,g.stsTokenManager.getToken(g.auth,h));return B(v,g.auth,"internal-error"),g.accessToken!==v&&(g.accessToken=v,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),v})()}getIdTokenResult(h){return function vi(y){return Do.apply(this,arguments)}(this,h)}reload(){return function G(y){return q.apply(this,arguments)}(this)}_assign(h){this!==h&&(B(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new _t(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var v=this;return(0,f.Z)(function*(){let T=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),T=!0),g&&(yield er(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,f.Z)(function*(){const g=yield h.getIdToken();return yield Jn(h,function ct(y,h){return zr.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var v,T,R,z,de,Fe,Ke,at;const ot=null!==(v=g.displayName)&&void 0!==v?v:void 0,On=null!==(T=g.email)&&void 0!==T?T:void 0,si=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,Pa=null!==(z=g.photoURL)&&void 0!==z?z:void 0,kh=null!==(de=g.tenantId)&&void 0!==de?de:void 0,Mp=null!==(Fe=g._redirectEventId)&&void 0!==Fe?Fe:void 0,Oa=null!==(Ke=g.createdAt)&&void 0!==Ke?Ke:void 0,id=null!==(at=g.lastLoginAt)&&void 0!==at?at:void 0,{uid:Bl,emailVerified:Rt,isAnonymous:sd,providerData:zo,stsTokenManager:Fh}=g;B(Bl&&Fh,h,"internal-error");const Lh=Ze.fromJSON(this.name,Fh);B("string"==typeof Bl,h,"internal-error"),ut(ot,h.name),ut(On,h.name),B("boolean"==typeof Rt,h,"internal-error"),B("boolean"==typeof sd,h,"internal-error"),ut(si,h.name),ut(Pa,h.name),ut(kh,h.name),ut(Mp,h.name),ut(Oa,h.name),ut(id,h.name);const Vh=new _t({uid:Bl,auth:h,email:On,emailVerified:Rt,displayName:ot,isAnonymous:sd,photoURL:Pa,phoneNumber:si,tenantId:kh,stsTokenManager:Lh,createdAt:Oa,lastLoginAt:id});return zo&&Array.isArray(zo)&&(Vh.providerData=zo.map(ay=>Object.assign({},ay))),Mp&&(Vh._redirectEventId=Mp),Vh}static _fromIdTokenResponse(h,g,v=!1){return(0,f.Z)(function*(){const T=new Ze;T.updateFromServerResponse(g);const R=new _t({uid:g.localId,auth:h,stsTokenManager:T,isAnonymous:v});return yield er(R),R})()}}const yt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(g,v){var T=this;return(0,f.Z)(function*(){T.storage[g]=v})()}_get(g){var v=this;return(0,f.Z)(function*(){const T=v.storage[g];return void 0===T?null:T})()}_remove(g){var v=this;return(0,f.Z)(function*(){delete v.storage[g]})()}_addListener(g,v){}_removeListener(g,v){}}return y.type="NONE",y})();function xn(y,h,g){return`firebase:${y}:${h}:${g}`}class fr{constructor(h,g,v){this.persistence=h,this.auth=g,this.userKey=v;const{config:T,name:R}=this.auth;this.fullUserKey=xn(this.userKey,T.apiKey,R),this.fullPersistenceKey=xn("persistence",T.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?_t._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,f.Z)(function*(){if(g.persistence===h)return;const v=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,v?g.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,v="authUser"){return(0,f.Z)(function*(){if(!g.length)return new fr(X(yt),h,v);const T=(yield Promise.all(g.map(function(){var Ke=(0,f.Z)(function*(at){if(yield at._isAvailable())return at});return function(at){return Ke.apply(this,arguments)}}()))).filter(Ke=>Ke);let R=T[0]||X(yt);const z=xn(v,h.config.apiKey,h.name);let de=null;for(const Ke of g)try{const at=yield Ke._get(z);if(at){const ot=_t._fromJSON(h,at);Ke!==R&&(de=ot),R=Ke;break}}catch(at){}const Fe=T.filter(Ke=>Ke._shouldAllowMigration);return R._shouldAllowMigration&&Fe.length?(R=Fe[0],de&&(yield R._set(z,de.toJSON())),yield Promise.all(g.map(function(){var Ke=(0,f.Z)(function*(at){if(at!==R)try{yield at._remove(z)}catch(ot){}});return function(at){return Ke.apply(this,arguments)}}())),new fr(R,h,v)):new fr(R,h,v)})()}}function Ya(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Mn(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(oa(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Xi(h))return"Blackberry";if(Rn(h))return"Webos";if(Qa(h))return"Safari";if((h.includes("chrome/")||aa(h))&&!h.includes("edge/"))return"Chrome";if(pr(h))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function oa(y=(0,O.z$)()){return/firefox\//i.test(y)}function Qa(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function aa(y=(0,O.z$)()){return/crios\//i.test(y)}function Mn(y=(0,O.z$)()){return/iemobile/i.test(y)}function pr(y=(0,O.z$)()){return/android/i.test(y)}function Xi(y=(0,O.z$)()){return/blackberry/i.test(y)}function Rn(y=(0,O.z$)()){return/webos/i.test(y)}function Sr(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function vs(y=(0,O.z$)()){return Sr(y)||pr(y)||Rn(y)||Xi(y)||/windows phone/i.test(y)||Mn(y)}function Co(y,h=[]){let g;switch(y){case"Browser":g=Ya((0,O.z$)());break;case"Worker":g=`${Ya((0,O.z$)())}-${y}`;break;default:g=y}const v=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${ae.SDK_VERSION}/${v}`}class xr{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const v=R=>new Promise((z,de)=>{try{z(h(R))}catch(Fe){de(Fe)}});v.onAbort=g,this.queue.push(v);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,f.Z)(function*(){if(g.auth.currentUser===h)return;const v=[];try{for(const T of g.queue)yield T(h),T.onAbort&&v.push(T.onAbort)}catch(T){v.reverse();for(const R of v)try{R()}catch(z){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:T.message})}})()}}class qe{constructor(h,g,v){this.app=h,this.heartbeatServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yt(this),this.idTokenSubscription=new Yt(this),this.beforeStateQueue=new xr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(h,g){var v=this;return g&&(this._popupRedirectResolver=X(g)),this._initializationPromise=this.queue((0,f.Z)(function*(){var T,R;if(!v._deleted&&(v.persistenceManager=yield fr.create(v,h),!v._deleted)){if(null===(T=v._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(z){}yield v.initializeCurrentUser(g),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,f.Z)(function*(){var v;const T=yield g.assertedPersistence.getCurrentUser();let R=T,z=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const de=null===(v=g.redirectUser)||void 0===v?void 0:v._redirectEventId,Fe=null==R?void 0:R._redirectEventId,Ke=yield g.tryRedirectSignIn(h);(!de||de===Fe)&&(null==Ke?void 0:Ke.user)&&(R=Ke.user,z=!0)}if(!R)return g.directlySetCurrentUser(null);if(!R._redirectEventId){if(z)try{yield g.beforeStateQueue.runMiddleware(R)}catch(de){R=T,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(de))}return R?g.reloadAndSetCurrentUserOrClear(R):g.directlySetCurrentUser(null)}return B(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===R._redirectEventId?g.directlySetCurrentUser(R):g.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(h){var g=this;return(0,f.Z)(function*(){let v=null;try{v=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch(T){yield g._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,f.Z)(function*(){try{yield er(h)}catch(v){if("auth/network-request-failed"!==v.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function ze(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,f.Z)(function*(){const v=h?(0,O.m9)(h):null;return v&&B(v.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(v&&v._clone(g))})()}_updateCurrentUser(h,g=!1){var v=this;return(0,f.Z)(function*(){if(!v._deleted)return h&&B(v.tenantId===h.tenantId,v,"tenant-id-mismatch"),g||(yield v.beforeStateQueue.runMiddleware(h)),v.queue((0,f.Z)(function*(){yield v.directlySetCurrentUser(h),v.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,f.Z)(function*(){yield g.assertedPersistence.setPersistence(X(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,g,v){return this.registerStateListener(this.authStateSubscription,h,g,v)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,v){return this.registerStateListener(this.idTokenSubscription,h,g,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var v=this;return(0,f.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(g);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,f.Z)(function*(){if(!g.redirectPersistenceManager){const v=h&&X(h)||g._popupRedirectResolver;B(v,g,"argument-error"),g.redirectPersistenceManager=yield fr.create(g,[X(v._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,f.Z)(function*(){var v,T;return g._isInitialized&&(yield g.queue((0,f.Z)(function*(){}))),(null===(v=g._currentUser)||void 0===v?void 0:v._redirectEventId)===h?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,f.Z)(function*(){if(h===g.currentUser)return g.queue((0,f.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,v,T){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),z=this._isInitialized?Promise.resolve():this._initializationPromise;return B(z,this,"internal-error"),z.then(()=>R(this.currentUser)),"function"==typeof g?h.addObserver(g,v,T):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,f.Z)(function*(){g.currentUser&&g.currentUser!==h&&(g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh()),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Co(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){var g;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return T&&(v["X-Firebase-Client"]=T),v})()}}function rt(y){return(0,O.m9)(y)}class Yt{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Oi(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function ki(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class wi{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return _e("not implemented")}_getIdTokenResponse(h){return _e("not implemented")}_linkToIdToken(h,g){return _e("not implemented")}_getReauthenticationResolver(h){return _e("not implemented")}}function vn(y,h){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,f.Z)(function*(y,h){return Nt(y,"POST","/v1/accounts:resetPassword",Ht(y,h))})).apply(this,arguments)}function la(y,h){return ws.apply(this,arguments)}function ws(){return(ws=(0,f.Z)(function*(y,h){return Nt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ja(y,h){return Es.apply(this,arguments)}function Es(){return(Es=(0,f.Z)(function*(y,h){return Nt(y,"POST","/v1/accounts:update",Ht(y,h))})).apply(this,arguments)}function Gs(){return(Gs=(0,f.Z)(function*(y,h){return hr(y,"POST","/v1/accounts:signInWithPassword",Ht(y,h))})).apply(this,arguments)}function bs(y,h){return qn.apply(this,arguments)}function qn(){return(qn=(0,f.Z)(function*(y,h){return Nt(y,"POST","/v1/accounts:sendOobCode",Ht(y,h))})).apply(this,arguments)}function Xt(y,h){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,f.Z)(function*(y,h){return bs(y,h)})).apply(this,arguments)}function ca(y,h){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,f.Z)(function*(y,h){return bs(y,h)})).apply(this,arguments)}function Fi(y,h){return eu.apply(this,arguments)}function eu(){return(eu=(0,f.Z)(function*(y,h){return bs(y,h)})).apply(this,arguments)}function fc(y,h){return Li.apply(this,arguments)}function Li(){return(Li=(0,f.Z)(function*(y,h){return bs(y,h)})).apply(this,arguments)}function el(){return(el=(0,f.Z)(function*(y,h){return hr(y,"POST","/v1/accounts:signInWithEmailLink",Ht(y,h))})).apply(this,arguments)}function pc(){return(pc=(0,f.Z)(function*(y,h){return hr(y,"POST","/v1/accounts:signInWithEmailLink",Ht(y,h))})).apply(this,arguments)}class tr extends wi{constructor(h,g,v,T=null){super("password",v),this._email=h,this._password=g,this._tenantId=T}static _fromEmailAndPassword(h,g){return new tr(h,g,"password")}static _fromEmailAndCode(h,g,v=null){return new tr(h,g,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,f.Z)(function*(){switch(g.signInMethod){case"password":return function Un(y,h){return Gs.apply(this,arguments)}(h,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Vi(y,h){return el.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:De(h,"internal-error")}})()}_linkToIdToken(h,g){var v=this;return(0,f.Z)(function*(){switch(v.signInMethod){case"password":return la(h,{idToken:g,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Jf(y,h){return pc.apply(this,arguments)}(h,{idToken:g,email:v._email,oobCode:v._password});default:De(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Is(y,h){return gc.apply(this,arguments)}function gc(){return(gc=(0,f.Z)(function*(y,h){return hr(y,"POST","/v1/accounts:signInWithIdp",Ht(y,h))})).apply(this,arguments)}class es extends wi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new es(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):De("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T}=g,R=(0,te._T)(g,["providerId","signInMethod"]);if(!v||!T)return null;const z=new es(v,T);return z.idToken=R.idToken||void 0,z.accessToken=R.accessToken||void 0,z.secret=R.secret,z.nonce=R.nonce,z.pendingToken=R.pendingToken||null,z}_getIdTokenResponse(h){return Is(h,this.buildRequest())}_linkToIdToken(h,g){const v=this.buildRequest();return v.idToken=g,Is(h,v)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Is(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,O.xO)(g)}return h}}function ep(y,h){return mc.apply(this,arguments)}function mc(){return(mc=(0,f.Z)(function*(y,h){return Nt(y,"POST","/v1/accounts:sendVerificationCode",Ht(y,h))})).apply(this,arguments)}function Ds(){return(Ds=(0,f.Z)(function*(y,h){return hr(y,"POST","/v1/accounts:signInWithPhoneNumber",Ht(y,h))})).apply(this,arguments)}function yc(){return(yc=(0,f.Z)(function*(y,h){const g=yield hr(y,"POST","/v1/accounts:signInWithPhoneNumber",Ht(y,h));if(g.temporaryProof)throw _i(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const np={USER_NOT_FOUND:"user-not-found"};function _c(){return(_c=(0,f.Z)(function*(y,h){return hr(y,"POST","/v1/accounts:signInWithPhoneNumber",Ht(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),np)})).apply(this,arguments)}class To extends wi{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new To({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new To({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function tl(y,h){return Ds.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function tp(y,h){return yc.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function rp(y,h){return _c.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:v,verificationCode:T}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:v,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:v,phoneNumber:T,temporaryProof:R}=h;return v||g||T||R?new To({verificationId:g,verificationCode:v,phoneNumber:T,temporaryProof:R}):null}}class tu{constructor(h){var g,v,T,R,z,de;const Fe=(0,O.zd)((0,O.pd)(h)),Ke=null!==(g=Fe.apiKey)&&void 0!==g?g:null,at=null!==(v=Fe.oobCode)&&void 0!==v?v:null,ot=function uh(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Fe.mode)&&void 0!==T?T:null);B(Ke&&at&&ot,"argument-error"),this.apiKey=Ke,this.operation=ot,this.code=at,this.continueUrl=null!==(R=Fe.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(z=Fe.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(de=Fe.tenantId)&&void 0!==de?de:null}static parseLink(h){const g=function da(y){const h=(0,O.zd)((0,O.pd)(y)).link,g=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||g||h||y}(h);try{return new tu(g)}catch(v){return null}}}let wc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,v){return tr._fromEmailAndPassword(g,v)}static credentialWithLink(g,v){const T=tu.parseLink(v);return B(T,"argument-error"),tr._fromEmailAndCode(g,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class nr{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class qs extends nr{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Ui extends qs{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return B("providerId"in g&&"signInMethod"in g,"argument-error"),es._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return B(h.idToken||h.accessToken,"argument-error"),es._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Ui.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Ui.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:R,nonce:z,providerId:de}=h;if(!v&&!T&&!g&&!R||!de)return null;try{return new Ui(de)._credential({idToken:g,accessToken:v,nonce:z,pendingToken:R})}catch(Fe){return null}}}let Ao=(()=>{class y extends qs{constructor(){super("facebook.com")}static credential(g){return es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Ec=(()=>{class y extends qs{constructor(){super("google.com"),this.addScope("profile")}static credential(g,v){return es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:T}=g;if(!v&&!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),lh=(()=>{class y extends qs{constructor(){super("github.com")}static credential(g){return es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class zs extends wi{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return Is(h,this.buildRequest())}_linkToIdToken(h,g){const v=this.buildRequest();return v.idToken=g,Is(h,v)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Is(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T,pendingToken:R}=g;return v&&T&&R&&v===T?new zs(v,R):null}static _create(h,g){return new zs(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class gr extends nr{constructor(h){B(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return gr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return gr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=zs.fromJSON(h);return B(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:v}=h;if(!g||!v)return null;try{return zs._create(v,g)}catch(T){return null}}}let Ic=(()=>{class y extends qs{constructor(){super("twitter.com")}static credential(g,v){return es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=g;if(!v||!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function mr(y,h){return xo.apply(this,arguments)}function xo(){return(xo=(0,f.Z)(function*(y,h){return hr(y,"POST","/v1/accounts:signUp",Ht(y,h))})).apply(this,arguments)}class Kr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,v,T=!1){return(0,f.Z)(function*(){const R=yield _t._fromIdTokenResponse(h,v,T),z=nl(v);return new Kr({user:R,providerId:z,_tokenResponse:v,operationType:g})})()}static _forOperation(h,g,v){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const T=nl(v);return new Kr({user:h,providerId:T,_tokenResponse:v,operationType:g})})()}}function nl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function rl(){return(rl=(0,f.Z)(function*(y){var h;const g=rt(y);if(yield g._initializationPromise,null===(h=g.currentUser)||void 0===h?void 0:h.isAnonymous)return new Kr({user:g.currentUser,providerId:null,operationType:"signIn"});const v=yield mr(g,{returnSecureToken:!0}),T=yield Kr._fromIdTokenResponse(g,"signIn",v,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class Mo extends O.ZR{constructor(h,g,v,T){var R;super(g.code,g.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,Mo.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,g,v,T){return new Mo(h,g,v,T)}}function il(y,h,g,v){return("reauthenticate"===h?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Mo._fromErrorAndOperation(y,R,h,v):R})}function Bi(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function en(){return(en=(0,f.Z)(function*(y,h){const g=(0,O.m9)(y);yield zt(!0,g,h);const{providerUserInfo:v}=yield gn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),T=Bi(v||[]);return g.providerData=g.providerData.filter(R=>T.has(R.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function ha(y,h){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,f.Z)(function*(y,h,g=!1){const v=yield Jn(y,h._linkToIdToken(y.auth,yield y.getIdToken()),g);return Kr._forOperation(y,"link",v)})).apply(this,arguments)}function zt(y,h,g){return fa.apply(this,arguments)}function fa(){return(fa=(0,f.Z)(function*(y,h,g){yield er(h);const T=!1===y?"provider-already-linked":"no-such-provider";B(Bi(h.providerData).has(g)===y,h.auth,T)})).apply(this,arguments)}function nu(y,h){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,f.Z)(function*(y,h,g=!1){const{auth:v}=y,T="reauthenticate";try{const R=yield Jn(y,il(v,T,h,y),g);B(R.idToken,v,"internal-error");const z=nt(R.idToken);B(z,v,"internal-error");const{sub:de}=z;return B(y.uid===de,v,"user-mismatch"),Kr._forOperation(y,T,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&De(v,"user-mismatch"),R}})).apply(this,arguments)}function zn(y,h){return sl.apply(this,arguments)}function sl(){return(sl=(0,f.Z)(function*(y,h,g=!1){const v="signIn",T=yield il(y,v,h),R=yield Kr._fromIdTokenResponse(y,v,T);return g||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function fn(y,h){return ji.apply(this,arguments)}function ji(){return(ji=(0,f.Z)(function*(y,h){return zn(rt(y),h)})).apply(this,arguments)}function Wn(y,h){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,f.Z)(function*(y,h){const g=(0,O.m9)(y);return yield zt(!1,g,h.providerId),ha(g,h)})).apply(this,arguments)}function ts(y,h){return pa.apply(this,arguments)}function pa(){return(pa=(0,f.Z)(function*(y,h){return nu((0,O.m9)(y),h)})).apply(this,arguments)}function Ei(y,h){return $i.apply(this,arguments)}function $i(){return($i=(0,f.Z)(function*(y,h){return hr(y,"POST","/v1/accounts:signInWithCustomToken",Ht(y,h))})).apply(this,arguments)}function dt(){return(dt=(0,f.Z)(function*(y,h){const g=rt(y),v=yield Ei(g,{token:h,returnSecureToken:!0}),T=yield Kr._fromIdTokenResponse(g,"signIn",v);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class Ts{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?ol._fromServerResponse(h,g):De(h,"internal-error")}}class ol extends Ts{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new ol(g)}}function ga(y,h,g){var v;B((null===(v=g.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),B(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(B(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(B(g.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function ru(){return(ru=(0,f.Z)(function*(y,h,g){const v=(0,O.m9)(y),T={requestType:"PASSWORD_RESET",email:h};g&&ga(v,T,g),yield ca(v,T)})).apply(this,arguments)}function ul(){return(ul=(0,f.Z)(function*(y,h,g){yield vn((0,O.m9)(y),{oobCode:h,newPassword:g})})).apply(this,arguments)}function Ce(){return(Ce=(0,f.Z)(function*(y,h){yield Ja((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function Pt(y,h){return Po.apply(this,arguments)}function Po(){return(Po=(0,f.Z)(function*(y,h){const g=(0,O.m9)(y),v=yield vn(g,{oobCode:h}),T=v.requestType;switch(B(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":B(v.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":B(v.mfaInfo,g,"internal-error");default:B(v.email,g,"internal-error")}let R=null;return v.mfaInfo&&(R=Ts._fromServerResponse(rt(g),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:T}})).apply(this,arguments)}function su(){return(su=(0,f.Z)(function*(y,h){const{data:g}=yield Pt((0,O.m9)(y),h);return g.email})).apply(this,arguments)}function Yr(){return(Yr=(0,f.Z)(function*(y,h,g){const v=rt(y),T=yield mr(v,{returnSecureToken:!0,email:h,password:g}),R=yield Kr._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}function dl(){return(dl=(0,f.Z)(function*(y,h,g){const v=(0,O.m9)(y),T={requestType:"EMAIL_SIGNIN",email:h};B(g.handleCodeInApp,v,"argument-error"),g&&ga(v,T,g),yield Fi(v,T)})).apply(this,arguments)}function ns(){return(ns=(0,f.Z)(function*(y,h,g){const v=(0,O.m9)(y),T=wc.credentialWithLink(h,g||Pe());return B(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),fn(v,T)})).apply(this,arguments)}function rr(y,h){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,f.Z)(function*(y,h){return Nt(y,"POST","/v1/accounts:createAuthUri",Ht(y,h))})).apply(this,arguments)}function As(){return(As=(0,f.Z)(function*(y,h){const v={identifier:h,continueUri:st()?Pe():"http://localhost"},{signinMethods:T}=yield rr((0,O.m9)(y),v);return T||[]})).apply(this,arguments)}function hl(){return(hl=(0,f.Z)(function*(y,h){const g=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&ga(g.auth,T,h);const{email:R}=yield Xt(g.auth,T);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function uu(){return(uu=(0,f.Z)(function*(y,h,g){const v=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};g&&ga(v.auth,R,g);const{email:z}=yield fc(v.auth,R);z!==y.email&&(yield y.reload())})).apply(this,arguments)}function fl(y,h){return ma.apply(this,arguments)}function ma(){return(ma=(0,f.Z)(function*(y,h){return Nt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function cu(){return(cu=(0,f.Z)(function*(y,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const v=(0,O.m9)(y),R={idToken:yield v.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},z=yield Jn(v,fl(v.auth,R));v.displayName=z.displayName||null,v.photoURL=z.photoUrl||null;const de=v.providerData.find(({providerId:Fe})=>"password"===Fe);de&&(de.displayName=v.displayName,de.photoURL=v.photoURL),yield v._updateTokensIfNecessary(z)})).apply(this,arguments)}function du(y,h,g){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,f.Z)(function*(y,h,g){const{auth:v}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),g&&(R.password=g);const z=yield Jn(y,la(v,R));yield y._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class Oo{constructor(h,g,v={}){this.isNewUser=h,this.providerId=g,this.profile=v}}class xc extends Oo{constructor(h,g,v,T){super(h,g,v),this.username=T}}class hu extends Oo{constructor(h,g){super(h,"facebook.com",g)}}class Nr extends xc{constructor(h,g){super(h,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class dh extends Oo{constructor(h,g){super(h,"google.com",g)}}class pl extends xc{constructor(h,g,v){super(h,"twitter.com",g,v)}}function Bn(y){const{user:h,_tokenResponse:g}=y;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Sc(y){var h,g;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const z=null===(g=null===(h=nt(y.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(z)return new Oo(R,"anonymous"!==z&&"custom"!==z?z:null)}if(!v)return null;switch(v){case"facebook.com":return new hu(R,T);case"github.com":return new Nr(R,T);case"google.com":return new dh(R,T);case"twitter.com":return new pl(R,T,y.screenName||null);case"custom":case"anonymous":return new Oo(R,null);default:return new Oo(R,v,T)}}(g)}class rs{constructor(h,g){this.type=h,this.credential=g}static _fromIdtoken(h){return new rs("enroll",h)}static _fromMfaPendingCredential(h){return new rs("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,v;if(null==h?void 0:h.multiFactorSession){if(null===(g=h.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return rs._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(v=h.multiFactorSession)||void 0===v?void 0:v.idToken)return rs._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Js{constructor(h,g,v){this.session=h,this.hints=g,this.signInResolver=v}static _fromError(h,g){const v=rt(h),T=g.customData._serverResponse,R=(T.mfaInfo||[]).map(de=>Ts._fromServerResponse(v,de));B(T.mfaPendingCredential,v,"internal-error");const z=rs._fromMfaPendingCredential(T.mfaPendingCredential);return new Js(z,R,function(){var de=(0,f.Z)(function*(Fe){const Ke=yield Fe._process(v,z);delete T.mfaInfo,delete T.mfaPendingCredential;const at=Object.assign(Object.assign({},T),{idToken:Ke.idToken,refreshToken:Ke.refreshToken});switch(g.operationType){case"signIn":const ot=yield Kr._fromIdTokenResponse(v,g.operationType,at);return yield v._updateCurrentUser(ot.user),ot;case"reauthenticate":return B(g.user,v,"internal-error"),Kr._forOperation(g.user,g.operationType,at);default:De(v,"internal-error")}});return function(Fe){return de.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,f.Z)(function*(){return g.signInResolver(h)})()}}function Rc(y,h){return Nt(y,"POST","/v2/accounts/mfaEnrollment:start",Ht(y,h))}class ko{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(v=>Ts._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new ko(h)}getSession(){var h=this;return(0,f.Z)(function*(){return rs._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,g){var v=this;return(0,f.Z)(function*(){const T=h,R=yield v.getSession(),z=yield Jn(v.user,T._process(v.user.auth,R,g));return yield v.user._updateTokensIfNecessary(z),v.user.reload()})()}unenroll(h){var g=this;return(0,f.Z)(function*(){const v="string"==typeof h?h:h.uid,T=yield g.user.getIdToken(),R=yield Jn(g.user,function Xs(y,h){return Nt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ht(y,h))}(g.user.auth,{idToken:T,mfaEnrollmentId:v}));g.enrolledFactors=g.enrolledFactors.filter(({uid:z})=>z!==v),yield g.user._updateTokensIfNecessary(R);try{yield g.user.reload()}catch(z){if("auth/user-token-expired"!==z.code)throw z}})()}}const fu=new WeakMap,is="__sak";class pu{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(is,"1"),this.storage.removeItem(is),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const eo=(()=>{class y extends pu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,v)=>this.onStorageEvent(g,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function up(){const y=(0,O.z$)();return Qa(y)||Sr(y)}()&&function Gn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=vs(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),R=this.localCache[v];T!==R&&g(v,R,T)}}onStorageEvent(g,v=!1){if(!g.key)return void this.forAllChangedKeys((de,Fe,Ke)=>{this.notifyListeners(de,Ke)});const T=g.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const de=this.storage.getItem(T);if(g.newValue!==de)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!v)return}const R=()=>{const de=this.storage.getItem(T);!v&&this.localCache[T]===de||this.notifyListeners(T,de)},z=this.storage.getItem(T);!function ua(){return(0,O.w1)()&&10===document.documentMode}()||z===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,v){this.localCache[g]=v;const T=this.listeners[g];if(T)for(const R of Array.from(T))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,v){var T=()=>super._set,R=this;return(0,f.Z)(function*(){yield T().call(R,g,v),R.localCache[g]=JSON.stringify(v)})()}_get(g){var v=()=>super._get,T=this;return(0,f.Z)(function*(){const R=yield v().call(T,g);return T.localCache[g]=JSON.stringify(R),R})()}_remove(g){var v=()=>super._remove,T=this;return(0,f.Z)(function*(){yield v().call(T,g),delete T.localCache[g]})()}}return y.type="LOCAL",y})(),Hi=(()=>{class y extends pu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,v){}_removeListener(g,v){}}return y.type="SESSION",y})();let Nc=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const v=this.receivers.find(R=>R.isListeningto(g));if(v)return v;const T=new y(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var v=this;return(0,f.Z)(function*(){const T=g,{eventId:R,eventType:z,data:de}=T.data,Fe=v.handlersMap[z];if(!(null==Fe?void 0:Fe.size))return;T.ports[0].postMessage({status:"ack",eventId:R,eventType:z});const Ke=Array.from(Fe).map(function(){var ot=(0,f.Z)(function*(On){return On(T.origin,de)});return function(On){return ot.apply(this,arguments)}}()),at=yield function Fo(y){return Promise.all(y.map(function(){var h=(0,f.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(v){return{fulfilled:!1,reason:v}}});return function(g){return h.apply(this,arguments)}}()))}(Ke);T.ports[0].postMessage({status:"done",eventId:R,eventType:z,response:at})})()}_subscribe(g,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(v)}_unsubscribe(g,v){this.handlersMap[g]&&v&&this.handlersMap[g].delete(v),(!v||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ss(y="",h=10){let g="";for(let v=0;v<h;v++)g+=Math.floor(10*Math.random());return y+g}class Pr{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,v=50){var T=this;return(0,f.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let z,de;return new Promise((Fe,Ke)=>{const at=ss("",20);R.port1.start();const ot=setTimeout(()=>{Ke(new Error("unsupported_event"))},v);de={messageChannel:R,onMessage(On){const si=On;if(si.data.eventId===at)switch(si.data.status){case"ack":clearTimeout(ot),z=setTimeout(()=>{Ke(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Fe(si.data.response);break;default:clearTimeout(ot),clearTimeout(z),Ke(new Error("invalid_response"))}}},T.handlers.add(de),R.port1.addEventListener("message",de.onMessage),T.target.postMessage({eventType:h,eventId:at,data:g},[R.port2])}).finally(()=>{de&&T.removeMessageHandler(de)})})()}}function jt(){return window}function Lo(){return void 0!==jt().WorkerGlobalScope&&"function"==typeof jt().importScripts}function gl(){return(gl=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const yl="firebaseLocalStorageDb",jn="firebaseLocalStorage",Uo="fbase_key";class xs{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function ir(y,h){return y.transaction([jn],h?"readwrite":"readonly").objectStore(jn)}function gu(){const y=indexedDB.open(yl,1);return new Promise((h,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(jn,{keyPath:Uo})}catch(T){g(T)}}),y.addEventListener("success",(0,f.Z)(function*(){const v=y.result;v.objectStoreNames.contains(jn)?h(v):(v.close(),yield function _a(){const y=indexedDB.deleteDatabase(yl);return new xs(y).toPromise()}(),h(yield gu()))}))})}function as(y,h,g){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,f.Z)(function*(y,h,g){const v=ir(y,!0).put({[Uo]:h,value:g});return new xs(v).toPromise()})).apply(this,arguments)}function ln(){return(ln=(0,f.Z)(function*(y,h){const g=ir(y,!1).get(h),v=yield new xs(g).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Di(y,h){const g=ir(y,!0).delete(h);return new xs(g).toPromise()}const to=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,f.Z)(function*(){return g.db||(g.db=yield gu()),g.db})()}_withRetries(g){var v=this;return(0,f.Z)(function*(){let T=0;for(;;)try{const R=yield v._openDb();return yield g(R)}catch(R){if(T++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,f.Z)(function*(){return Lo()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,f.Z)(function*(){g.receiver=Nc._getInstance(function Pc(){return Lo()?self:null}()),g.receiver._subscribe("keyChanged",function(){var v=(0,f.Z)(function*(T,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(T,R){return v.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var v=(0,f.Z)(function*(T,R){return["keyChanged"]});return function(T,R){return v.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,f.Z)(function*(){var v,T;if(g.activeServiceWorker=yield function Vo(){return gl.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Pr(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(v=R[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=R[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var v=this;return(0,f.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function ml(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:g},v.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const g=yield gu();return yield as(g,is,"1"),yield Di(g,is),!0}catch(g){}return!1})()}_withPendingWrite(g){var v=this;return(0,f.Z)(function*(){v.pendingWrites++;try{yield g()}finally{v.pendingWrites--}})()}_set(g,v){var T=this;return(0,f.Z)(function*(){return T._withPendingWrite((0,f.Z)(function*(){return yield T._withRetries(R=>as(R,g,v)),T.localCache[g]=v,T.notifyServiceWorker(g)}))})()}_get(g){var v=this;return(0,f.Z)(function*(){const T=yield v._withRetries(R=>function mu(y,h){return ln.apply(this,arguments)}(R,g));return v.localCache[g]=T,T})()}_remove(g){var v=this;return(0,f.Z)(function*(){return v._withPendingWrite((0,f.Z)(function*(){return yield v._withRetries(T=>Di(T,g)),delete v.localCache[g],v.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,f.Z)(function*(){const v=yield g._withRetries(z=>{const de=ir(z,!1).getAll();return new xs(de).toPromise()});if(!v)return[];if(0!==g.pendingWrites)return[];const T=[],R=new Set;for(const{fbase_key:z,value:de}of v)R.add(z),JSON.stringify(g.localCache[z])!==JSON.stringify(de)&&(g.notifyListeners(z,de),T.push(z));for(const z of Object.keys(g.localCache))g.localCache[z]&&!R.has(z)&&(g.notifyListeners(z,null),T.push(z));return T})()}notifyListeners(g,v){this.localCache[g]=v;const T=this.listeners[g];if(T)for(const R of Array.from(T))R(v)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function wa(y,h){return Nt(y,"POST","/v2/accounts/mfaSignIn:start",Ht(y,h))}function Ea(){return(Ea=(0,f.Z)(function*(y){return(yield Nt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ba(y){return new Promise((h,g)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=h,v.onerror=T=>{const R=ve("internal-error");R.customData=T,g(R)},v.type="text/javascript",v.charset="UTF-8",function Bo(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(v)})}function Xr(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Ia=1e12;class yu{constructor(h){this.auth=h,this.counter=Ia,this._widgets=new Map}render(h,g){const v=this.counter;return this._widgets.set(v,new jo(h,this.auth.name,g||{})),this.counter++,v}reset(h){var g;const v=h||Ia;null===(g=this._widgets.get(v))||void 0===g||g.delete(),this._widgets.delete(v)}getResponse(h){var g;return(null===(g=this._widgets.get(h||Ia))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,f.Z)(function*(){var v;return null===(v=g._widgets.get(h||Ia))||void 0===v||v.execute(),""})()}}class jo{constructor(h,g,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;B(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function vl(y){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)h.push(g.charAt(Math.floor(Math.random()*g.length)));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const wl=Xr("rcb"),cn=new Zt(3e4,6e4);class gh{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!jt().grecaptcha}load(h,g=""){return B(function mh(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),h,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(jt().grecaptcha):new Promise((v,T)=>{const R=jt().setTimeout(()=>{T(ve(h,"network-request-failed"))},cn.get());jt()[wl]=()=>{jt().clearTimeout(R),delete jt()[wl];const de=jt().grecaptcha;if(!de)return void T(ve(h,"internal-error"));const Fe=de.render;de.render=(Ke,at)=>{const ot=Fe(Ke,at);return this.counter++,ot},this.hostLanguage=g,v(de)},ba(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:wl,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),T(ve(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!jt().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Oc{load(h){return(0,f.Z)(function*(){return new yu(h)})()}clearedOneInstance(){}}const El="recaptcha",kc={theme:"light",type:"image"};class bl{constructor(h,g=Object.assign({},kc),v){this.parameters=g,this.type=El,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=rt(v),this.isInvisible="invisible"===this.parameters.size,B("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;B(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Oc:new gh,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(g)||new Promise(R=>{const z=de=>{!de||(h.tokenChangeListeners.delete(z),R(de))};h.tokenChangeListeners.add(z),h.isInvisible&&v.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){B(!this.parameters.sitekey,this.auth,"argument-error"),B(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),B("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(v=>v(g)),"function"==typeof h)h(g);else if("string"==typeof h){const v=jt()[h];"function"==typeof v&&v(g)}}}assertNotDestroyed(){B(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const v=document.createElement("div");g.appendChild(v),g=v}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){B(st()&&!Lo(),h.auth,"internal-error"),yield function $o(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function us(y){return Ea.apply(this,arguments)}(h.auth);B(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return B(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Il{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=To._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function ei(){return(ei=(0,f.Z)(function*(y,h,g){const v=rt(y),T=yield yr(v,h,(0,O.m9)(g));return new Il(T,R=>fn(v,R))})).apply(this,arguments)}function Dl(){return(Dl=(0,f.Z)(function*(y,h,g){const v=(0,O.m9)(y);yield zt(!1,v,"phone");const T=yield yr(v.auth,h,(0,O.m9)(g));return new Il(T,R=>Wn(v,R))})).apply(this,arguments)}function Or(){return(Or=(0,f.Z)(function*(y,h,g){const v=(0,O.m9)(y),T=yield yr(v.auth,h,(0,O.m9)(g));return new Il(T,R=>ts(v,R))})).apply(this,arguments)}function yr(y,h,g){return ro.apply(this,arguments)}function ro(){return(ro=(0,f.Z)(function*(y,h,g){var v;const T=yield g.verify();try{let R;if(B("string"==typeof T,y,"argument-error"),B(g.type===El,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const z=R.session;if("phoneNumber"in R)return B("enroll"===z.type,y,"internal-error"),(yield Rc(y,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{B("signin"===z.type,y,"internal-error");const de=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return B(de,y,"missing-multi-factor-info"),(yield wa(y,{mfaPendingCredential:z.credential,mfaEnrollmentId:de,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield ep(y,{phoneNumber:R.phoneNumber,recaptchaToken:T});return z}}finally{g._reset()}})).apply(this,arguments)}function ti(){return(ti=(0,f.Z)(function*(y,h){yield ha((0,O.m9)(y),h)})).apply(this,arguments)}let Rs=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=rt(g)}verifyPhoneNumber(g,v){return yr(this.auth,g,(0,O.m9)(v))}static credential(g,v){return To._fromVerification(g,v)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:v,temporaryProof:T}=g;return v&&T?To._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Ci(y,h){return h?X(h):(B(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Da extends wi{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Is(h,this._buildIdpRequest())}_linkToIdToken(h,g){return Is(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return Is(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function yh(y){return zn(y.auth,new Da(y),y.bypassAuthState)}function _h(y){const{auth:h,user:g}=y;return B(g,h,"internal-error"),nu(g,new Da(y),y.bypassAuthState)}function dp(y){return kr.apply(this,arguments)}function kr(){return(kr=(0,f.Z)(function*(y){const{auth:h,user:g}=y;return B(g,h,"internal-error"),ha(g,new Da(y),y.bypassAuthState)})).apply(this,arguments)}class Fc{constructor(h,g,v,T,R=!1){this.auth=h,this.resolver=v,this.user=T,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,f.Z)(function*(v,T){h.pendingPromise={resolve:v,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(v,T){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,f.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:R,tenantId:z,error:de,type:Fe}=h;if(de)return void g.reject(de);const Ke={auth:g.auth,requestUri:v,sessionId:T,tenantId:z||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Fe)(Ke))}catch(at){g.reject(at)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return yh;case"linkViaPopup":case"linkViaRedirect":return dp;case"reauthViaPopup":case"reauthViaRedirect":return _h;default:De(this.auth,"internal-error")}}resolve(h){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ca=new Zt(2e3,1e4);function Gi(){return(Gi=(0,f.Z)(function*(y,h,g){const v=rt(y);je(y,h,nr);const T=Ci(v,g);return new io(v,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function Cl(){return(Cl=(0,f.Z)(function*(y,h,g){const v=(0,O.m9)(y);je(v.auth,h,nr);const T=Ci(v.auth,g);return new io(v.auth,"reauthViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}function ni(){return(ni=(0,f.Z)(function*(y,h,g){const v=(0,O.m9)(y);je(v.auth,h,nr);const T=Ci(v.auth,g);return new io(v.auth,"linkViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}let io=(()=>{class y extends Fc{constructor(g,v,T,R,z){super(g,v,R,z),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,f.Z)(function*(){const v=yield g.execute();return B(v,g.auth,"internal-error"),v})()}onExecution(){var g=this;return(0,f.Z)(function*(){W(1===g.filter.length,"Popup operations only handle one event");const v=ss();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],v),g.authWindow.associatedEvent=v,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(ve(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var v,T;this.pollId=(null===(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Ca.get())};g()}}return y.currentPopupAction=null,y})();const cs=new Map;class Tl extends Fc{constructor(h,g,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,f.Z)(function*(){let v=cs.get(g.auth._key());if(!v){try{const R=(yield function Al(y,h){return qi.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;v=()=>Promise.resolve(R)}catch(T){v=()=>Promise.reject(T)}cs.set(g.auth._key(),v)}return g.bypassAuthState||cs.set(g.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,v=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(v,h);if("unknown"!==h.type){if(h.eventId){const T=yield v.auth._redirectUserForId(h.eventId);if(T)return v.user=T,g().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function qi(){return(qi=(0,f.Z)(function*(y,h){const g=F(h),v=M(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(g));return yield v._remove(g),T})).apply(this,arguments)}function Ta(y,h){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,f.Z)(function*(y,h){return M(y)._set(F(h),"true")})).apply(this,arguments)}function C(y,h){cs.set(y._key(),h)}function M(y){return X(y._redirectPersistence)}function F(y){return xn("pendingRedirect",y.config.apiKey,y.name)}function Me(){return(Me=(0,f.Z)(function*(y,h,g){const v=rt(y);je(y,h,nr);const T=Ci(v,g);return yield Ta(T,v),T._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function pt(){return(pt=(0,f.Z)(function*(y,h,g){const v=(0,O.m9)(y);je(v.auth,h,nr);const T=Ci(v.auth,g);yield Ta(T,v.auth);const R=yield $n(v);return T._openRedirect(v.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function En(){return(En=(0,f.Z)(function*(y,h,g){const v=(0,O.m9)(y);je(v.auth,h,nr);const T=Ci(v.auth,g);yield zt(!1,v,h.providerId),yield Ta(T,v.auth);const R=yield $n(v);return T._openRedirect(v.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function Ns(){return(Ns=(0,f.Z)(function*(y,h){return yield rt(y)._initializationPromise,zi(y,h,!1)})).apply(this,arguments)}function zi(y,h){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,f.Z)(function*(y,h,g=!1){const v=rt(y),T=Ci(v,h),z=yield new Tl(v,T,g).execute();return z&&!g&&(delete z.user._redirectEventId,yield v._persistUserIfCurrent(z.user),yield v._setRedirectUser(null,h)),z})).apply(this,arguments)}function $n(y){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,f.Z)(function*(y){const h=ss(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Vc{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(g=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Sl(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _u(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var v;if(h.error&&!_u(h)){const T=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";g.onError(ve(this.auth,T))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const v=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Uc(h))}saveEventToCache(h){this.cachedEventUids.add(Uc(h)),this.lastProcessedEventTime=Date.now()}}function Uc(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function _u({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function vu(y){return xl.apply(this,arguments)}function xl(){return(xl=(0,f.Z)(function*(y,h={}){return Nt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Bc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sa=/^https?/;function jc(){return(jc=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield vu(y);for(const g of h)try{if(Km(g))return}catch(v){}De(y,"unauthorized-domain")})).apply(this,arguments)}function Km(y){const h=Pe(),{protocol:g,hostname:v}=new URL(h);if(y.startsWith("chrome-extension://")){const z=new URL(y);return""===z.hostname&&""===v?"chrome-extension:"===g&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&z.hostname===v}if(!Sa.test(g))return!1;if(Bc.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const $c=new Zt(3e4,6e4);function Hc(){const y=jt().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Ml=null;function Ym(y){return Ml=Ml||function wh(y){return new Promise((h,g)=>{var v,T,R;function z(){Hc(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Hc(),g(ve(y,"network-request-failed"))},timeout:$c.get()})}if(null===(T=null===(v=jt().gapi)||void 0===v?void 0:v.iframes)||void 0===T?void 0:T.Iframe)h(gapi.iframes.getContext());else{if(!(null===(R=jt().gapi)||void 0===R?void 0:R.load)){const de=Xr("iframefcb");return jt()[de]=()=>{gapi.load?z():g(ve(y,"network-request-failed"))},ba(`https://apis.google.com/js/api.js?onload=${de}`).catch(Fe=>g(Fe))}z()}}).catch(h=>{throw Ml=null,h})}(y),Ml}const Rl=new Zt(5e3,15e3),Nl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},h0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function f0(y){const h=y.config;B(h.authDomain,y,"auth-domain-config-required");const g=h.emulator?yn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:y.name,v:ae.SDK_VERSION},T=h0.get(y.config.apiHost);T&&(v.eid=T);const R=y._getFrameworks();return R.length&&(v.fw=R.join(",")),`${g}?${(0,O.xO)(v).slice(1)}`}function Eu(){return Eu=(0,f.Z)(function*(y){const h=yield Ym(y),g=jt().gapi;return B(g,y,"internal-error"),h.open({where:document.body,url:f0(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Nl,dontclear:!0},v=>new Promise(function(){var T=(0,f.Z)(function*(R,z){yield v.restyle({setHideOnLeave:!1});const de=ve(y,"network-request-failed"),Fe=jt().setTimeout(()=>{z(de)},Rl.get());function Ke(){jt().clearTimeout(Fe),R(v)}v.ping(Ke).then(Ke,()=>{z(de)})});return function(R,z){return T.apply(this,arguments)}}()))}),Eu.apply(this,arguments)}const qc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class pp{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function Ps(y,h,g,v,T,R){B(y.config.authDomain,y,"auth-domain-config-required"),B(y.config.apiKey,y,"invalid-api-key");const z={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:v,v:ae.SDK_VERSION,eventId:T};if(h instanceof nr){h.setDefaultLanguage(y.languageCode),z.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(z.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Fe,Ke]of Object.entries(R||{}))z[Fe]=Ke}if(h instanceof qs){const Fe=h.getScopes().filter(Ke=>""!==Ke);Fe.length>0&&(z.scopes=Fe.join(","))}y.tenantId&&(z.tid=y.tenantId);const de=z;for(const Fe of Object.keys(de))void 0===de[Fe]&&delete de[Fe];return`${function bu({config:y}){return y.emulator?yn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(de).slice(1)}`}const Ih="webStorageSupport";class Ch extends class g0{constructor(h){this.factorId=h}_process(h,g,v){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,v);case"signin":return this._finalizeSignIn(h,g.credential);default:return _e("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Ch(h)}_finalizeEnroll(h,g,v){return function op(y,h){return Nt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ht(y,h))}(h,{idToken:g,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function _l(y,h){return Nt(y,"POST","/v2/accounts/mfaSignIn:finalize",Ht(y,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let m0=(()=>{class y{constructor(){}static assertion(g){return Ch._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Iu="@firebase/auth";class Th{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,f.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(v=>{var T;h((null===(T=v)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);!g||(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function xa(){return window}function Ai(){return(Ai=(0,f.Z)(function*(y,h,g){var v;const{BuildInfo:T}=xa();W(h.sessionId,"AuthEvent did not contain a session ID");const R=yield DI(h.sessionId),z={};return Sr()?z.ibi=T.packageName:pr()?z.apn=T.packageName:De(y,"operation-not-supported-in-this-environment"),T.displayName&&(z.appDisplayName=T.displayName),z.sessionId=R,Ps(y,g,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,z)})).apply(this,arguments)}function Ma(){return(Ma=(0,f.Z)(function*(y){const{BuildInfo:h}=xa(),g={};Sr()?g.iosBundleId=h.packageName:pr()?g.androidPackageName=h.packageName:De(y,"operation-not-supported-in-this-environment"),yield vu(y,g)})).apply(this,arguments)}function xh(){return(xh=(0,f.Z)(function*(y,h,g){const{cordova:v}=xa();let T=()=>{};try{yield new Promise((R,z)=>{let de=null;function Fe(){var ot;R();const On=null===(ot=v.plugins.browsertab)||void 0===ot?void 0:ot.close;"function"==typeof On&&On(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Ke(){de||(de=window.setTimeout(()=>{z(ve(y,"redirect-cancelled-by-user"))},2e3))}function at(){"visible"===(null==document?void 0:document.visibilityState)&&Ke()}h.addPassiveListener(Fe),document.addEventListener("resume",Ke,!1),pr()&&document.addEventListener("visibilitychange",at,!1),T=()=>{h.removePassiveListener(Fe),document.removeEventListener("resume",Ke,!1),document.removeEventListener("visibilitychange",at,!1),de&&window.clearTimeout(de)}})}finally{T()}})).apply(this,arguments)}function DI(y){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,f.Z)(function*(y){const h=zc(y),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function zc(y){if(W(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),g=new Uint8Array(h);for(let v=0;v<y.length;v++)g[v]=y.charCodeAt(v);return g}!function Ah(y){(0,ae._registerComponent)(new ue.wA("auth",(h,{options:g})=>{const v=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),{apiKey:R,authDomain:z}=v.options;return((de,Fe)=>{B(R&&!R.includes(":"),"invalid-api-key",{appName:de.name}),B(!(null==z?void 0:z.includes(":")),"argument-error",{appName:de.name});const Ke={apiKey:R,authDomain:z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Co(y)},at=new qe(de,Fe,Ke);return function oe(y,h){const g=(null==h?void 0:h.persistence)||[],v=(Array.isArray(g)?g:[g]).map(X);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(v,null==h?void 0:h.popupRedirectResolver)}(at,g),at})(v,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,v)=>{h.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new ue.wA("auth-internal",h=>{const g=rt(h.getProvider("auth").getImmediate());return new Th(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(Iu,"0.20.2",function Xm(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ae.registerVersion)(Iu,"0.20.2","esm2017")}("Browser");class v0 extends Vc{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function wp(y){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,f.Z)(function*(y){const h=yield Kc()._get(Cu(y));return h&&(yield Kc()._remove(Cu(y))),h})).apply(this,arguments)}function Ep(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const v=Math.floor(Math.random()*h.length);y.push(h.charAt(v))}return y.join("")}function Kc(){return X(eo)}function Cu(y){return xn("authEvent",y.config.apiKey,y.name)}function Qc(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...g]=y.split("?");return(0,O.zd)(g.join("?"))}function Jc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function Xc(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Dp(y=(0,O.z$)()){return!("file:"!==Xc()&&"ionic:"!==Xc()&&"capacitor:"!==Xc()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Cp(){try{const y=self.localStorage,h=ss();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Nh(y=(0,O.z$)()){return function Tu(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Vr(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return gt()&&(0,O.hl)()}return!1}function gt(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function dn(){return(function E0(){return"http:"===Xc()||"https:"===Xc()}()||(0,O.ru)()||Dp())&&!function b0(){return(0,O.b$)()||(0,O.UG)()}()&&Cp()&&!gt()}function _r(){return Dp()&&"undefined"!=typeof document}function Ph(){return(Ph=(0,f.Z)(function*(){return!!_r()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const ri={LOCAL:"local",NONE:"none",SESSION:"session"},Au=B,kl="persistence";function td(y){return Su.apply(this,arguments)}function Su(){return(Su=(0,f.Z)(function*(y){yield y._initializationPromise;const h=rd(),g=xn(kl,y.config.apiKey,y.name);h&&h.setItem(g,y._getPersistence())})).apply(this,arguments)}function rd(){var y;try{return(null===(y=function iy(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const Oh=B;class so{constructor(){this.browserResolver=X(class Jm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hi,this._completeRedirectFn=zi,this._overrideRedirectResult=C}_openPopup(h,g,v,T){var R=this;return(0,f.Z)(function*(){var z;W(null===(z=R.eventManagers[h._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const de=Ps(h,g,v,Pe(),T);return function gp(y,h,g,v=500,T=600){const R=Math.max((window.screen.availHeight-T)/2,0).toString(),z=Math.max((window.screen.availWidth-v)/2,0).toString();let de="";const Fe=Object.assign(Object.assign({},qc),{width:v.toString(),height:T.toString(),top:R,left:z}),Ke=(0,O.z$)().toLowerCase();g&&(de=aa(Ke)?"_blank":g),oa(Ke)&&(h=h||"http://localhost",Fe.scrollbars="yes");const at=Object.entries(Fe).reduce((On,[si,Pa])=>`${On}${si}=${Pa},`,"");if(function Hs(y=(0,O.z$)()){var h;return Sr(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Ke)&&"_self"!==de)return function Qm(y,h){const g=document.createElement("a");g.href=y,g.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(v)}(h||"",de),new pp(null);const ot=window.open(h||"",de,at);B(ot,y,"popup-blocked");try{ot.focus()}catch(On){}return new pp(ot)}(h,de,ss())})()}_openRedirect(h,g,v,T){var R=this;return(0,f.Z)(function*(){return yield R._originValidation(h),function Et(y){jt().location.href=y}(Ps(h,g,v,Pe(),T)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:T,promise:R}=this.eventManagers[g];return T?Promise.resolve(T):(W(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(h);return this.eventManagers[g]={promise:v},v.catch(()=>{delete this.eventManagers[g]}),v}initAndGetManager(h){var g=this;return(0,f.Z)(function*(){const v=yield function II(y){return Eu.apply(this,arguments)}(h),T=new Vc(h);return v.register("authEvent",R=>(B(null==R?void 0:R.authEvent,h,"invalid-auth-event"),{status:T.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:T},g.iframes[h._key()]=v,T})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(Ih,{type:Ih},T=>{var R;const z=null===(R=null==T?void 0:T[0])||void 0===R?void 0:R[Ih];void 0!==z&&g(!!z),De(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function wu(y){return jc.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return vs()||Qa()||Sr()}}),this.cordovaResolver=X(class ny{constructor(){this._redirectPersistence=Hi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=zi,this._overrideRedirectResult=C}_initialize(h){var g=this;return(0,f.Z)(function*(){const v=h._key();let T=g.eventManagers.get(v);return T||(T=new v0(h),g.eventManagers.set(v,T),g.attachCallbackListeners(h,T)),T})()}_openPopup(h){De(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,v,T){var R=this;return(0,f.Z)(function*(){!function _0(y){var h,g,v,T,R,z,de,Fe,Ke,at;const ot=xa();B("function"==typeof(null===(h=null==ot?void 0:ot.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),B(void 0!==(null===(g=null==ot?void 0:ot.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),B("function"==typeof(null===(R=null===(T=null===(v=null==ot?void 0:ot.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B("function"==typeof(null===(Fe=null===(de=null===(z=null==ot?void 0:ot.cordova)||void 0===z?void 0:z.plugins)||void 0===de?void 0:de.browsertab)||void 0===Fe?void 0:Fe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B("function"==typeof(null===(at=null===(Ke=null==ot?void 0:ot.cordova)||void 0===Ke?void 0:Ke.InAppBrowser)||void 0===at?void 0:at.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const z=yield R._initialize(h);yield z.initialized(),z.resetRedirect(),function I(){cs.clear()}(),yield R._originValidation(h);const de=function ey(y,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:Ep(),postBody:null,tenantId:y.tenantId,error:ve(y,"no-auth-event")}}(h,v,T);yield function qo(y,h){return Kc()._set(Cu(y),h)}(h,de);const Fe=yield function _p(y,h,g){return Ai.apply(this,arguments)}(h,de,g),Ke=yield function Sh(y){const{cordova:h}=xa();return new Promise(g=>{h.plugins.browsertab.isAvailable(v=>{let T=null;v?h.plugins.browsertab.openUrl(y):T=h.InAppBrowser.open(y,function hc(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(T)})})}(Fe);return function vp(y,h,g){return xh.apply(this,arguments)}(h,z,Ke)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Ol(y){return Ma.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:v,handleOpenURL:T,BuildInfo:R}=xa(),z=setTimeout((0,f.Z)(function*(){yield wp(h),g.onEvent(Jc())}),500),de=function(){var at=(0,f.Z)(function*(ot){clearTimeout(z);const On=yield wp(h);let si=null;On&&(null==ot?void 0:ot.url)&&(si=function ty(y,h){var g,v;const T=function Yc(y){const h=Qc(y),g=h.link?decodeURIComponent(h.link):void 0,v=Qc(g).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Qc(T).link||T||v||g||y}(h);if(T.includes("/__/auth/callback")){const R=Qc(T),z=R.firebaseError?function Mh(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(R.firebaseError)):null,de=null===(v=null===(g=null==z?void 0:z.code)||void 0===g?void 0:g.split("auth/"))||void 0===v?void 0:v[1],Fe=de?ve(de):null;return Fe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(On,ot.url)),g.onEvent(si||Jc())});return function(On){return at.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,de);const Fe=T,Ke=`${R.packageName.toLowerCase()}://`;xa().handleOpenURL=function(){var at=(0,f.Z)(function*(ot){if(ot.toLowerCase().startsWith(Ke)&&de({url:ot}),"function"==typeof Fe)try{Fe(ot)}catch(On){console.error(On)}});return function(ot){return at.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Hi,this._completeRedirectFn=zi,this._overrideRedirectResult=C}_initialize(h){var g=this;return(0,f.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,v,T){var R=this;return(0,f.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,g,v,T)})()}_openRedirect(h,g,v,T){var R=this;return(0,f.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,g,v,T)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return _r()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Oh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const g=yield function Na(){return Ph.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function oo(y){return y.unwrap()}function Si(y){return Ap(y)}function Ap(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Rs.credentialFromResult(y);const g=h.providerId;if(!g||"password"===g)return null;let v;switch(g){case"google.com":v=Ec;break;case"facebook.com":v=Ao;break;case"github.com":v=lh;break;case"twitter.com":v=Ic;break;default:const{oauthIdToken:T,oauthAccessToken:R,oauthTokenSecret:z,pendingToken:de,nonce:Fe}=h;return R||z||T||de?de?g.startsWith("saml.")?zs._create(g,de):es._fromParams({providerId:g,signInMethod:g,pendingToken:de,idToken:T,accessToken:R}):new Ui(g).credential({idToken:T,accessToken:R,rawNonce:Fe}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function tn(y,h){return h.catch(g=>{throw g instanceof O.ZR&&function Fl(y,h){var g;const v=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new sy(y,function Nn(y,h){var g;const v=(0,O.m9)(y),T=h;return B(h.customData.operationType,v,"argument-error"),B(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,v,"argument-error"),Js._fromError(v,T)}(y,h));else if(v){const T=Ap(h),R=h;T&&(R.credential=T,R.tenantId=v.tenantId||void 0,R.email=v.email||void 0,R.phoneNumber=v.phoneNumber||void 0)}}(y,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:Si(g),additionalUserInfo:Bn(g),user:ii.getOrCreate(T)}})}function Ll(y,h){return xu.apply(this,arguments)}function xu(){return(xu=(0,f.Z)(function*(y,h){const g=yield h;return{verificationId:g.verificationId,confirm:v=>tn(y,g.confirm(v))}})).apply(this,arguments)}class sy{constructor(h,g){this.resolver=g,this.auth=function Tp(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return tn(oo(this.auth),this.resolver.resolveSignIn(h))}}class ii{constructor(h){this._delegate=h,this.multiFactor=function ap(y){const h=(0,O.m9)(y);return fu.has(h)||fu.set(h,ko._fromUser(h)),fu.get(h)}(h)}static getOrCreate(h){return ii.USER_MAP.has(h)||ii.USER_MAP.set(h,new ii(h)),ii.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,f.Z)(function*(){return tn(g.auth,Wn(g._delegate,h))})()}linkWithPhoneNumber(h,g){var v=this;return(0,f.Z)(function*(){return Ll(v.auth,function Pn(y,h,g){return Dl.apply(this,arguments)}(v._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,f.Z)(function*(){return tn(g.auth,function vh(y,h,g){return ni.apply(this,arguments)}(g._delegate,h,so))})()}linkWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield td(rt(g.auth)),function Lt(y,h,g){return function vt(y,h,g){return En.apply(this,arguments)}(y,h,g)}(g._delegate,h,so)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,f.Z)(function*(){return tn(g.auth,ts(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return Ll(this.auth,function cp(y,h,g){return Or.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return tn(this.auth,function Lc(y,h,g){return Cl.apply(this,arguments)}(this._delegate,h,so))}reauthenticateWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield td(rt(g.auth)),function Qe(y,h,g){return function Je(y,h,g){return pt.apply(this,arguments)}(y,h,g)}(g._delegate,h,so)})()}sendEmailVerification(h){return function bi(y,h){return hl.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,f.Z)(function*(){return yield function ch(y,h){return en.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function Tc(y,h){return du((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Ac(y,h){return du((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Ms(y,h){return ti.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function lu(y,h){return cu.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function au(y,h,g){return uu.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ii.USER_MAP=new WeakMap;const xi=B;let ao=(()=>{class y{constructor(g,v){if(this.app=g,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;xi(T,"invalid-api-key",{appName:g.name}),xi(T,"invalid-api-key",{appName:g.name});const R="undefined"!=typeof window?so:void 0;this._delegate=v.initialize({options:{persistence:Vl(T,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Re),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ii.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,v){!function Mr(y,h,g){const v=rt(y);B(v._canInitEmulator,v,"emulator-config-failed"),B(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const T=!!(null==g?void 0:g.disableWarnings),R=Oi(h),{host:z,port:de}=function Dn(y){const h=Oi(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!g)return{host:"",port:null};const v=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const R=T[1];return{host:R,port:ki(v.substr(R.length+1))}}{const[R,z]=v.split(":");return{host:R,port:ki(z)}}}(h);v.config.emulator={url:`${R}//${z}${null===de?"":`:${de}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:z,port:de,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function rn(){function y(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,v)}applyActionCode(g){return function No(y,h){return Ce.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Pt(this._delegate,g)}confirmPasswordReset(g,v){return function iu(y,h,g){return ul.apply(this,arguments)}(this._delegate,g,v)}createUserWithEmailAndPassword(g,v){var T=this;return(0,f.Z)(function*(){return tn(T._delegate,function Ks(y,h,g){return Yr.apply(this,arguments)}(T._delegate,g,v))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function ou(y,h){return As.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Cc(y,h){const g=tu.parseLink(h);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,f.Z)(function*(){xi(dn(),g._delegate,"operation-not-supported-in-this-environment");const v=yield function Zn(y,h){return Ns.apply(this,arguments)}(g._delegate,so);return v?tn(g._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Rh(y,h){rt(y)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,v,T){const{next:R,error:z,complete:de}=sr(g,v,T);return this._delegate.onAuthStateChanged(R,z,de)}onIdTokenChanged(g,v,T){const{next:R,error:z,complete:de}=sr(g,v,T);return this._delegate.onIdTokenChanged(R,z,de)}sendSignInLinkToEmail(g,v){return function cl(y,h,g){return dl.apply(this,arguments)}(this._delegate,g,v)}sendPasswordResetEmail(g,v){return function al(y,h,g){return ru.apply(this,arguments)}(this._delegate,g,v||void 0)}setPersistence(g){var v=this;return(0,f.Z)(function*(){let T;switch(function ed(y,h){Au(Object.values(ri).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?Au(h!==ri.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Au(h===ri.NONE,y,"unsupported-persistence-type"):gt()?Au(h===ri.NONE||h===ri.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Au(h===ri.NONE||Cp(),y,"unsupported-persistence-type")}(v._delegate,g),g){case ri.SESSION:T=Hi;break;case ri.LOCAL:T=(yield X(to)._isAvailable())?to:eo;break;case ri.NONE:T=yt;break;default:return De("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return tn(this._delegate,function Dc(y){return rl.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return tn(this._delegate,fn(this._delegate,g))}signInWithCustomToken(g){return tn(this._delegate,function Ro(y,h){return dt.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,v){return tn(this._delegate,function ll(y,h,g){return fn((0,O.m9)(y),wc.credential(h,g))}(this._delegate,g,v))}signInWithEmailLink(g,v){return tn(this._delegate,function ip(y,h,g){return ns.apply(this,arguments)}(this._delegate,g,v))}signInWithPhoneNumber(g,v){return Ll(this._delegate,function wn(y,h,g){return ei.apply(this,arguments)}(this._delegate,g,v))}signInWithPopup(g){var v=this;return(0,f.Z)(function*(){return xi(dn(),v._delegate,"operation-not-supported-in-this-environment"),tn(v._delegate,function hp(y,h,g){return Gi.apply(this,arguments)}(v._delegate,g,so))})()}signInWithRedirect(g){var v=this;return(0,f.Z)(function*(){return xi(dn(),v._delegate,"operation-not-supported-in-this-environment"),yield td(v._delegate),function Y(y,h,g){return function re(y,h,g){return Me.apply(this,arguments)}(y,h,g)}(v._delegate,g,so)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function un(y,h){return su.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=ri,y})();function sr(y,h,g){let v=y;"function"!=typeof y&&({next:v,error:h,complete:g}=y);const T=v;return{next:z=>T(z&&ii.getOrCreate(z)),error:h,complete:g}}function Vl(y,h){const g=function nd(y,h){const g=rd();if(!g)return[];const v=xn(kl,y,h);switch(g.getItem(v)){case ri.NONE:return[yt];case ri.LOCAL:return[to,Hi];case ri.SESSION:return[Hi];default:return[]}}(y,h);if("undefined"!=typeof self&&!g.includes(to)&&g.push(to),"undefined"!=typeof window)for(const v of[eo,Hi])g.includes(v)||g.push(v);return g.includes(yt)||g.push(yt),g}class Ul{constructor(){this.providerId="phone",this._delegate=new Rs(oo(J.Z.auth()))}static credential(h,g){return Rs.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}Ul.PHONE_SIGN_IN_METHOD=Rs.PHONE_SIGN_IN_METHOD,Ul.PROVIDER_ID=Rs.PROVIDER_ID;const Sp=B;class oy{constructor(h,g,v=J.Z.app()){var T;Sp(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new bl(h,g,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Mu(y){y.INTERNAL.registerComponent(new ue.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new ao(g,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:wc,FacebookAuthProvider:Ao,GithubAuthProvider:lh,GoogleAuthProvider:Ec,OAuthProvider:Ui,SAMLAuthProvider:gr,PhoneAuthProvider:Ul,PhoneMultiFactorGenerator:m0,RecaptchaVerifier:oy,TwitterAuthProvider:Ic,Auth:ao,AuthCredential:wi,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.15")}(J.Z)},8306:(Ye,we,P)=>{P.d(we,{y:()=>$});var f=P(2961),J=P(727),O=P(8822),ae=P(4671);var ue=P(2416),se=P(576),ce=P(2806);let $=(()=>{class Ae{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const he=new Ae;return he.source=this,he.operator=Le,he}subscribe(Le,he,be){const Ge=function He(Ae){return Ae&&Ae instanceof f.Lv||function ee(Ae){return Ae&&(0,se.m)(Ae.next)&&(0,se.m)(Ae.error)&&(0,se.m)(Ae.complete)}(Ae)&&(0,J.Nn)(Ae)}(Le)?Le:new f.Hp(Le,he,be);return(0,ce.x)(()=>{const{operator:We,source:De}=this;Ge.add(We?We.call(Ge,De):De?this._subscribe(Ge):this._trySubscribe(Ge))}),Ge}_trySubscribe(Le){try{return this._subscribe(Le)}catch(he){Le.error(he)}}forEach(Le,he){return new(he=U(he))((be,Ge)=>{const We=new f.Hp({next:De=>{try{Le(De)}catch(ve){Ge(ve),We.unsubscribe()}},error:Ge,complete:be});this.subscribe(We)})}_subscribe(Le){var he;return null===(he=this.source)||void 0===he?void 0:he.subscribe(Le)}[O.L](){return this}pipe(...Le){return function pe(Ae){return 0===Ae.length?ae.y:1===Ae.length?Ae[0]:function(Le){return Ae.reduce((he,be)=>be(he),Le)}}(Le)(this)}toPromise(Le){return new(Le=U(Le))((he,be)=>{let Ge;this.subscribe(We=>Ge=We,We=>be(We),()=>he(Ge))})}}return Ae.create=Re=>new Ae(Re),Ae})();function U(Ae){var Re;return null!==(Re=null!=Ae?Ae:ue.v.Promise)&&void 0!==Re?Re:Promise}},7579:(Ye,we,P)=>{P.d(we,{x:()=>ue});var f=P(8306),J=P(727);const ae=(0,P(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var te=P(8737),pe=P(2806);let ue=(()=>{class ce extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(U){const ee=new se(this,this);return ee.operator=U,ee}_throwIfClosed(){if(this.closed)throw new ae}next(U){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(U)}})}error(U){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=U;const{observers:ee}=this;for(;ee.length;)ee.shift().error(U)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:U}=this;for(;U.length;)U.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var U;return(null===(U=this.observers)||void 0===U?void 0:U.length)>0}_trySubscribe(U){return this._throwIfClosed(),super._trySubscribe(U)}_subscribe(U){return this._throwIfClosed(),this._checkFinalizedStatuses(U),this._innerSubscribe(U)}_innerSubscribe(U){const{hasError:ee,isStopped:He,observers:Ae}=this;return ee||He?J.Lc:(this.currentObservers=null,Ae.push(U),new J.w0(()=>{this.currentObservers=null,(0,te.P)(Ae,U)}))}_checkFinalizedStatuses(U){const{hasError:ee,thrownError:He,isStopped:Ae}=this;ee?U.error(He):Ae&&U.complete()}asObservable(){const U=new f.y;return U.source=this,U}}return ce.create=($,U)=>new se($,U),ce})();class se extends ue{constructor($,U){super(),this.destination=$,this.source=U}next($){var U,ee;null===(ee=null===(U=this.destination)||void 0===U?void 0:U.next)||void 0===ee||ee.call(U,$)}error($){var U,ee;null===(ee=null===(U=this.destination)||void 0===U?void 0:U.error)||void 0===ee||ee.call(U,$)}complete(){var $,U;null===(U=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===U||U.call($)}_subscribe($){var U,ee;return null!==(ee=null===(U=this.source)||void 0===U?void 0:U.subscribe($))&&void 0!==ee?ee:J.Lc}}},2961:(Ye,we,P)=>{P.d(we,{Hp:()=>Le,Lv:()=>ee});var f=P(576),J=P(727),O=P(2416),ae=P(7849);function te(){}const pe=ce("C",void 0,void 0);function ce(De,ve,Ee){return{kind:De,value:ve,error:Ee}}var $=P(3410),U=P(2806);class ee extends J.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,J.Nn)(ve)&&ve.add(this)):this.destination=We}static create(ve,Ee,je){return new Le(ve,Ee,je)}next(ve){this.isStopped?Ge(function se(De){return ce("N",De,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Ge(function ue(De){return ce("E",void 0,De)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Ge(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Ae(De,ve){return He.call(De,ve)}class Re{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(ve)}catch(je){he(je)}}error(ve){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(ve)}catch(je){he(je)}else he(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(Ee){he(Ee)}}}class Le extends ee{constructor(ve,Ee,je){let Ue;if(super(),(0,f.m)(ve)||!ve)Ue={next:null!=ve?ve:void 0,error:null!=Ee?Ee:void 0,complete:null!=je?je:void 0};else{let B;this&&O.v.useDeprecatedNextContext?(B=Object.create(ve),B.unsubscribe=()=>this.unsubscribe(),Ue={next:ve.next&&Ae(ve.next,B),error:ve.error&&Ae(ve.error,B),complete:ve.complete&&Ae(ve.complete,B)}):Ue=ve}this.destination=new Re(Ue)}}function he(De){O.v.useDeprecatedSynchronousErrorHandling?(0,U.O)(De):(0,ae.h)(De)}function Ge(De,ve){const{onStoppedNotification:Ee}=O.v;Ee&&$.z.setTimeout(()=>Ee(De,ve))}const We={closed:!0,next:te,error:function be(De){throw De},complete:te}},727:(Ye,we,P)=>{P.d(we,{Lc:()=>pe,w0:()=>te,Nn:()=>ue});var f=P(576);const O=(0,P(3888).d)(ce=>function(U){ce(this),this.message=U?`${U.length} errors occurred during unsubscription:\n${U.map((ee,He)=>`${He+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=U});var ae=P(8737);class te{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:U}=this;if(U)if(this._parentage=null,Array.isArray(U))for(const Ae of U)Ae.remove(this);else U.remove(this);const{initialTeardown:ee}=this;if((0,f.m)(ee))try{ee()}catch(Ae){$=Ae instanceof O?Ae.errors:[Ae]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Ae of He)try{se(Ae)}catch(Re){$=null!=$?$:[],Re instanceof O?$=[...$,...Re.errors]:$.push(Re)}}if($)throw new O($)}}add($){var U;if($&&$!==this)if(this.closed)se($);else{if($ instanceof te){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(U=this._finalizers)&&void 0!==U?U:[]).push($)}}_hasParent($){const{_parentage:U}=this;return U===$||Array.isArray(U)&&U.includes($)}_addParent($){const{_parentage:U}=this;this._parentage=Array.isArray(U)?(U.push($),U):U?[U,$]:$}_removeParent($){const{_parentage:U}=this;U===$?this._parentage=null:Array.isArray(U)&&(0,ae.P)(U,$)}remove($){const{_finalizers:U}=this;U&&(0,ae.P)(U,$),$ instanceof te&&$._removeParent(this)}}te.EMPTY=(()=>{const ce=new te;return ce.closed=!0,ce})();const pe=te.EMPTY;function ue(ce){return ce instanceof te||ce&&"closed"in ce&&(0,f.m)(ce.remove)&&(0,f.m)(ce.add)&&(0,f.m)(ce.unsubscribe)}function se(ce){(0,f.m)(ce)?ce():ce.unsubscribe()}},2416:(Ye,we,P)=>{P.d(we,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Ye,we,P)=>{P.d(we,{E:()=>J});const J=new(P(8306).y)(te=>te.complete())},8996:(Ye,we,P)=>{P.d(we,{D:()=>ve});var f=P(8421),J=P(5363),O=P(9468),pe=P(8306),se=P(2202),ce=P(576),$=P(9672);function ee(Ee,je){if(!Ee)throw new Error("Iterable cannot be null");return new pe.y(Ue=>{(0,$.f)(Ue,je,()=>{const B=Ee[Symbol.asyncIterator]();(0,$.f)(Ue,je,()=>{B.next().then(_e=>{_e.done?Ue.complete():Ue.next(_e.value)})},0,!0)})})}var He=P(3670),Ae=P(8239),Re=P(1144),Le=P(6495),he=P(2206),be=P(4532),Ge=P(3260);function ve(Ee,je){return je?function De(Ee,je){if(null!=Ee){if((0,He.c)(Ee))return function ae(Ee,je){return(0,f.Xf)(Ee).pipe((0,O.R)(je),(0,J.Q)(je))}(Ee,je);if((0,Re.z)(Ee))return function ue(Ee,je){return new pe.y(Ue=>{let B=0;return je.schedule(function(){B===Ee.length?Ue.complete():(Ue.next(Ee[B++]),Ue.closed||this.schedule())})})}(Ee,je);if((0,Ae.t)(Ee))return function te(Ee,je){return(0,f.Xf)(Ee).pipe((0,O.R)(je),(0,J.Q)(je))}(Ee,je);if((0,he.D)(Ee))return ee(Ee,je);if((0,Le.T)(Ee))return function U(Ee,je){return new pe.y(Ue=>{let B;return(0,$.f)(Ue,je,()=>{B=Ee[se.h](),(0,$.f)(Ue,je,()=>{let _e,W;try{({value:_e,done:W}=B.next())}catch(ne){return void Ue.error(ne)}W?Ue.complete():Ue.next(_e)},0,!0)}),()=>(0,ce.m)(null==B?void 0:B.return)&&B.return()})}(Ee,je);if((0,Ge.L)(Ee))return function We(Ee,je){return ee((0,Ge.Q)(Ee),je)}(Ee,je)}throw(0,be.z)(Ee)}(Ee,je):(0,f.Xf)(Ee)}},8421:(Ye,we,P)=>{P.d(we,{Xf:()=>He});var f=P(655),J=P(1144),O=P(8239),ae=P(8306),te=P(3670),pe=P(2206),ue=P(4532),se=P(6495),ce=P(3260),$=P(576),U=P(7849),ee=P(8822);function He(De){if(De instanceof ae.y)return De;if(null!=De){if((0,te.c)(De))return function Ae(De){return new ae.y(ve=>{const Ee=De[ee.L]();if((0,$.m)(Ee.subscribe))return Ee.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,J.z)(De))return function Re(De){return new ae.y(ve=>{for(let Ee=0;Ee<De.length&&!ve.closed;Ee++)ve.next(De[Ee]);ve.complete()})}(De);if((0,O.t)(De))return function Le(De){return new ae.y(ve=>{De.then(Ee=>{ve.closed||(ve.next(Ee),ve.complete())},Ee=>ve.error(Ee)).then(null,U.h)})}(De);if((0,pe.D)(De))return be(De);if((0,se.T)(De))return function he(De){return new ae.y(ve=>{for(const Ee of De)if(ve.next(Ee),ve.closed)return;ve.complete()})}(De);if((0,ce.L)(De))return function Ge(De){return be((0,ce.Q)(De))}(De)}throw(0,ue.z)(De)}function be(De){return new ae.y(ve=>{(function We(De,ve){var Ee,je,Ue,B;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,f.KL)(De);!(je=yield Ee.next()).done;)if(ve.next(je.value),ve.closed)return}catch(_e){Ue={error:_e}}finally{try{je&&!je.done&&(B=Ee.return)&&(yield B.call(Ee))}finally{if(Ue)throw Ue.error}}ve.complete()})})(De,ve).catch(Ee=>ve.error(Ee))})}},6451:(Ye,we,P)=>{P.d(we,{T:()=>pe});var f=P(8189),J=P(8421),O=P(515),ae=P(7669),te=P(8996);function pe(...ue){const se=(0,ae.yG)(ue),ce=(0,ae._6)(ue,1/0),$=ue;return $.length?1===$.length?(0,J.Xf)($[0]):(0,f.J)(ce)((0,te.D)($,se)):O.E}},5403:(Ye,we,P)=>{P.d(we,{x:()=>J});var f=P(2961);function J(ae,te,pe,ue,se){return new O(ae,te,pe,ue,se)}class O extends f.Lv{constructor(te,pe,ue,se,ce,$){super(te),this.onFinalize=ce,this.shouldUnsubscribe=$,this._next=pe?function(U){try{pe(U)}catch(ee){te.error(ee)}}:super._next,this._error=se?function(U){try{se(U)}catch(ee){te.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(U){te.error(U)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var te;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(te=this.onFinalize)||void 0===te||te.call(this))}}}},4004:(Ye,we,P)=>{P.d(we,{U:()=>O});var f=P(4482),J=P(5403);function O(ae,te){return(0,f.e)((pe,ue)=>{let se=0;pe.subscribe((0,J.x)(ue,ce=>{ue.next(ae.call(te,ce,se++))}))})}},8189:(Ye,we,P)=>{P.d(we,{J:()=>O});var f=P(5577),J=P(4671);function O(ae=1/0){return(0,f.z)(J.y,ae)}},5577:(Ye,we,P)=>{P.d(we,{z:()=>se});var f=P(4004),J=P(8421),O=P(4482),ae=P(9672),te=P(5403),ue=P(576);function se(ce,$,U=1/0){return(0,ue.m)($)?se((ee,He)=>(0,f.U)((Ae,Re)=>$(ee,Ae,He,Re))((0,J.Xf)(ce(ee,He))),U):("number"==typeof $&&(U=$),(0,O.e)((ee,He)=>function pe(ce,$,U,ee,He,Ae,Re,Le){const he=[];let be=0,Ge=0,We=!1;const De=()=>{We&&!he.length&&!be&&$.complete()},ve=je=>be<ee?Ee(je):he.push(je),Ee=je=>{Ae&&$.next(je),be++;let Ue=!1;(0,J.Xf)(U(je,Ge++)).subscribe((0,te.x)($,B=>{null==He||He(B),Ae?ve(B):$.next(B)},()=>{Ue=!0},void 0,()=>{if(Ue)try{for(be--;he.length&&be<ee;){const B=he.shift();Re?(0,ae.f)($,Re,()=>Ee(B)):Ee(B)}De()}catch(B){$.error(B)}}))};return ce.subscribe((0,te.x)($,ve,()=>{We=!0,De()})),()=>{null==Le||Le()}}(ee,He,ce,U)))}},5363:(Ye,we,P)=>{P.d(we,{Q:()=>ae});var f=P(9672),J=P(4482),O=P(5403);function ae(te,pe=0){return(0,J.e)((ue,se)=>{ue.subscribe((0,O.x)(se,ce=>(0,f.f)(se,te,()=>se.next(ce),pe),()=>(0,f.f)(se,te,()=>se.complete(),pe),ce=>(0,f.f)(se,te,()=>se.error(ce),pe)))})}},3099:(Ye,we,P)=>{P.d(we,{B:()=>pe});var f=P(8996),J=P(5698),O=P(7579),ae=P(2961),te=P(4482);function pe(se={}){const{connector:ce=(()=>new O.x),resetOnError:$=!0,resetOnComplete:U=!0,resetOnRefCountZero:ee=!0}=se;return He=>{let Ae=null,Re=null,Le=null,he=0,be=!1,Ge=!1;const We=()=>{null==Re||Re.unsubscribe(),Re=null},De=()=>{We(),Ae=Le=null,be=Ge=!1},ve=()=>{const Ee=Ae;De(),null==Ee||Ee.unsubscribe()};return(0,te.e)((Ee,je)=>{he++,!Ge&&!be&&We();const Ue=Le=null!=Le?Le:ce();je.add(()=>{he--,0===he&&!Ge&&!be&&(Re=ue(ve,ee))}),Ue.subscribe(je),Ae||(Ae=new ae.Hp({next:B=>Ue.next(B),error:B=>{Ge=!0,We(),Re=ue(De,$,B),Ue.error(B)},complete:()=>{be=!0,We(),Re=ue(De,U),Ue.complete()}}),(0,f.D)(Ee).subscribe(Ae))})(He)}}function ue(se,ce,...$){return!0===ce?(se(),null):!1===ce?null:ce(...$).pipe((0,J.q)(1)).subscribe(()=>se())}},9468:(Ye,we,P)=>{P.d(we,{R:()=>J});var f=P(4482);function J(O,ae=0){return(0,f.e)((te,pe)=>{pe.add(O.schedule(()=>te.subscribe(pe),ae))})}},5698:(Ye,we,P)=>{P.d(we,{q:()=>ae});var f=P(515),J=P(4482),O=P(5403);function ae(te){return te<=0?()=>f.E:(0,J.e)((pe,ue)=>{let se=0;pe.subscribe((0,O.x)(ue,ce=>{++se<=te&&(ue.next(ce),te<=se&&ue.complete())}))})}},8505:(Ye,we,P)=>{P.d(we,{b:()=>te});var f=P(576),J=P(4482),O=P(5403),ae=P(4671);function te(pe,ue,se){const ce=(0,f.m)(pe)||ue||se?{next:pe,error:ue,complete:se}:pe;return ce?(0,J.e)(($,U)=>{var ee;null===(ee=ce.subscribe)||void 0===ee||ee.call(ce);let He=!0;$.subscribe((0,O.x)(U,Ae=>{var Re;null===(Re=ce.next)||void 0===Re||Re.call(ce,Ae),U.next(Ae)},()=>{var Ae;He=!1,null===(Ae=ce.complete)||void 0===Ae||Ae.call(ce),U.complete()},Ae=>{var Re;He=!1,null===(Re=ce.error)||void 0===Re||Re.call(ce,Ae),U.error(Ae)},()=>{var Ae,Re;He&&(null===(Ae=ce.unsubscribe)||void 0===Ae||Ae.call(ce)),null===(Re=ce.finalize)||void 0===Re||Re.call(ce)}))}):ae.y}},4408:(Ye,we,P)=>{P.d(we,{o:()=>te});var f=P(727);class J extends f.w0{constructor(ue,se){super()}schedule(ue,se=0){return this}}const O={setInterval(pe,ue,...se){const{delegate:ce}=O;return(null==ce?void 0:ce.setInterval)?ce.setInterval(pe,ue,...se):setInterval(pe,ue,...se)},clearInterval(pe){const{delegate:ue}=O;return((null==ue?void 0:ue.clearInterval)||clearInterval)(pe)},delegate:void 0};var ae=P(8737);class te extends J{constructor(ue,se){super(ue,se),this.scheduler=ue,this.work=se,this.pending=!1}schedule(ue,se=0){if(this.closed)return this;this.state=ue;const ce=this.id,$=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId($,ce,se)),this.pending=!0,this.delay=se,this.id=this.id||this.requestAsyncId($,this.id,se),this}requestAsyncId(ue,se,ce=0){return O.setInterval(ue.flush.bind(ue,this),ce)}recycleAsyncId(ue,se,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return se;O.clearInterval(se)}execute(ue,se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(ue,se);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,se){let $,ce=!1;try{this.work(ue)}catch(U){ce=!0,$=U||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:ue,scheduler:se}=this,{actions:ce}=se;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(ce,this),null!=ue&&(this.id=this.recycleAsyncId(se,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(Ye,we,P)=>{P.d(we,{v:()=>O});var f=P(6063);class J{constructor(te,pe=J.now){this.schedulerActionCtor=te,this.now=pe}schedule(te,pe=0,ue){return new this.schedulerActionCtor(this,te).schedule(ue,pe)}}J.now=f.l.now;class O extends J{constructor(te,pe=J.now){super(te,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(te){const{actions:pe}=this;if(this._active)return void pe.push(te);let ue;this._active=!0;do{if(ue=te.execute(te.state,te.delay))break}while(te=pe.shift());if(this._active=!1,ue){for(;te=pe.shift();)te.unsubscribe();throw ue}}}},4986:(Ye,we,P)=>{P.d(we,{z:()=>O});var f=P(4408);const O=new(P(7565).v)(f.o)},6063:(Ye,we,P)=>{P.d(we,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(Ye,we,P)=>{P.d(we,{z:()=>f});const f={setTimeout(J,O,...ae){const{delegate:te}=f;return(null==te?void 0:te.setTimeout)?te.setTimeout(J,O,...ae):setTimeout(J,O,...ae)},clearTimeout(J){const{delegate:O}=f;return((null==O?void 0:O.clearTimeout)||clearTimeout)(J)},delegate:void 0}},2202:(Ye,we,P)=>{P.d(we,{h:()=>J});const J=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Ye,we,P)=>{P.d(we,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Ye,we,P)=>{P.d(we,{_6:()=>pe,jO:()=>ae,yG:()=>te});var f=P(576);function O(ue){return ue[ue.length-1]}function ae(ue){return(0,f.m)(O(ue))?ue.pop():void 0}function te(ue){return function J(ue){return ue&&(0,f.m)(ue.schedule)}(O(ue))?ue.pop():void 0}function pe(ue,se){return"number"==typeof O(ue)?ue.pop():se}},8737:(Ye,we,P)=>{function f(J,O){if(J){const ae=J.indexOf(O);0<=ae&&J.splice(ae,1)}}P.d(we,{P:()=>f})},3888:(Ye,we,P)=>{function f(J){const ae=J(te=>{Error.call(te),te.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}P.d(we,{d:()=>f})},2806:(Ye,we,P)=>{P.d(we,{O:()=>ae,x:()=>O});var f=P(2416);let J=null;function O(te){if(f.v.useDeprecatedSynchronousErrorHandling){const pe=!J;if(pe&&(J={errorThrown:!1,error:null}),te(),pe){const{errorThrown:ue,error:se}=J;if(J=null,ue)throw se}}else te()}function ae(te){f.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=te)}},9672:(Ye,we,P)=>{function f(J,O,ae,te=0,pe=!1){const ue=O.schedule(function(){ae(),pe?J.add(this.schedule(null,te)):this.unsubscribe()},te);if(J.add(ue),!pe)return ue}P.d(we,{f:()=>f})},4671:(Ye,we,P)=>{function f(J){return J}P.d(we,{y:()=>f})},1144:(Ye,we,P)=>{P.d(we,{z:()=>f});const f=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(Ye,we,P)=>{P.d(we,{D:()=>J});var f=P(576);function J(O){return Symbol.asyncIterator&&(0,f.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(Ye,we,P)=>{function f(J){return"function"==typeof J}P.d(we,{m:()=>f})},3670:(Ye,we,P)=>{P.d(we,{c:()=>O});var f=P(8822),J=P(576);function O(ae){return(0,J.m)(ae[f.L])}},6495:(Ye,we,P)=>{P.d(we,{T:()=>O});var f=P(2202),J=P(576);function O(ae){return(0,J.m)(null==ae?void 0:ae[f.h])}},8239:(Ye,we,P)=>{P.d(we,{t:()=>J});var f=P(576);function J(O){return(0,f.m)(null==O?void 0:O.then)}},3260:(Ye,we,P)=>{P.d(we,{L:()=>ae,Q:()=>O});var f=P(655),J=P(576);function O(te){return(0,f.FC)(this,arguments,function*(){const ue=te.getReader();try{for(;;){const{value:se,done:ce}=yield(0,f.qq)(ue.read());if(ce)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(se)}}finally{ue.releaseLock()}})}function ae(te){return(0,J.m)(null==te?void 0:te.getReader)}},4482:(Ye,we,P)=>{P.d(we,{A:()=>J,e:()=>O});var f=P(576);function J(ae){return(0,f.m)(null==ae?void 0:ae.lift)}function O(ae){return te=>{if(J(te))return te.lift(function(pe){try{return ae(pe,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(Ye,we,P)=>{P.d(we,{h:()=>O});var f=P(2416),J=P(3410);function O(ae){J.z.setTimeout(()=>{const{onUnhandledError:te}=f.v;if(!te)throw ae;te(ae)})}},4532:(Ye,we,P)=>{function f(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(we,{z:()=>f})},655:(Ye,we,P)=>{function ae(W,ne){var X={};for(var ge in W)Object.prototype.hasOwnProperty.call(W,ge)&&ne.indexOf(ge)<0&&(X[ge]=W[ge]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var oe=0;for(ge=Object.getOwnPropertySymbols(W);oe<ge.length;oe++)ne.indexOf(ge[oe])<0&&Object.prototype.propertyIsEnumerable.call(W,ge[oe])&&(X[ge[oe]]=W[ge[oe]])}return X}function se(W,ne,X,ge){return new(X||(X=Promise))(function(Pe,st){function Ut(Zt){try{ze(ge.next(Zt))}catch(yn){st(yn)}}function Ot(Zt){try{ze(ge.throw(Zt))}catch(yn){st(yn)}}function ze(Zt){Zt.done?Pe(Zt.value):function oe(Pe){return Pe instanceof X?Pe:new X(function(st){st(Pe)})}(Zt.value).then(Ut,Ot)}ze((ge=ge.apply(W,ne||[])).next())})}function he(W){return this instanceof he?(this.v=W,this):new he(W)}function be(W,ne,X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,ge=X.apply(W,ne||[]),Pe=[];return oe={},st("next"),st("throw"),st("return"),oe[Symbol.asyncIterator]=function(){return this},oe;function st(Jt){ge[Jt]&&(oe[Jt]=function(qt){return new Promise(function(dr,Ht){Pe.push([Jt,qt,dr,Ht])>1||Ut(Jt,qt)})})}function Ut(Jt,qt){try{!function Ot(Jt){Jt.value instanceof he?Promise.resolve(Jt.value.v).then(ze,Zt):yn(Pe[0][2],Jt)}(ge[Jt](qt))}catch(dr){yn(Pe[0][3],dr)}}function ze(Jt){Ut("next",Jt)}function Zt(Jt){Ut("throw",Jt)}function yn(Jt,qt){Jt(qt),Pe.shift(),Pe.length&&Ut(Pe[0][0],Pe[0][1])}}function We(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var X,ne=W[Symbol.asyncIterator];return ne?ne.call(W):(W=function ee(W){var ne="function"==typeof Symbol&&Symbol.iterator,X=ne&&W[ne],ge=0;if(X)return X.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&ge>=W.length&&(W=void 0),{value:W&&W[ge++],done:!W}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),X={},ge("next"),ge("throw"),ge("return"),X[Symbol.asyncIterator]=function(){return this},X);function ge(Pe){X[Pe]=W[Pe]&&function(st){return new Promise(function(Ut,Ot){!function oe(Pe,st,Ut,Ot){Promise.resolve(Ot).then(function(ze){Pe({value:ze,done:Ut})},st)}(Ut,Ot,(st=W[Pe](st)).done,st.value)})}}}P.d(we,{FC:()=>be,KL:()=>We,_T:()=>ae,mG:()=>se,qq:()=>he})},5e3:(Ye,we,P)=>{P.d(we,{$8M:()=>ba,$Z:()=>Ls,AFp:()=>im,AaK:()=>se,CHM:()=>Po,CRH:()=>Zg,CZH:()=>rm,CqO:()=>s_,EJc:()=>tT,EpF:()=>Vw,F4k:()=>cg,FYo:()=>V_,FiY:()=>$n,G48:()=>Nb,GfV:()=>B_,Gpc:()=>U,JOm:()=>R,LFG:()=>Je,LSH:()=>Jc,Lbi:()=>Cf,NdJ:()=>o_,OlP:()=>cn,PXZ:()=>hm,Q6J:()=>n_,QGY:()=>lg,Qsj:()=>qE,R0b:()=>Us,RDi:()=>il,Rgc:()=>tc,SBq:()=>or,Sil:()=>iT,Suo:()=>sv,TTD:()=>Ui,TgZ:()=>ag,VLi:()=>uT,X6Q:()=>dT,XFs:()=>ct,Xpm:()=>ut,Y36:()=>nf,YKP:()=>Ng,YNc:()=>Tw,Yjl:()=>aa,Yz7:()=>qt,ZZ4:()=>_m,_Bn:()=>Ha,_UZ:()=>Ba,_Vd:()=>Pd,_c5:()=>gT,_uU:()=>aE,aQg:()=>Rv,c2e:()=>Db,cJS:()=>Ht,cg1:()=>E_,dDg:()=>vv,deG:()=>ph,dqk:()=>kt,eFA:()=>Dv,ekj:()=>p_,g9A:()=>Df,h0i:()=>kd,hGG:()=>Wu,hij:()=>y_,iGM:()=>jd,ifc:()=>Bt,ip1:()=>gv,kL8:()=>_g,lG2:()=>Qa,n5z:()=>Ea,oAB:()=>fr,oxw:()=>jw,q4F:()=>xg,qLn:()=>Fl,qOj:()=>Jp,qZA:()=>rf,s9C:()=>l_,sBO:()=>Ob,sIi:()=>vd,s_b:()=>Ud,soG:()=>nc,tBr:()=>Fr,tb:()=>Tf,tp0:()=>Ho,uIk:()=>zy,vHH:()=>Re,vpe:()=>Vs,wAp:()=>ht,xp6:()=>M0,z2F:()=>gm,zSh:()=>Yp,zs3:()=>La});var f=P(7579),J=P(727),O=P(8306),ae=P(6451),te=P(3099);function pe(i){for(let s in i)if(i[s]===pe)return s;throw Error("Could not find renamed property on target object.")}function ue(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function se(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(se).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ce(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const $=pe({__forward_ref__:pe});function U(i){return i.__forward_ref__=U,i.toString=function(){return se(this())},i}function ee(i){return He(i)?i():i}function He(i){return"function"==typeof i&&i.hasOwnProperty($)&&i.__forward_ref__===U}class Re extends Error{constructor(s,a){super(function Le(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function he(i){return"string"==typeof i?i:null==i?"":String(i)}function be(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():he(i)}function ve(i,s){const a=s?` in ${s}`:"";throw new Re(-201,`No provider for ${be(i)} found${a}`)}function Ot(i,s){null==i&&function ze(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function qt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ht(i){return{providers:i.providers||[],imports:i.imports||[]}}function Nt(i){return Ji(i,Pi)||Ji(i,qr)}function Ji(i,s){return i.hasOwnProperty(s)?i[s]:null}function hr(i){return i&&(i.hasOwnProperty(_s)||i.hasOwnProperty(_i))?i[_s]:null}const Pi=pe({\u0275prov:pe}),_s=pe({\u0275inj:pe}),qr=pe({ngInjectableDef:pe}),_i=pe({ngInjectorDef:pe});var ct=(()=>((ct=ct||{})[ct.Default=0]="Default",ct[ct.Host=1]="Host",ct[ct.Self=2]="Self",ct[ct.SkipSelf=4]="SkipSelf",ct[ct.Optional=8]="Optional",ct))();let zr;function _n(i){const s=zr;return zr=i,s}function js(i,s,a){const l=Nt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ct.Optional?null:void 0!==s?s:void ve(se(i),"Injector")}function Vn(i){return{toString:i}.toString()}var In=(()=>((In=In||{})[In.OnPush=0]="OnPush",In[In.Default=1]="Default",In))(),Bt=(()=>{return(i=Bt||(Bt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Bt;var i})();const nt="undefined"!=typeof globalThis&&globalThis,ft="undefined"!=typeof window&&window,Jn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,kt=nt||"undefined"!=typeof global&&global||ft||Jn,er={},L=[],G=pe({\u0275cmp:pe}),q=pe({\u0275dir:pe}),Ie=pe({\u0275pipe:pe}),H=pe({\u0275mod:pe}),Q=pe({\u0275fac:pe}),xe=pe({__NG_ELEMENT_ID__:pe});let Ze=0;function ut(i){return Vn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===In.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||L,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Bt.Emulated,id:"c",styles:i.styles||L,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,p=i.features,_=i.pipes;return l.id+=Ze++,l.inputs=oa(i.inputs,a),l.outputs=oa(i.outputs),p&&p.forEach(E=>E(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(nn):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(yt):null,l})}function nn(i){return Mn(i)||function pr(i){return i[q]||null}(i)}function yt(i){return function Xi(i){return i[Ie]||null}(i)}const xn={};function fr(i){return Vn(()=>{const s={type:i.type,bootstrap:i.bootstrap||L,declarations:i.declarations||L,imports:i.imports||L,exports:i.exports||L,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(xn[i.id]=i.type),s})}function oa(i,s){if(null==i)return er;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],p=c;Array.isArray(c)&&(p=c[1],c=c[0]),a[c]=l,s&&(s[c]=p)}return a}const Qa=ut;function aa(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Mn(i){return i[G]||null}function Rn(i,s){const a=i[H]||null;if(!a&&!0===s)throw new Error(`Type ${se(i)} does not have '\u0275mod' property.`);return a}function Rr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Fi(i){return Array.isArray(i)&&!0===i[1]}function eu(i){return 0!=(8&i.flags)}function fc(i){return 2==(2&i.flags)}function Li(i){return 1==(1&i.flags)}function Vi(i){return null!==i.template}function el(i){return 0!=(512&i[2])}function nr(i,s){return i.hasOwnProperty(Q)?i[Q]:null}class qs{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Ui(){return Ao}function Ao(i){return i.type.prototype.ngOnChanges&&(i.setInput=lh),Ec}function Ec(){const i=zs(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===er)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function lh(i,s,a,l){const c=zs(i)||function So(i,s){return i[bc]=s}(i,{previous:er,current:null}),p=c.current||(c.current={}),_=c.previous,E=this.declaredInputs[a],b=_[E];p[E]=new qs(b&&b.currentValue,s,_===er),i[l]=s}Ui.ngInherit=!0;const bc="__ngSimpleChanges__";function zs(i){return i[bc]||null}let Mo;function il(i){Mo=i}function en(i){return!!i.listen}const ha={createRenderer:(i,s)=>function Bi(){return void 0!==Mo?Mo:"undefined"!=typeof document?document:void 0}()};function zt(i){for(;Array.isArray(i);)i=i[0];return i}function Cs(i,s){return zt(s[i])}function zn(i,s){return zt(s[i.index])}function fn(i,s){return i.data[s]}function Wn(i,s){const a=s[i];return Rr(a)?a:a[0]}function Zs(i){return 4==(4&i[2])}function ts(i){return 128==(128&i[2])}function Ei(i,s){return null==s?null:i[s]}function $i(i){i[18]=0}function Ro(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const dt={lFrame:Oo(null),bindingsEnabled:!0};function iu(){return dt.bindingsEnabled}function Ce(){return dt.lFrame.lView}function Pt(){return dt.lFrame.tView}function Po(i){return dt.lFrame.contextLView=i,i[8]}function un(){let i=su();for(;null!==i&&64===i.type;)i=i.parent;return i}function su(){return dt.lFrame.currentTNode}function Yr(i,s){const a=dt.lFrame;a.currentTNode=i,a.isParent=s}function ll(){return dt.lFrame.isParent}function As(){return dt.lFrame.bindingIndex++}function uu(i,s){const a=dt.lFrame;a.bindingIndex=a.bindingRootIndex=i,ma(s)}function ma(i){dt.lFrame.currentDirectiveIndex=i}function cu(){return dt.lFrame.currentQueryIndex}function Tc(i){dt.lFrame.currentQueryIndex=i}function Ac(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function du(i,s,a){if(a&ct.SkipSelf){let c=s,p=i;for(;!(c=c.parent,null!==c||a&ct.Host||(c=Ac(p),null===c||(p=p[15],10&c.type))););if(null===c)return!1;s=c,i=p}const l=dt.lFrame=Sc();return l.currentTNode=s,l.lView=i,!0}function Ys(i){const s=Sc(),a=i[1];dt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Sc(){const i=dt.lFrame,s=null===i?null:i.child;return null===s?Oo(i):s}function Oo(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function xc(){const i=dt.lFrame;return dt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const hu=xc;function Nr(){const i=xc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Bn(){return dt.lFrame.selectedIndex}function Qs(i){dt.lFrame.selectedIndex=i}function Cn(){const i=dt.lFrame;return fn(i.tView,i.selectedIndex)}function ya(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:S}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),b&&(i.viewHooks||(i.viewHooks=[])).push(-a,b),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function rs(i,s,a){Rc(i,s,3,a)}function Js(i,s,a,l){(3&i[2])===a&&Rc(i,s,a,l)}function Nn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Rc(i,s,a,l){const p=null!=l?l:-1,_=s.length-1;let E=0;for(let b=void 0!==l?65535&i[18]:0;b<_;b++)if("number"==typeof s[b+1]){if(E=s[b],null!=l&&E>=l)break}else s[b]<0&&(i[18]+=65536),(E<p||-1==p)&&(op(i,a,s,b),i[18]=(4294901760&i[18])+b+2),b++}function op(i,s,a,l){const c=a[l]<0,p=a[l+1],E=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class ko{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function eo(i,s,a){const l=en(i);let c=0;for(;c<a.length;){const p=a[c];if("number"==typeof p){if(0!==p)break;c++;const _=a[c++],E=a[c++],b=a[c++];l?i.setAttribute(s,E,b,_):s.setAttributeNS(_,E,b)}else{const _=p,E=a[++c];Hi(_)?l&&i.setProperty(s,_,E):l?i.setAttribute(s,_,E):s.setAttribute(_,E),c++}}return c}function fh(i){return 3===i||4===i||6===i}function Hi(i){return 64===i.charCodeAt(0)}function Fo(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||Nc(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function Nc(i,s,a,l,c){let p=0,_=i.length;if(-1===s)_=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===s){_=-1;break}if(E>s){_=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==c&&(i[p+1]=c));if(l===i[p+1])return void(i[p+2]=c)}p++,null!==l&&p++,null!==c&&p++}-1!==_&&(i.splice(_,0,s),p=_+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==c&&i.splice(p++,0,c)}function ss(i){return-1!==i}function Pr(i){return 32767&i}function Et(i,s){let a=function jt(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let Lo=!0;function Vo(i){const s=Lo;return Lo=i,s}let yl=0;function jn(i,s){const a=xs(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,Uo(l.data,i),Uo(s,null),Uo(l.blueprint,null));const c=ir(i,s),p=i.injectorIndex;if(ss(c)){const _=Pr(c),E=Et(c,s),b=E[1].data;for(let A=0;A<8;A++)s[p+A]=E[_+A]|b[_+A]}return s[p+8]=c,p}function Uo(i,s){i.push(0,0,0,0,0,0,0,0,s)}function xs(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function ir(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const p=c[1],_=p.type;if(l=2===_?p.declTNode:1===_?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function _a(i,s,a){!function os(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(xe)&&(l=a[xe]),null==l&&(l=a[xe]=yl++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function as(i,s,a){if(a&ct.Optional)return i;ve(s,"NodeInjector")}function Jr(i,s,a,l){if(a&ct.Optional&&void 0===l&&(l=null),0==(a&(ct.Self|ct.Host))){const c=i[9],p=_n(void 0);try{return c?c.get(s,l,a&ct.Optional):js(s,l,a&ct.Optional)}finally{_n(p)}}return as(l,s,a)}function mu(i,s,a,l=ct.Default,c){if(null!==i){const p=function to(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(xe)?i[xe]:void 0;return"number"==typeof s?s>=0?255&s:Di:s}(a);if("function"==typeof p){if(!du(s,i,l))return l&ct.Host?as(c,a,l):Jr(s,a,l,c);try{const _=p(l);if(null!=_||l&ct.Optional)return _;ve(a)}finally{hu()}}else if("number"==typeof p){let _=null,E=xs(i,s),b=-1,A=l&ct.Host?s[16][6]:null;for((-1===E||l&ct.SkipSelf)&&(b=-1===E?ir(i,s):s[E+8],-1!==b&&_l(l,!1)?(_=s[1],E=Pr(b),s=Et(b,s)):E=-1);-1!==E;){const S=s[1];if(wa(p,E,S.data)){const k=lp(E,s,a,_,l,A);if(k!==ln)return k}b=s[E+8],-1!==b&&_l(l,s[1].data[E+8]===A)&&wa(p,E,s)?(_=S,E=Pr(b),s=Et(b,s)):E=-1}}}return Jr(s,a,l,c)}const ln={};function Di(){return new us(un(),Ce())}function lp(i,s,a,l,c,p){const _=s[1],E=_.data[i+8],S=sn(E,_,a,null==l?fc(E)&&Lo:l!=_&&0!=(3&E.type),c&ct.Host&&p===E);return null!==S?va(s,_,S,E):ln}function sn(i,s,a,l,c){const p=i.providerIndexes,_=s.data,E=1048575&p,b=i.directiveStart,S=p>>20,V=c?E+S:i.directiveEnd;for(let K=l?E:E+S;K<V;K++){const ye=_[K];if(K<b&&a===ye||K>=b&&ye.type===a)return K}if(c){const K=_[b];if(K&&Vi(K)&&K.type===a)return b}return null}function va(i,s,a,l){let c=i[a];const p=s.data;if(function fu(i){return i instanceof ko}(c)){const _=c;_.resolving&&function Ge(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Re(-200,`Circular dependency in DI detected for ${i}${a}`)}(be(p[a]));const E=Vo(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?_n(_.injectImpl):null;du(i,l,ct.Default);try{c=i[a]=_.factory(void 0,p,i,l),s.firstCreatePass&&a>=l.directiveStart&&function Zm(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:p}=s.type.prototype;if(l){const _=Ao(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==b&&_n(b),Vo(E),_.resolving=!1,hu()}}return c}function wa(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function _l(i,s){return!(i&ct.Self||i&ct.Host&&s)}class us{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return mu(this._tNode,this._lView,s,l,a)}}function Ea(i){return Vn(()=>{const s=i.prototype.constructor,a=s[Q]||Bo(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const p=c[Q]||Bo(c);if(p&&p!==a)return p;c=Object.getPrototypeOf(c)}return p=>new p})}function Bo(i){return He(i)?()=>{const s=Bo(ee(i));return s&&s()}:nr(i)}function ba(i){return function gu(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const p=a[c];if(fh(p))break;if(0===p)c+=2;else if("number"==typeof p)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(p===s)return a[c+1];c+=2}}}return null}(un(),i)}const no="__parameters__";function jo(i,s,a){return Vn(()=>{const l=function yu(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...p){if(this instanceof c)return l.apply(this,p),this;const _=new c(...p);return E.annotation=_,E;function E(b,A,S){const k=b.hasOwnProperty(no)?b[no]:Object.defineProperty(b,no,{value:[]})[no];for(;k.length<=S;)k.push(null);return(k[S]=k[S]||[]).push(_),b}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class cn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=qt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ph=new cn("AnalyzeForEntryComponents");function Or(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Or(l,s)):s!==i&&s.push(l)}return s}function yr(i,s){i.forEach(a=>Array.isArray(a)?yr(a,s):s(a))}function ro(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Ms(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function kr(i,s,a){let l=Ca(i,s);return l>=0?i[1|l]=a:(l=~l,function Da(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Fc(i,s){const a=Ca(i,s);if(a>=0)return i[1|a]}function Ca(i,s){return function Gi(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const p=l+(c-l>>1),_=i[p<<a];if(s===_)return p<<a;_>s?c=p:l=p+1}return~(c<<a)}(i,s,1)}const qi={},Ta="__NG_DI_FLAG__",Aa="ngTempTokenPath",C=/\n/gm,F="__source",Y=pe({provide:String,useValue:pe});let re;function Me(i){const s=re;return re=i,s}function Qe(i,s=ct.Default){if(void 0===re)throw new Re(203,"");return null===re?js(i,void 0,s):re.get(i,s&ct.Optional?null:void 0,s)}function Je(i,s=ct.Default){return(function gn(){return zr}()||Qe)(ee(i),s)}const Lt=Je;function vt(i){const s=[];for(let a=0;a<i.length;a++){const l=ee(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Re(900,"");let c,p=ct.Default;for(let _=0;_<l.length;_++){const E=l[_],b=Zn(E);"number"==typeof b?-1===b?c=E.token:p|=b:c=E}s.push(Je(c,p))}else s.push(Je(l))}return s}function En(i,s){return i[Ta]=s,i.prototype[Ta]=s,i}function Zn(i){return i[Ta]}const Fr=En(jo("Inject",i=>({token:i})),-1),$n=En(jo("Optional"),8),Ho=En(jo("SkipSelf"),4);class Pl{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ps(i){return i instanceof Pl?i.changingThisBreaksApplicationSecurity:i}const Ah=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,xa=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Tn=(()=>((Tn=Tn||{})[Tn.NONE=0]="NONE",Tn[Tn.HTML=1]="HTML",Tn[Tn.STYLE=2]="STYLE",Tn[Tn.SCRIPT=3]="SCRIPT",Tn[Tn.URL=4]="URL",Tn[Tn.RESOURCE_URL=5]="RESOURCE_URL",Tn))();function Jc(i){const s=function Tu(){const i=Ce();return i&&i[12]}();return s?s.sanitize(Tn.URL,i)||"":function bu(i,s){const a=function Ih(i){return i instanceof Pl&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Ps(i):function Du(i){return(i=String(i)).match(Ah)||i.match(xa)?i:"unsafe:"+i}(he(i))}const gt="__ngContext__";function dn(i,s){i[gt]=s}function Na(i){const s=function _r(i){return i[gt]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function oo(i){return i.ngOriginalError}function Si(i,...s){i.error(...s)}class Fl{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function Tp(i){return i&&i.ngErrorLogger||Si}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&oo(s);for(;a&&oo(a);)a=oo(a);return a||null}}const Ul=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(kt))();function y(i){return i instanceof Function?i():i}var R=(()=>((R=R||{})[R.Important=1]="Important",R[R.DashCase=2]="DashCase",R))();function de(i,s){return undefined(i,s)}function at(i){const s=i[3];return Fi(s)?s[3]:s}function si(i){return kh(i[13])}function Pa(i){return kh(i[4])}function kh(i){for(;null!==i&&!Fi(i);)i=i[4];return i}function Oa(i,s,a,l,c){if(null!=l){let p,_=!1;Fi(l)?p=l:Rr(l)&&(_=!0,l=l[0]);const E=zt(l);0===i&&null!==a?null==c?ly(s,a,E):jl(s,a,E,c||null,!0):1===i&&null!==a?jl(s,a,E,c||null,!0):2===i?function py(i,s,a){const l=Uh(i,s);l&&function TI(i,s,a,l){en(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,E,_):3===i&&s.destroyNode(E),null!=p&&function D0(i,s,a,l,c){const p=a[7];p!==zt(a)&&Oa(s,i,l,p,c);for(let E=10;E<a.length;E++){const b=a[E];jh(b[1],b,i,s,l,p)}}(s,i,p,a,c)}}function sd(i,s,a){if(en(i))return i.createElement(s,a);{const l=null!==a?function rl(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function uo(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,Ro(c,-1)),a.splice(l,1)}function Rp(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&uo(c,l),s>0&&(i[a-1][4]=l[4]);const p=Ms(i,10+s);!function zo(i,s){jh(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=p[19];null!==_&&_.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function uy(i,s){if(!(256&s[2])){const a=s[11];en(a)&&a.destroyNode&&jh(i,s,a,3,null,null),function Vh(i){let s=i[13];if(!s)return Np(i[1],i);for(;s;){let a=null;if(Rr(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Rr(s)&&Np(s[1],s),s=s[3];null===s&&(s=i),Rr(s)&&Np(s[1],s),a=s&&s[4]}s=a}}(s)}}function Np(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function Ur(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof ko)){const p=a[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const E=c[p[_]],b=p[_+1];try{b.call(E)}finally{}}else try{p.call(c)}finally{}}}}(i,s),function ES(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],E="function"==typeof _?_(s):zt(s[_]),b=l[c=a[p+2]],A=a[p+3];"boolean"==typeof A?E.removeEventListener(a[p],b,A):A>=0?l[c=A]():l[c=-A].unsubscribe(),p+=2}else{const _=l[c=a[p+1]];a[p].call(_)}if(null!==l){for(let p=c+1;p<l.length;p++)l[p]();s[7]=null}}(i,s),1===s[1].type&&en(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Fi(s[3])){a!==s[3]&&uo(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function lo(i,s,a){return function I0(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===Bt.None||c===Bt.Emulated)return null}return zn(l,a)}(i,s.parent,a)}function jl(i,s,a,l,c){en(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function ly(i,s,a){en(i)?i.appendChild(s,a):s.appendChild(a)}function cy(i,s,a,l,c){null!==l?jl(i,s,a,l,c):ly(i,s,a)}function Uh(i,s){return en(i)?i.parentNode(s):s.parentNode}let Bh=function hy(i,s,a){return 40&i.type?zn(i,a):null};function Ru(i,s,a,l){const c=lo(i,l,s),p=s[11],E=function dy(i,s,a){return Bh(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let b=0;b<a.length;b++)cy(p,c,a[b],E,!1);else cy(p,c,a,E,!1)}function Pp(i,s){if(null!==s){const a=s.type;if(3&a)return zn(s,i);if(4&a)return fy(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return Pp(i,l);{const c=i[s.index];return Fi(c)?fy(-1,c):zt(c)}}if(32&a)return de(s,i)()||zt(i[s.index]);{const l=Nu(i,s);return null!==l?Array.isArray(l)?l[0]:Pp(at(i[16]),l):Pp(i,s.next)}}return null}function Nu(i,s){return null!==s?i[16][6].projection[s.projection]:null}function fy(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return Pp(l,c)}return s[7]}function Op(i,s,a,l,c,p,_){for(;null!=a;){const E=l[a.index],b=a.type;if(_&&0===s&&(E&&dn(zt(E),l),a.flags|=4),64!=(64&a.flags))if(8&b)Op(i,s,a.child,l,c,p,!1),Oa(s,i,c,E,p);else if(32&b){const A=de(a,l);let S;for(;S=A();)Oa(s,i,c,S,p);Oa(s,i,c,E,p)}else 16&b?od(i,s,l,a,c,p):Oa(s,i,c,E,p);a=_?a.projectionNext:a.next}}function jh(i,s,a,l,c,p){Op(a,l,i.firstChild,s,c,p,!1)}function od(i,s,a,l,c,p){const _=a[16],b=_[6].projection[l.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)Oa(s,i,c,b[A],p);else Op(i,s,b,_[3],c,p,!0)}function C0(i,s,a){en(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function $h(i,s,a){en(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function Hh(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const p=s.length;if(c+p===l||i.charCodeAt(c+p)<=32)return c}a=c+1}}const gy="ng-template";function xI(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==Hh(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function T0(i){return 4===i.type&&i.value!==gy}function MI(i,s,a){return s===(4!==i.type||a?i.value:gy)}function Lp(i,s,a){let l=4;const c=i.attrs||[],p=function PI(i){for(let s=0;s<i.length;s++)if(fh(i[s]))return s;return i.length}(c);let _=!1;for(let E=0;E<s.length;E++){const b=s[E];if("number"!=typeof b){if(!_)if(4&l){if(l=2|1&l,""!==b&&!MI(i,b,a)||""===b&&1===s.length){if(co(l))return!1;_=!0}}else{const A=8&l?b:s[++E];if(8&l&&null!==i.attrs){if(!xI(i.attrs,A,a)){if(co(l))return!1;_=!0}continue}const k=RI(8&l?"class":b,c,T0(i),a);if(-1===k){if(co(l))return!1;_=!0;continue}if(""!==A){let V;V=k>p?"":c[k+1].toLowerCase();const K=8&l?V:null;if(K&&-1!==Hh(K,A,0)||2&l&&A!==V){if(co(l))return!1;_=!0}}}}else{if(!_&&!co(l)&&!co(b))return!1;if(_&&co(b))continue;_=!1,l=b|1&l}}return co(l)||_}function co(i){return 0==(1&i)}function RI(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let p=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)p=!0;else{if(1===_||2===_){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=p?1:2}return-1}return function S0(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function A0(i,s,a=!1){for(let l=0;l<s.length;l++)if(Lp(i,s[l],a))return!0;return!1}function Vp(i,s){return i?":not("+s.trim()+")":s}function Fa(i){let s=i[0],a=1,l=2,c="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const E=i[++a];c+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?c+="."+_:4&l&&(c+=" "+_);else""!==c&&!co(_)&&(s+=Vp(p,c),c=""),l=_,p=p||!co(l);a++}return""!==c&&(s+=Vp(p,c)),s}const St={};function M0(i){$l(Pt(),Ce(),Bn()+i,!1)}function $l(i,s,a,l){if(!l)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&rs(s,p,a)}else{const p=i.preOrderHooks;null!==p&&Js(s,p,0,a)}Qs(a)}function Up(i,s){return i<<17|s<<2}function Wi(i){return i>>17&32767}function Bp(i){return 2|i}function ho(i){return(131068&i)>>2}function Gh(i,s){return-131069&i|s<<2}function Hl(i){return 1|i}function Ty(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],p=a[l+1];if(-1!==p){const _=i.data[p];Tc(c),_.contentQueries(2,s[p],p)}}}function Wh(i,s,a,l,c,p,_,E,b,A){const S=s.blueprint.slice();return S[0]=c,S[2]=140|l,$i(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=E||i&&i[11],S[12]=b||i&&i[12]||null,S[9]=A||i&&i[9]||null,S[6]=p,S[16]=2==s.type?i[16]:S,S}function cd(i,s,a,l,c){let p=i.data[s];if(null===p)p=function Ay(i,s,a,l,c){const p=su(),_=ll(),b=i.data[s]=function q0(i,s,a,l,c,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=b),null!==p&&(_?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b)),b}(i,s,a,l,c),function hl(){return dt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=c;const _=function Ks(){const i=dt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return Yr(p,!0),p}function dd(i,s,a,l){if(0===a)return-1;const c=s.length;for(let p=0;p<a;p++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function ku(i,s,a){Ys(s);try{const l=i.viewQuery;null!==l&&Fy(1,l,a);const c=i.template;null!==c&&Zh(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Ty(i,s),i.staticViewQueries&&Fy(2,i.viewQuery,a);const p=i.components;null!==p&&function qp(i,s){for(let a=0;a<s.length;a++)X0(i,s[a])}(s,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Nr()}}function Wl(i,s,a,l){const c=s[2];if(256!=(256&c)){Ys(s);try{$i(s),function ou(i){return dt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Zh(i,s,a,2,l);const _=3==(3&c);if(_){const A=i.preOrderCheckHooks;null!==A&&rs(s,A,null)}else{const A=i.preOrderHooks;null!==A&&Js(s,A,0,null),Nn(s,0)}if(function XI(i){for(let s=si(i);null!==s;s=Pa(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],p=c[3];0==(1024&c[2])&&Ro(p,1),c[2]|=1024}}}(s),function JI(i){for(let s=si(i);null!==s;s=Pa(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];ts(l)&&Wl(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&Ty(i,s),_){const A=i.contentCheckHooks;null!==A&&rs(s,A)}else{const A=i.contentHooks;null!==A&&Js(s,A,1),Nn(s,1)}!function B0(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)Qs(~c);else{const p=c,_=a[++l],E=a[++l];uu(_,p),E(2,s[p])}}}finally{Qs(-1)}}(i,s);const E=i.components;null!==E&&function Gp(i,s){for(let a=0;a<s.length;a++)eD(i,s[a])}(s,E);const b=i.viewQuery;if(null!==b&&Fy(2,b,l),_){const A=i.viewCheckHooks;null!==A&&rs(s,A)}else{const A=i.viewHooks;null!==A&&Js(s,A,2),Nn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-73,1024&s[2]&&(s[2]&=-1025,Ro(s[3],-1))}finally{Nr()}}}function j0(i,s,a,l){const c=s[10],_=Zs(s);try{!_&&c.begin&&c.begin(),_&&ku(i,s,l),Wl(i,s,a,l)}finally{!_&&c.end&&c.end()}}function Zh(i,s,a,l,c){const p=Bn(),_=2&l;try{Qs(-1),_&&s.length>20&&$l(i,s,20,!1),a(l,c)}finally{Qs(p)}}function Zl(i,s,a){!iu()||(function qI(i,s,a,l){const c=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||jn(a,s),dn(l,s);const _=a.initialInputs;for(let E=c;E<p;E++){const b=i.data[E],A=Vi(b);A&&YI(s,a,b);const S=va(s,i,E,a);dn(S,s),null!==_&&Q0(0,E-c,S,b,0,_),A&&(Wn(a.index,s)[8]=S)}}(i,s,a,zn(a,s)),128==(128&a.flags)&&function zI(i,s,a){const l=a.directiveStart,c=a.directiveEnd,_=a.index,E=function fl(){return dt.lFrame.currentDirectiveIndex}();try{Qs(_);for(let b=l;b<c;b++){const A=i.data[b],S=s[b];ma(b),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&W0(A,S)}}finally{Qs(-1),ma(E)}}(i,s,a))}function zp(i,s,a=zn){const l=s.localNames;if(null!==l){let c=s.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],E=-1===_?a(s,i):i[_];i[c++]=E}}}function $0(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Wp(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Wp(i,s,a,l,c,p,_,E,b,A){const S=20+l,k=S+c,V=function UI(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:St);return a}(S,k),K="function"==typeof A?A():A;return V[1]={type:i,blueprint:V,template:a,queries:null,viewQuery:E,declTNode:s,data:V.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:K,incompleteFirstPass:!1}}function G0(i,s,a,l){const c=tw(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&nw(i).push(l,c.length-1))}function Kh(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function oi(i,s,a,l,c,p,_,E){const b=zn(s,a);let S,A=s.inputs;!E&&null!=A&&(S=A[l])?(Ly(i,a,S,l,c),fc(s)&&function $I(i,s){const a=Wn(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function jI(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=_?_(c,s.value||"",l):c,en(p)?p.setProperty(b,l,c):Hi(l)||(b.setProperty?b.setProperty(l,c):b[l]=c))}function xy(i,s,a,l){let c=!1;if(iu()){const p=function WI(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];A0(a,_.selectors,!1)&&(c||(c=[]),_a(jn(a,s),i,_.type),Vi(_)?(My(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===l?null:{"":-1};if(null!==p){c=!0,Z0(a,i.data.length,p.length);for(let S=0;S<p.length;S++){const k=p[S];k.providersResolver&&k.providersResolver(k)}let E=!1,b=!1,A=dd(i,s,p.length,null);for(let S=0;S<p.length;S++){const k=p[S];a.mergedAttrs=Fo(a.mergedAttrs,k.hostAttrs),K0(i,a,s,A,k),KI(A,k,_),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const V=k.type.prototype;!E&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!b&&(V.ngOnChanges||V.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),b=!0),A++}!function BI(i,s){const l=s.directiveEnd,c=i.data,p=s.attrs,_=[];let E=null,b=null;for(let A=s.directiveStart;A<l;A++){const S=c[A],k=S.inputs,V=null===p||T0(s)?null:J0(k,p);_.push(V),E=Kh(k,A,E),b=Kh(S.outputs,A,b)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=E,s.outputs=b}(i,a)}_&&function ZI(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const p=a[s[c+1]];if(null==p)throw new Re(-301,!1);l.push(s[c],p)}}}(a,l,_)}return a.mergedAttrs=Fo(a.mergedAttrs,a.attrs),c}function z0(i,s,a,l,c,p){const _=p.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const b=~s.index;(function GI(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=b&&E.push(b),E.push(l,c,_)}}function W0(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function My(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function KI(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Vi(s)&&(a[""]=i)}}function Z0(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function K0(i,s,a,l,c){i.data[l]=c;const p=c.factory||(c.factory=nr(c.type)),_=new ko(p,Vi(c),null);i.blueprint[l]=_,a[l]=_,z0(i,s,0,l,dd(i,a,c.hostVars,St),c)}function YI(i,s,a){const l=zn(s,i),c=$0(a),p=i[10],_=fd(i,Wh(i,c,null,a.onPush?64:16,l,s,p,p.createRenderer(l,a),null,null));i[s.index]=_}function fo(i,s,a,l,c,p){const _=zn(i,s);!function Y0(i,s,a,l,c,p,_){if(null==p)en(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const E=null==_?he(p):_(p,l||"",c);en(i)?i.setAttribute(s,c,E,a):a?s.setAttributeNS(a,c,E):s.setAttribute(c,E)}}(s[11],_,p,i.value,a,l,c)}function Q0(i,s,a,l,c,p){const _=p[s];if(null!==_){const E=l.setInput;for(let b=0;b<_.length;){const A=_[b++],S=_[b++],k=_[b++];null!==E?l.setInput(a,k,A,S):a[S]=k}}}function J0(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function Ry(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function eD(i,s){const a=Wn(s,i);if(ts(a)){const l=a[1];80&a[2]?Wl(l,a,l.template,a[8]):a[5]>0&&Ny(a)}}function Ny(i){for(let l=si(i);null!==l;l=Pa(l))for(let c=10;c<l.length;c++){const p=l[c];if(1024&p[2]){const _=p[1];Wl(_,p,_.template,p[8])}else p[5]>0&&Ny(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=Wn(a[l],i);ts(c)&&c[5]>0&&Ny(c)}}function X0(i,s){const a=Wn(s,i),l=a[1];(function tD(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),ku(l,a,a[8])}function fd(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Py(i){for(;i;){i[2]|=64;const s=at(i);if(el(i)&&!s)return i;i=s}return null}function ky(i){!function Oy(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=Na(a),c=l[1];j0(c,l,c.template,a)}}(i[8])}function Fy(i,s,a){Tc(0),s(i,a)}const ew=(()=>Promise.resolve(null))();function tw(i){return i[7]||(i[7]=[])}function nw(i){return i.cleanup||(i.cleanup=[])}function rw(i,s){const a=i[9],l=a?a.get(Fl,null):null;l&&l.handleError(s)}function Ly(i,s,a,l,c){for(let p=0;p<a.length;){const _=a[p++],E=a[p++],b=s[_],A=i.data[_];null!==A.setInput?A.setInput(b,c,l,E):b[E]=c}}function po(i,s,a){const l=Cs(s,i);!function Bl(i,s,a){en(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function pd(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,p=0;if(null!==s)for(let _=0;_<s.length;_++){const E=s[_];"number"==typeof E?p=E:1==p?c=ce(c,E):2==p&&(l=ce(l,E+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const Kp=new cn("INJECTOR",-1);class iw{get(s,a=qi){if(a===qi){const l=new Error(`NullInjectorError: No provider for ${se(s)}!`);throw l.name="NullInjectorError",l}return a}}const Yp=new cn("Set Injector scope."),md={},Vy={};let sw;function Fu(){return void 0===sw&&(sw=new iw),sw}function Uy(i,s=null,a=null,l){const c=ow(i,s,a,l);return c._resolveInjectorDefTypes(),c}function ow(i,s=null,a=null,l){return new iD(i,a,s||Fu(),l)}class iD{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&yr(a,E=>this.processProvider(E,s,a)),yr([s],E=>this.processInjectorType(E,[],p)),this.records.set(Kp,Kl(void 0,this));const _=this.records.get(Yp);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:se(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=qi,l=ct.Default){this.assertNotDestroyed();const c=Me(this),p=_n(void 0);try{if(!(l&ct.SkipSelf)){let E=this.records.get(s);if(void 0===E){const b=function dD(i){return"function"==typeof i||"object"==typeof i&&i instanceof cn}(s)&&Nt(s);E=b&&this.injectableDefInScope(b)?Kl(Qp(s),md):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(l&ct.Self?Fu():this.parent).get(s,a=l&ct.Optional&&a===qi?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Aa]=_[Aa]||[]).unshift(se(s)),c)throw _;return function Ns(i,s,a,l){const c=i[Aa];throw s[F]&&c.unshift(s[F]),i.message=function zi(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=se(s);if(Array.isArray(s))c=s.map(se).join(" -> ");else if("object"==typeof s){let p=[];for(let _ in s)if(s.hasOwnProperty(_)){let E=s[_];p.push(_+":"+("string"==typeof E?JSON.stringify(E):se(E)))}c=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(C,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[Aa]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{_n(p),Me(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(se(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Re(205,!1)}processInjectorType(s,a,l){if(!(s=ee(s)))return!1;let c=hr(s);const p=null==c&&s.ngModule||void 0,_=void 0===p?s:p,E=-1!==l.indexOf(_);if(void 0!==p&&(c=hr(p)),null==c)return!1;if(null!=c.imports&&!E){let S;l.push(_);try{yr(c.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===S&&(S=[]),S.push(k))})}finally{}if(void 0!==S)for(let k=0;k<S.length;k++){const{ngModule:V,providers:K}=S[k];yr(K,ye=>this.processProvider(ye,V,K||L))}}this.injectorDefTypes.add(_);const b=nr(_)||(()=>new _);this.records.set(_,Kl(b,md));const A=c.providers;if(null!=A&&!E){const S=s;yr(A,k=>this.processProvider(k,S,A))}return void 0!==p&&void 0!==s.providers}processProvider(s,a,l){let c=Lu(s=ee(s))?s:ee(s&&s.provide);const p=function oD(i,s,a){return uw(i)?Kl(void 0,i.useValue):Kl(aw(i),md)}(s);if(Lu(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=Kl(void 0,md,!0),_.factory=()=>vt(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,p)}hydrate(s,a){return a.value===md&&(a.value=Vy,a.value=a.factory()),"object"==typeof a.value&&a.value&&function lw(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=ee(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Qp(i){const s=Nt(i),a=null!==s?s.factory:nr(i);if(null!==a)return a;if(i instanceof cn)throw new Re(204,!1);if(i instanceof Function)return function sD(i){const s=i.length;if(s>0)throw function ti(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new Re(204,!1);const a=function Gr(i){const s=i&&(i[Pi]||i[qr]);if(s){const a=function Qn(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Re(204,!1)}function aw(i,s,a){let l;if(Lu(i)){const c=ee(i);return nr(c)||Qp(c)}if(uw(i))l=()=>ee(i.useValue);else if(function uD(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...vt(i.deps||[]));else if(function aD(i){return!(!i||!i.useExisting)}(i))l=()=>Je(ee(i.useExisting));else{const c=ee(i&&(i.useClass||i.provide));if(!function cD(i){return!!i.deps}(i))return nr(c)||Qp(c);l=()=>new c(...vt(i.deps))}return l}function Kl(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function uw(i){return null!==i&&"object"==typeof i&&Y in i}function Lu(i){return"function"==typeof i}let La=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return Uy({name:""},l,a,"");{const p=null!==(c=a.name)&&void 0!==c?c:"";return Uy({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=qi,i.NULL=new iw,i.\u0275prov=qt({token:i,providedIn:"any",factory:()=>Je(Kp)}),i.__NG_ELEMENT_ID__=-1,i})();function mD(i,s){ya(Na(i)[1],un())}function Jp(i){let s=function Yl(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(Vi(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Re(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const _=i;_.inputs=Ql(i.inputs),_.declaredInputs=Ql(i.declaredInputs),_.outputs=Ql(i.outputs);const E=c.hostBindings;E&&yD(i,E);const b=c.viewQuery,A=c.contentQueries;if(b&&Jh(i,b),A&&ui(i,A),ue(i.inputs,c.inputs),ue(i.declaredInputs,c.declaredInputs),ue(i.outputs,c.outputs),Vi(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const p=c.features;if(p)for(let _=0;_<p.length;_++){const E=p[_];E&&E.ngInherit&&E(i),E===Jp&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Ew(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=Fo(c.hostAttrs,a=Fo(a,c.hostAttrs))}}(l)}function Ql(i){return i===er?{}:i===L?[]:i}function Jh(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function ui(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,p)=>{s(l,c,p),a(l,c,p)}:s}function yD(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let Xp=null;function _d(){if(!Xp){const i=kt.Symbol;if(i&&i.iterator)Xp=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Xp=l)}}}return Xp}function vd(i){return!!yo(i)&&(Array.isArray(i)||!(i instanceof Map)&&_d()in i)}function yo(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function li(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function zy(i,s,a,l){const c=Ce();return li(c,As(),s)&&(Pt(),fo(Cn(),c,i,s,a,l)),zy}function Ed(i,s,a,l){return li(i,As(),a)?s+he(a)+l:St}function Tw(i,s,a,l,c,p,_,E){const b=Ce(),A=Pt(),S=i+20,k=A.firstCreatePass?function ED(i,s,a,l,c,p,_,E,b){const A=s.consts,S=cd(s,i,4,_||null,Ei(A,E));xy(s,a,S,Ei(A,b)),ya(s,S);const k=S.tViews=Wp(2,S,l,c,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,S),k.queries=s.queries.embeddedTView(S)),S}(S,A,b,s,a,l,c,p,_):A.data[S];Yr(k,!1);const V=b[11].createComment("");Ru(A,b,V,k),dn(V,b),fd(b,b[S]=Ry(V,b,V,k)),Li(k)&&Zl(A,b,k),null!=_&&zp(b,k,E)}function nf(i,s=ct.Default){const a=Ce();return null===a?Je(i,s):mu(un(),a,ee(i),s)}function Ls(){throw new Error("invalid")}function n_(i,s,a){const l=Ce();return li(l,As(),s)&&oi(Pt(),Cn(),l,i,s,l[11],a,!1),n_}function r_(i,s,a,l,c){const _=c?"class":"style";Ly(i,a,s.inputs[_],_,l)}function ag(i,s,a,l){const c=Ce(),p=Pt(),_=20+i,E=c[11],b=c[_]=sd(E,s,function sp(){return dt.lFrame.currentNamespace}()),A=p.firstCreatePass?function OD(i,s,a,l,c,p,_){const E=s.consts,A=cd(s,i,2,c,Ei(E,p));return xy(s,a,A,Ei(E,_)),null!==A.attrs&&pd(A,A.attrs,!1),null!==A.mergedAttrs&&pd(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(_,p,c,0,s,a,l):p.data[_];Yr(A,!0);const S=A.mergedAttrs;null!==S&&eo(E,b,S);const k=A.classes;null!==k&&$h(E,b,k);const V=A.styles;return null!==V&&C0(E,b,V),64!=(64&A.flags)&&Ru(p,c,b,A),0===function ga(){return dt.lFrame.elementDepthCount}()&&dn(b,c),function al(){dt.lFrame.elementDepthCount++}(),Li(A)&&(Zl(p,c,A),function Sy(i,s,a){if(eu(s)){const c=s.directiveEnd;for(let p=s.directiveStart;p<c;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}(p,A,c)),null!==l&&zp(c,A),ag}function rf(){let i=un();ll()?function cl(){dt.lFrame.isParent=!1}():(i=i.parent,Yr(i,!1));const s=i;!function ru(){dt.lFrame.elementDepthCount--}();const a=Pt();return a.firstCreatePass&&(ya(a,i),eu(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function up(i){return 0!=(16&i.flags)}(s)&&r_(a,s,Ce(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function pn(i){return 0!=(32&i.flags)}(s)&&r_(a,s,Ce(),s.stylesWithoutHost,!1),rf}function Ba(i,s,a,l){return ag(i,s,a,l),rf(),Ba}function Vw(){return Ce()}function lg(i){return!!i&&"function"==typeof i.then}function cg(i){return!!i&&"function"==typeof i.subscribe}const s_=cg;function o_(i,s,a,l){const c=Ce(),p=Pt(),_=un();return function Bw(i,s,a,l,c,p,_,E){const b=Li(l),S=i.firstCreatePass&&nw(i),k=s[8],V=tw(s);let K=!0;if(3&l.type||E){const Be=zn(l,s),Xe=E?E(Be):Be,Te=V.length,lt=E?Ft=>E(zt(Ft[l.index])):l.index;if(en(a)){let Ft=null;if(!E&&b&&(Ft=function FD(i,s,a,l){const c=i.cleanup;if(null!=c)for(let p=0;p<c.length-1;p+=2){const _=c[p];if(_===a&&c[p+1]===l){const E=s[7],b=c[p+2];return E.length>b?E[b]:null}"string"==typeof _&&(p+=2)}return null}(i,s,c,l.index)),null!==Ft)(Ft.__ngLastListenerFn__||Ft).__ngNextListenerFn__=p,Ft.__ngLastListenerFn__=p,K=!1;else{p=u_(l,s,k,p,!1);const Qt=a.listen(Xe,c,p);V.push(p,Qt),S&&S.push(c,lt,Te,Te+1)}}else p=u_(l,s,k,p,!0),Xe.addEventListener(c,p,_),V.push(p),S&&S.push(c,lt,Te,_)}else p=u_(l,s,k,p,!1);const ye=l.outputs;let Oe;if(K&&null!==ye&&(Oe=ye[c])){const Be=Oe.length;if(Be)for(let Xe=0;Xe<Be;Xe+=2){const on=s[Oe[Xe]][Oe[Xe+1]].subscribe(p),Ku=V.length;V.push(p,on),S&&S.push(c,l.index,Ku,-(Ku+1))}}}(p,c,c[11],_,i,s,!!a,l),o_}function a_(i,s,a,l){try{return!1!==a(l)}catch(c){return rw(i,c),!1}}function u_(i,s,a,l,c){return function p(_){if(_===Function)return l;const E=2&i.flags?Wn(i.index,s):s;0==(32&s[2])&&Py(E);let b=a_(s,0,l,_),A=p.__ngNextListenerFn__;for(;A;)b=a_(s,0,A,_)&&b,A=A.__ngNextListenerFn__;return c&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function jw(i=1){return function dh(i){return(dt.lFrame.contextLView=function pl(i,s){for(;i>0;)s=s[15],i--;return s}(i,dt.lFrame.contextLView))[8]}(i)}function l_(i,s,a){return sf(i,"",s,"",a),l_}function sf(i,s,a,l,c){const p=Ce(),_=Ed(p,s,a,l);return _!==St&&oi(Pt(),Cn(),p,i,_,p[11],c,!1),sf}function zw(i,s,a,l,c){const p=i[a+1],_=null===s;let E=l?Wi(p):ho(p),b=!1;for(;0!==E&&(!1===b||_);){const S=i[E+1];HD(i[E],s)&&(b=!0,i[E+1]=l?Hl(S):Bp(S)),E=l?Wi(S):ho(S)}b&&(i[a+1]=l?Bp(p):Hl(p))}function HD(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Ca(i,s)>=0}function p_(i,s){return function Ki(i,s,a,l){const c=Ce(),p=Pt(),_=function bi(i){const s=dt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);p.firstUpdatePass&&function tE(i,s,a,l){const c=i.data;if(null===c[a+1]){const p=c[Bn()],_=function eE(i,s){return s>=i.expandoStartIndex}(i,a);(function oE(i,s){return 0!=(i.flags&(s?16:32))})(p,l)&&null===s&&!_&&(s=!1),s=function nE(i,s,a,l){const c=function lu(i){const s=dt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=Ad(a=ds(null,i,s,a,l),s.attrs,l),p=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=ds(c,i,s,a,l),null===p){let b=function rE(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==ho(l))return i[Wi(l)]}(i,s,l);void 0!==b&&Array.isArray(b)&&(b=ds(null,i,s,b[1],l),b=Ad(b,s.attrs,l),function g_(i,s,a,l){i[Wi(a?s.classBindings:s.styleBindings)]=l}(i,s,l,b))}else p=function hi(i,s,a){let l;const c=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<c;p++)l=Ad(l,i[p].hostAttrs,a);return Ad(l,s.attrs,a)}(i,s,l)}return void 0!==p&&(l?s.residualClasses=p:s.residualStyles=p),a}(c,p,s,l),function jD(i,s,a,l,c,p){let _=p?s.classBindings:s.styleBindings,E=Wi(_),b=ho(_);i[l]=a;let S,A=!1;if(Array.isArray(a)){const k=a;S=k[1],(null===S||Ca(k,S)>0)&&(A=!0)}else S=a;if(c)if(0!==b){const V=Wi(i[E+1]);i[l+1]=Up(V,E),0!==V&&(i[V+1]=Gh(i[V+1],l)),i[E+1]=function vy(i,s){return 131071&i|s<<17}(i[E+1],l)}else i[l+1]=Up(E,0),0!==E&&(i[E+1]=Gh(i[E+1],l)),E=l;else i[l+1]=Up(b,0),0===E?E=l:i[b+1]=Gh(i[b+1],l),b=l;A&&(i[l+1]=Bp(i[l+1])),zw(i,S,l,!0),zw(i,S,l,!1),function $D(i,s,a,l,c){const p=c?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&Ca(p,s)>=0&&(a[l+1]=Hl(a[l+1]))}(s,S,i,l,p),_=Up(E,b),p?s.classBindings=_:s.styleBindings=_}(c,p,s,a,_,l)}}(p,i,_,l),s!==St&&li(c,_,s)&&function sE(i,s,a,l,c,p,_,E){if(!(3&s.type))return;const b=i.data,A=b[E+1];m_(function R0(i){return 1==(1&i)}(A)?hg(b,s,a,c,ho(A),_):void 0)||(m_(p)||function _y(i){return 2==(2&i)}(A)&&(p=hg(b,null,a,c,E,_)),function Fp(i,s,a,l,c){const p=en(i);if(s)c?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:R.DashCase;if(null==c)p?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),_|=R.Important),p?i.setStyle(a,l,c,_):a.style.setProperty(l,c,E?"important":"")}}}(l,_,Cs(Bn(),a),c,p))}(p,p.data[Bn()],c,c[11],i,c[_+1]=function QS(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=se(Ps(i)))),i}(s,a),l,_)}(i,s,null,!0),p_}function ds(i,s,a,l,c){let p=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(p=s[E],l=Ad(l,p.hostAttrs,c),p!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function Ad(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let p=0;p<s.length;p++){const _=s[p];"number"==typeof _?c=_:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),kr(i,_,!!a||s[++p]))}return void 0===i?null:i}function hg(i,s,a,l,c,p){const _=null===s;let E;for(;c>0;){const b=i[c],A=Array.isArray(b),S=A?b[1]:b,k=null===S;let V=a[c+1];V===St&&(V=k?L:void 0);let K=k?Fc(V,l):S===l?V:void 0;if(A&&!m_(K)&&(K=Fc(b,l)),m_(K)&&(E=K,_))return E;const ye=i[c+1];c=_?Wi(ye):ho(ye)}if(null!==s){let b=p?s.residualClasses:s.residualStyles;null!=b&&(E=Fc(b,l))}return E}function m_(i){return void 0!==i}function aE(i,s=""){const a=Ce(),l=Pt(),c=i+20,p=l.firstCreatePass?cd(l,c,1,s,null):l.data[c],_=a[c]=function id(i,s){return en(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Ru(l,a,_,p),Yr(p,!1)}function y_(i,s,a){const l=Ce(),c=Ed(l,i,s,a);return c!==St&&po(l,Bn(),c),y_}const Qo=void 0;var dC=["en",[["a","p"],["AM","PM"],Qo],[["AM","PM"],Qo,Qo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qo,"{1} 'at' {0}",Qo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function gE(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let xd={};function E_(i){const s=function af(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=b_(s);if(a)return a;const l=s.split("-")[0];if(a=b_(l),a)return a;if("en"===l)return dC;throw new Error(`Missing locale data for the locale "${i}".`)}function _g(i){return E_(i)[ht.PluralCase]}function b_(i){return i in xd||(xd[i]=kt.ng&&kt.ng.common&&kt.ng.common.locales&&kt.ng.common.locales[i]),xd[i]}var ht=(()=>((ht=ht||{})[ht.LocaleId=0]="LocaleId",ht[ht.DayPeriodsFormat=1]="DayPeriodsFormat",ht[ht.DayPeriodsStandalone=2]="DayPeriodsStandalone",ht[ht.DaysFormat=3]="DaysFormat",ht[ht.DaysStandalone=4]="DaysStandalone",ht[ht.MonthsFormat=5]="MonthsFormat",ht[ht.MonthsStandalone=6]="MonthsStandalone",ht[ht.Eras=7]="Eras",ht[ht.FirstDayOfWeek=8]="FirstDayOfWeek",ht[ht.WeekendRange=9]="WeekendRange",ht[ht.DateFormat=10]="DateFormat",ht[ht.TimeFormat=11]="TimeFormat",ht[ht.DateTimeFormat=12]="DateTimeFormat",ht[ht.NumberSymbols=13]="NumberSymbols",ht[ht.NumberFormats=14]="NumberFormats",ht[ht.CurrencyCode=15]="CurrencyCode",ht[ht.CurrencySymbol=16]="CurrencySymbol",ht[ht.CurrencyName=17]="CurrencyName",ht[ht.Currencies=18]="Currencies",ht[ht.Directionality=19]="Directionality",ht[ht.PluralCase=20]="PluralCase",ht[ht.ExtraData=21]="ExtraData",ht))();const uf="en-US";let _E=uf;function O_(i,s,a,l,c){if(i=ee(i),Array.isArray(i))for(let p=0;p<i.length;p++)O_(i[p],s,a,l,c);else{const p=Pt(),_=Ce();let E=Lu(i)?i:ee(i.provide),b=aw(i);const A=un(),S=1048575&A.providerIndexes,k=A.directiveStart,V=A.providerIndexes>>20;if(Lu(i)||!i.multi){const K=new ko(b,c,nf),ye=k_(E,s,c?S:S+V,k);-1===ye?(_a(jn(A,_),p,E),gf(p,i,s.length),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(K),_.push(K)):(a[ye]=K,_[ye]=K)}else{const K=k_(E,s,S+V,k),ye=k_(E,s,S,S+V),Oe=K>=0&&a[K],Be=ye>=0&&a[ye];if(c&&!Be||!c&&!Oe){_a(jn(A,_),p,E);const Xe=function jr(i,s,a,l,c){const p=new ko(i,a,nf);return p.multi=[],p.index=s,p.componentProviders=0,jE(p,c,l&&!a),p}(c?Br:FC,a.length,c,l,b);!c&&Be&&(a[ye].providerFactory=Xe),gf(p,i,s.length,0),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(Xe),_.push(Xe)}else gf(p,i,K>-1?K:ye,jE(a[c?ye:K],b,!c&&l));!c&&l&&Be&&a[ye].componentProviders++}}}function gf(i,s,a,l){const c=Lu(s),p=function lD(i){return!!i.useClass}(s);if(c||p){const b=(p?ee(s.useClass):s).prototype.ngOnDestroy;if(b){const A=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=A.indexOf(a);-1===S?A.push(a,[l,b]):A[S+1].push(l,b)}else A.push(a,b)}}}function jE(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function k_(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function FC(i,s,a,l){return Nd(this.multi,[])}function Br(i,s,a,l){const c=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=va(a,a[1],this.providerFactory.index,l);p=E.slice(0,_),Nd(c,p);for(let b=_;b<E.length;b++)p.push(E[b])}else p=[],Nd(c,p);return p}function Nd(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Ha(i,s=[]){return a=>{a.providersResolver=(l,c)=>function pf(i,s,a){const l=Pt();if(l.firstCreatePass){const c=Vi(i);O_(a,l.data,l.blueprint,c,!0),O_(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class $E{}class GE{resolveComponentFactory(s){throw function HE(i){const s=Error(`No component factory found for ${se(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Pd=(()=>{class i{}return i.NULL=new GE,i})();function Sg(){return Xl(un(),Ce())}function Xl(i,s){return new or(zn(i,s))}let or=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Sg,i})();function L_(i){return i instanceof or?i.nativeElement:i}class V_{}let qE=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function zE(){const i=Ce(),a=Wn(un().index,i);return function U_(i){return i[11]}(Rr(a)?a:i)}(),i})(),WE=(()=>{class i{}return i.\u0275prov=qt({token:i,providedIn:"root",factory:()=>null}),i})();class B_{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const xg=new B_("13.3.10"),j_={};function Mg(i,s,a,l,c=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&l.push(zt(p)),Fi(p))for(let E=10;E<p.length;E++){const b=p[E],A=b[1].firstChild;null!==A&&Mg(b[1],b,A,l)}const _=a.type;if(8&_)Mg(i,s,a.child,l);else if(32&_){const E=de(a,s);let b;for(;b=E();)l.push(b)}else if(16&_){const E=Nu(s,a);if(Array.isArray(E))l.push(...E);else{const b=at(s[16]);Mg(b[1],b,E,l,!0)}}a=c?a.projectionNext:a.next}return l}class Xo{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Mg(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Fi(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(Rp(s,l),Ms(a,l))}this._attachedToViewContainer=!1}uy(this._lView[1],this._lView)}onDestroy(s){G0(this._lView[1],this._lView,null,s)}markForCheck(){Py(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Qh(i,s,a){const l=s[10];l.begin&&l.begin();try{Wl(i,s,i.template,a)}catch(c){throw rw(s,c),c}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Re(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Lh(i,s){jh(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Re(902,"");this._appRef=s}}class ZE extends Xo{constructor(s){super(s),this._view=s}detectChanges(){ky(this._view)}checkNoChanges(){}get context(){return null}}class Rg extends Pd{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Mn(s);return new Od(a,this.ngModule)}}function $_(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Od extends $E{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function ad(i){return i.map(Fa).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return $_(this.componentDef.inputs)}get outputs(){return $_(this.componentDef.outputs)}create(s,a,l,c){const p=(c=c||this.ngModule)?function KE(i,s){return{get:(a,l,c)=>{const p=i.get(a,j_,c);return p!==j_||l===j_?p:s.get(a,l,c)}}}(s,c.injector):s,_=p.get(V_,ha),E=p.get(WE,null),b=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",S=l?function Zp(i,s,a){if(en(i))return i.selectRootElement(s,a===Bt.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(b,l,this.componentDef.encapsulation):sd(_.createRenderer(null,this.componentDef),A,function VC(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),k=this.componentDef.onPush?576:528,V=function Hy(i,s){return{components:[],scheduler:i||Ul,clean:ew,playerHandler:s||null,flags:0}}(),K=Wp(0,null,null,1,0,null,null,null,null,null),ye=Wh(null,K,V,k,null,null,_,b,E,p);let Oe,Be;Ys(ye);try{const Xe=function vw(i,s,a,l,c,p){const _=a[1];a[20]=i;const b=cd(_,20,2,"#host",null),A=b.mergedAttrs=s.hostAttrs;null!==A&&(pd(b,A,!0),null!==i&&(eo(c,i,A),null!==b.classes&&$h(c,i,b.classes),null!==b.styles&&C0(c,i,b.styles)));const S=l.createRenderer(i,s),k=Wh(a,$0(s),null,s.onPush?64:16,a[20],b,l,S,p||null,null);return _.firstCreatePass&&(_a(jn(b,a),_,s.type),My(_,b),Z0(b,a.length,1)),fd(a,k),a[20]=k}(S,this.componentDef,ye,_,b);if(S)if(l)eo(b,S,["ng-version",xg.full]);else{const{attrs:Te,classes:lt}=function x0(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===c?""!==p&&s.push(p,i[++l]):8===c&&a.push(p);else{if(!co(c))break;c=p}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Te&&eo(b,S,Te),lt&&lt.length>0&&$h(b,S,lt.join(" "))}if(Be=fn(K,20),void 0!==a){const Te=Be.projection=[];for(let lt=0;lt<this.ngContentSelectors.length;lt++){const Ft=a[lt];Te.push(null!=Ft?Array.from(Ft):null)}}Oe=function ww(i,s,a,l,c){const p=a[1],_=function HI(i,s,a){const l=un();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),K0(i,l,s,dd(i,s,1,null),a));const c=va(s,i,l.directiveStart,l);dn(c,s);const p=zn(l,s);return p&&dn(p,s),c}(p,a,s);if(l.components.push(_),i[8]=_,c&&c.forEach(b=>b(_,s)),s.contentQueries){const b=un();s.contentQueries(1,_,b.directiveStart)}const E=un();return!p.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Qs(E.index),z0(a[1],E,0,E.directiveStart,E.directiveEnd,s),W0(s,_)),_}(Xe,this.componentDef,ye,V,[mD]),ku(K,ye,null)}finally{Nr()}return new G_(this.componentType,Oe,Xl(Be,ye),ye,Be)}}class G_ extends class LC{}{constructor(s,a,l,c,p){super(),this.location=l,this._rootLView=c,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new ZE(c),this.componentType=s}get injector(){return new us(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class kd{}class Ng{}const ec=new Map;class XE extends kd{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Rg(this);const l=Rn(s);this._bootstrapComponents=y(l.bootstrap),this._r3Injector=ow(s,a,[{provide:kd,useValue:this},{provide:Pd,useValue:this.componentFactoryResolver}],se(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=La.THROW_IF_NOT_FOUND,l=ct.Default){return s===La||s===kd||s===Kp?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class q_ extends Ng{constructor(s){super(),this.moduleType=s,null!==Rn(s)&&function fi(i){const s=new Set;!function a(l){const c=Rn(l,!0),p=c.id;null!==p&&(function QE(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${se(s)} vs ${se(s.name)}`)}(p,ec.get(p),l),ec.set(p,l));const _=y(c.imports);for(const E of _)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new XE(this.moduleType,s)}}function X_(i){return s=>{setTimeout(i,void 0,s)}}const Vs=class HC extends f.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,p,_;let E=s,b=a||(()=>null),A=l;if(s&&"object"==typeof s){const k=s;E=null===(c=k.next)||void 0===c?void 0:c.bind(k),b=null===(p=k.error)||void 0===p?void 0:p.bind(k),A=null===(_=k.complete)||void 0===_?void 0:_.bind(k)}this.__isAsync&&(b=X_(b),E&&(E=X_(E)),A&&(A=X_(A)));const S=super.subscribe({next:E,error:b,complete:A});return s instanceof J.w0&&s.add(S),S}};function ev(){return this._results[_d()]()}class tv{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=_d(),l=tv.prototype;l[a]||(l[a]=ev)}get changes(){return this._changes||(this._changes=new Vs)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=Or(s);(this._changesDetected=!function cp(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],p=s[l];if(a&&(c=a(c),p=a(p)),p!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let tc=(()=>{class i{}return i.__NG_ELEMENT_ID__=jg,i})();const ib=tc,GC=class extends ib{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=Wh(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),ku(a,l,s),new Xo(l)}};function jg(){return Vd(un(),Ce())}function Vd(i,s){return 4&i.type?new GC(s,i,Xl(i,s)):null}let Ud=(()=>{class i{}return i.__NG_ELEMENT_ID__=sb,i})();function sb(){return rv(un(),Ce())}const qC=Ud,Bd=class extends qC{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return Xl(this._hostTNode,this._hostLView)}get injector(){return new us(this._hostTNode,this._hostLView)}get parentInjector(){const s=ir(this._hostTNode,this._hostLView);if(ss(s)){const a=Et(s,this._hostLView),l=Pr(s);return new us(a[1].data[l+8],a)}return new us(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=nv(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,p){const _=s&&!function Pn(i){return"function"==typeof i}(s);let E;if(_)E=a;else{const k=a||{};E=k.index,l=k.injector,c=k.projectableNodes,p=k.ngModuleRef}const b=_?s:new Od(Mn(s)),A=l||this.parentInjector;if(!p&&null==b.ngModule){const V=(_?A:this.parentInjector).get(kd,null);V&&(p=V)}const S=b.create(A,c,void 0,p);return this.insert(S.hostView,E),S}insert(s,a){const l=s._lView,c=l[1];if(function pa(i){return Fi(i[3])}(l)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const k=l[3],V=new Bd(k,k[6],k[3]);V.detach(V.indexOf(s))}}const p=this._adjustIndex(a),_=this._lContainer;!function ay(i,s,a,l){const c=10+l,p=a.length;l>0&&(a[c-1][4]=s),l<p-10?(s[4]=a[c],ro(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function CI(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(c,l,_,p);const E=fy(p,_),b=l[11],A=Uh(b,_[7]);return null!==A&&function Fh(i,s,a,l,c,p){l[0]=c,l[6]=s,jh(i,l,a,1,c,p)}(c,_[6],b,l,A,E),s.attachToViewContainerRef(),ro($g(_),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=nv(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=Rp(this._lContainer,a);l&&(Ms($g(this._lContainer),a),uy(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=Rp(this._lContainer,a);return l&&null!=Ms($g(this._lContainer),a)?new Xo(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function nv(i){return i[8]}function $g(i){return i[8]||(i[8]=[])}function rv(i,s){let a;const l=s[i.index];if(Fi(l))a=l;else{let c;if(8&i.type)c=zt(l);else{const p=s[11];c=p.createComment("");const _=zn(i,s);jl(p,Uh(p,_),c,function AI(i,s){return en(i)?i.nextSibling(s):s.nextSibling}(p,_),!1)}s[i.index]=a=Ry(l,s,c,i),fd(s,a)}return new Bd(a,i,s)}class $u{constructor(s){this.queryList=s,this.matches=null}clone(){return new $u(this.queryList)}setDirty(){this.queryList.setDirty()}}class iv{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let p=0;p<l;p++){const _=a.getByIndex(p);c.push(this.queries[_.indexInDeclarationView].clone())}return new iv(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Kg(s,a).matches&&this.queries[a].setDirty()}}class ob{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class Ga{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(s,c);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new Ga(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Gg{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Gg(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const p=l[c];this.matchTNodeWithReadOption(s,a,qg(a,p)),this.matchTNodeWithReadOption(s,a,sn(a,s,p,!1,!1))}else l===tc?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,sn(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===or||c===Ud||c===tc&&4&a.type)this.addMatch(a.index,-2);else{const p=sn(a,s,c,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function qg(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function mf(i,s,a,l){return-1===a?function ab(i,s){return 11&i.type?Xl(i,s):4&i.type?Vd(i,s):null}(s,i):-2===a?function ub(i,s,a){return a===or?Xl(s,i):a===tc?Vd(s,i):a===Ud?rv(s,i):void 0}(i,s,l):va(i,i[1],a,s)}function pi(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const p=i.data,_=a.matches,E=[];for(let b=0;b<_.length;b+=2){const A=_[b];E.push(A<0?null:mf(s,p[A],_[b+1],a.metadata.read))}c.matches=E}return c.matches}function zg(i,s,a,l){const c=i.queries.getByIndex(a),p=c.matches;if(null!==p){const _=pi(i,s,c,a);for(let E=0;E<p.length;E+=2){const b=p[E];if(b>0)l.push(_[E/2]);else{const A=p[E+1],S=s[-b];for(let k=10;k<S.length;k++){const V=S[k];V[17]===V[3]&&zg(V[1],V,A,l)}if(null!==S[9]){const k=S[9];for(let V=0;V<k.length;V++){const K=k[V];zg(K[1],K,A,l)}}}}}return l}function jd(i){const s=Ce(),a=Pt(),l=cu();Tc(l+1);const c=Kg(a,l);if(i.dirty&&Zs(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const p=c.crossesNgTemplate?zg(a,s,l,[]):pi(a,s,c,l);i.reset(p,L_),i.notifyOnChanges()}return!0}return!1}function sv(i,s,a,l){const c=Pt();if(c.firstCreatePass){const p=un();(function $d(i,s,a){null===i.queries&&(i.queries=new Ga),i.queries.track(new Gg(s,a))})(c,new ob(s,a,l),p.index),function av(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function ov(i,s,a){const l=new tv(4==(4&a));G0(i,s,l,l.destroy),null===s[19]&&(s[19]=new iv),s[19].queries.push(new $u(l))}(c,Ce(),a)}function Zg(){return function lb(i,s){return i[19].queries[s].queryList}(Ce(),cu())}function Kg(i,s){return i.queries.getByIndex(s)}function qd(...i){}const gv=new cn("Application Initializer");let rm=(()=>{class i{constructor(a){this.appInits=a,this.resolve=qd,this.reject=qd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const p=this.appInits[c]();if(lg(p))a.push(p);else if(s_(p)){const _=new Promise((E,b)=>{p.subscribe({complete:E,error:b})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Je(gv,8))},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const im=new cn("AppId",{providedIn:"root",factory:function bb(){return`${mv()}${mv()}${mv()}`}});function mv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Df=new cn("Platform Initializer"),Cf=new cn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Tf=new cn("appBootstrapListener");let Db=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const nc=new cn("LocaleId",{providedIn:"root",factory:()=>Lt(nc,ct.Optional|ct.SkipSelf)||function Af(){return"undefined"!=typeof $localize&&$localize.locale||uf}()}),tT=new cn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class rT{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let iT=(()=>{class i{compileModuleSync(a){return new q_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=y(Rn(a).declarations).reduce((_,E)=>{const b=Mn(E);return b&&_.push(new Od(b)),_},[]);return new rT(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Cb=(()=>Promise.resolve(0))();function sm(i){"undefined"==typeof Zone?Cb.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Us{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Vs(!1),this.onMicrotaskEmpty=new Vs(!1),this.onStable=new Vs(!1),this.onError=new Vs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function om(){let i=kt.requestAnimationFrame,s=kt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function yv(i){const s=()=>{!function aT(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(kt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,rc(i),i.isCheckStableRunning=!0,am(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),rc(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,p,_,E)=>{try{return _v(i),a.invokeTask(c,p,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),um(i)}},onInvoke:(a,l,c,p,_,E,b)=>{try{return _v(i),a.invoke(c,p,_,E,b)}finally{i.shouldCoalesceRunChangeDetection&&s(),um(i)}},onHasTask:(a,l,c,p)=>{a.hasTask(c,p),l===c&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,rc(i),am(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,c,p)=>(a.handleError(c,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Us.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Us.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+c,s,za,qd,qd);try{return p.runTask(_,a,l)}finally{p.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const za={};function am(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function rc(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function _v(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function um(i){i._nesting--,am(i)}class lm{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Vs,this.onMicrotaskEmpty=new Vs,this.onStable=new Vs,this.onError=new Vs}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let vv=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Us.assertNotInAngularZone(),sm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())sm(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(Je(Us))},i.\u0275prov=qt({token:i,factory:i.\u0275fac}),i})(),wv=(()=>{class i{constructor(){this._applications=new Map,dm.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return dm.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class cm{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function uT(i){dm=i}let dm=new cm,Io=null;const Ev=new cn("AllowMultipleToken"),bv=new cn("PlatformOnDestroy");class hm{constructor(s,a){this.name=s,this.token=a}}function Dv(i,s,a=[]){const l=`Platform: ${s}`,c=new cn(l);return(p=[])=>{let _=fm();if(!_||_.injector.get(Ev,!1)){const E=[...a,...p,{provide:c,useValue:!0}];i?i(E):function Sb(i){if(Io&&!Io.get(Ev,!1))throw new Re(400,"");Io=i;const s=i.get(Cv),a=i.get(Df,null);a&&a.forEach(l=>l())}(function xb(i=[],s){return La.create({name:s,providers:[{provide:Yp,useValue:"platform"},{provide:bv,useValue:()=>Io=null},...i]})}(E,l))}return function ic(i){const s=fm();if(!s)throw new Re(401,"");return s}()}}function fm(){var i;return null!==(i=null==Io?void 0:Io.get(Cv))&&void 0!==i?i:null}let Cv=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function pm(i,s){let a;return a="noop"===i?new lm:("zone.js"===i?void 0:i)||new Us({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),b=[{provide:Us,useValue:E}];return E.run(()=>{const A=La.create({providers:b,parent:this.injector,name:a.moduleType.name}),S=a.create(A),k=S.injector.get(Fl,null);if(!k)throw new Re(402,"");return E.runOutsideAngular(()=>{const V=E.onError.subscribe({next:K=>{k.handleError(K)}});S.onDestroy(()=>{qu(this._modules,S),V.unsubscribe()})}),function hs(i,s,a){try{const l=a();return lg(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(k,E,()=>{const V=S.injector.get(rm);return V.runInitializers(),V.donePromise.then(()=>(function gC(i){Ot(i,"Expected localeId to be defined"),"string"==typeof i&&(_E=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(nc,uf)||uf),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,l=[]){const c=Tv({},l);return function Iv(i,s,a){const l=new q_(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,c))}_moduleDoBootstrap(a){const l=a.injector.get(gm);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Re(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Re(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(bv,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Je(La))},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Tv(i,s){return Array.isArray(s)?s.reduce(Tv,i):Object.assign(Object.assign({},i),s)}let gm=(()=>{class i{constructor(a,l,c,p){this._zone=a,this._injector=l,this._exceptionHandler=c,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new O.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),E=new O.y(b=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{Us.assertNotInAngularZone(),sm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Us.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{A.unsubscribe(),S.unsubscribe()}});this.isStable=(0,ae.T)(_,E.pipe((0,te.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Re(405,"");let c;c=a instanceof $E?a:this._injector.get(Pd).resolveComponentFactory(a),this.componentTypes.push(c.componentType);const p=function Ab(i){return i.isBoundToModule}(c)?void 0:this._injector.get(kd),E=c.create(La.NULL,[],l||c.selector,p),b=E.location.nativeElement,A=E.injector.get(vv,null),S=A&&E.injector.get(wv);return A&&S&&S.registerApplication(b,A),E.onDestroy(()=>{this.detachView(E.hostView),qu(this.components,E),S&&S.unregisterApplication(b)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Re(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;qu(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Tf,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Je(Us),Je(La),Je(Fl),Je(rm))},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function qu(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let mm=!0,Rb=!1;function dT(){return Rb=!0,mm}function Nb(){if(Rb)throw new Error("Cannot enable prod mode after platform setup.");mm=!1}let Ob=(()=>{class i{}return i.__NG_ELEMENT_ID__=Hr,i})();function Hr(i){return function zd(i,s,a){if(fc(i)&&!a){const l=Wn(i.index,s);return new Xo(l,l)}return 47&i.type?new Xo(s[16],s):null}(un(),Ce(),16==(16&i))}class fT{constructor(){}supports(s){return vd(s)}create(s){return new pT(s)}}const fs=(i,s)=>s;class pT{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||fs}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,p=null;for(;a||l;){const _=!l||a&&a.currentIndex<Mv(l,c,p)?a:l,E=Mv(_,c,p),b=_.currentIndex;if(_===l)c--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{p||(p=[]);const A=E-c,S=b-c;if(A!=S){for(let V=0;V<A;V++){const K=V<p.length?p[V]:p[V]=0,ye=K+V;S<=ye&&ye<A&&(p[V]=K+1)}p[_.previousIndex]=S-A}}E!==b&&s(_,E,b)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!vd(s))throw new Re(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,p,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)p=s[E],_=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,p,_,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,E),l=!0),a=a._next}else c=0,function qy(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[_d()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,E=>{_=this._trackByFn(c,E),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,E,_,c)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,c)):s=this._addAfter(new Vb(a,l),p,c),s}_verifyReinsertion(s,a,l,c){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?s=this._reinsertAfter(p,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,p=s._nextRemoved;return null===c?this._removalsHead=p:c._nextRemoved=p,null===p?this._removalsTail=c:p._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new oc),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new oc),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Vb{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Mt{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class oc{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new Mt,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Mv(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class Fn{constructor(){}supports(s){return s instanceof Map||yo(s)}create(){return new wt}}class wt{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||yo(s)))throw new Re(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const p=c._prev,_=c._next;return p&&(p._next=_),_&&(_._prev=p),c._next=null,c._prev=null,c}const l=new Ub(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class Ub{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function zu(){return new _m([new fT])}let _m=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||zu()),deps:[[i,new Ho,new $n]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new Re(901,"")}}return i.\u0275prov=qt({token:i,providedIn:"root",factory:zu}),i})();function Gt(){return new Rv([new Fn])}let Rv=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Gt()),deps:[[i,new Ho,new $n]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new Re(901,"")}}return i.\u0275prov=qt({token:i,providedIn:"root",factory:Gt}),i})();const gT=Dv(null,"core",[]);let Wu=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Je(gm))},i.\u0275mod=fr({type:i}),i.\u0275inj=Ht({}),i})()},3942:(Ye,we,P)=>{P.d(we,{Z:()=>Re});var f=P(2090),J=P(4859),O=P(9681),ae=P(1877);class te{constructor(he,be){this._delegate=he,this.firebase=be,(0,O._addComponent)(he,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(he,be=O._DEFAULT_ENTRY_NAME){var Ge;this._delegate.checkDestroyed();const We=this._delegate.container.getProvider(he);return!We.isInitialized()&&"EXPLICIT"===(null===(Ge=We.getComponent())||void 0===Ge?void 0:Ge.instantiationMode)&&We.initialize(),We.getImmediate({identifier:be})}_removeServiceInstance(he,be=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(be)}_addComponent(he){(0,O._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,O._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function ce(){const Le=function se(Le){const he={},be={__esModule:!0,initializeApp:function De(Ue,B={}){const _e=O.initializeApp(Ue,B);if((0,f.r3)(he,_e.name))return he[_e.name];const W=new Le(_e,be);return he[_e.name]=W,W},app:We,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ee(Ue){const B=Ue.name,_e=B.replace("-compat","");if(O._registerComponent(Ue)&&"PUBLIC"===Ue.type){const W=(ne=We())=>{if("function"!=typeof ne[_e])throw ue.create("invalid-app-argument",{appName:B});return ne[_e]()};void 0!==Ue.serviceProps&&(0,f.ZB)(W,Ue.serviceProps),be[_e]=W,Le.prototype[_e]=function(...ne){return this._getService.bind(this,B).apply(this,Ue.multipleInstances?ne:[])}}return"PUBLIC"===Ue.type?be[_e]:null},removeApp:function Ge(Ue){delete he[Ue]},useAsService:function je(Ue,B){return"serverAuth"===B?null:B},modularAPIs:O}};function We(Ue){if(!(0,f.r3)(he,Ue=Ue||O._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:Ue});return he[Ue]}return be.default=be,Object.defineProperty(be,"apps",{get:function ve(){return Object.keys(he).map(Ue=>he[Ue])}}),We.App=Le,be}(te);return Le.INTERNAL=Object.assign(Object.assign({},Le.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function he(be){(0,f.ZB)(Le,be)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Le}(),U=new ae.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){U.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Le=self.firebase.SDK_VERSION;Le&&Le.indexOf("LITE")>=0&&U.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Re=$;!function Ae(Le){(0,O.registerVersion)("@firebase/app-compat","0.1.26",Le)}()},9681:(Ye,we,P)=>{P.r(we),P.d(we,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Pi,_DEFAULT_ENTRY_NAME:()=>Ot,_addComponent:()=>Jt,_addOrOverwriteComponent:()=>qt,_apps:()=>Zt,_clearComponents:()=>Ji,_components:()=>yn,_getProvider:()=>Ht,_registerComponent:()=>dr,_removeServiceInstance:()=>Nt,deleteApp:()=>ct,getApp:()=>qr,getApps:()=>_i,initializeApp:()=>_s,onLog:()=>_n,registerVersion:()=>gn,setLogLevel:()=>js});var f=P(5861),J=P(4859),O=P(1877),ae=P(2090),te=P(8766);class pe{constructor(Q){this.container=Q}getPlatformInfoString(){return this.container.getProviders().map(xe=>{if(function ue(H){const Q=H.getComponent();return"VERSION"===(null==Q?void 0:Q.type)}(xe)){const Ze=xe.getImmediate();return`${Ze.library}/${Ze.version}`}return null}).filter(xe=>xe).join(" ")}}const se="@firebase/app",$=new O.Yd("@firebase/app"),Ot="[DEFAULT]",ze={[se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Zt=new Map,yn=new Map;function Jt(H,Q){try{H.container.addComponent(Q)}catch(xe){$.debug(`Component ${Q.name} failed to register with FirebaseApp ${H.name}`,xe)}}function qt(H,Q){H.container.addOrOverwriteComponent(Q)}function dr(H){const Q=H.name;if(yn.has(Q))return $.debug(`There were multiple attempts to register component ${Q}.`),!1;yn.set(Q,H);for(const xe of Zt.values())Jt(xe,H);return!0}function Ht(H,Q){const xe=H.container.getProvider("heartbeat").getImmediate({optional:!0});return xe&&xe.triggerHeartbeat(),H.container.getProvider(Q)}function Nt(H,Q,xe=Ot){Ht(H,Q).clearInstance(xe)}function Ji(){yn.clear()}const Qn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class hr{constructor(Q,xe,Ze){this._isDeleted=!1,this._options=Object.assign({},Q),this._config=Object.assign({},xe),this._name=xe.name,this._automaticDataCollectionEnabled=xe.automaticDataCollectionEnabled,this._container=Ze,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Q){this.checkDestroyed(),this._automaticDataCollectionEnabled=Q}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Q){this._isDeleted=Q}checkDestroyed(){if(this.isDeleted)throw Qn.create("app-deleted",{appName:this._name})}}const Pi="9.8.2";function _s(H,Q={}){"object"!=typeof Q&&(Q={name:Q});const xe=Object.assign({name:Ot,automaticDataCollectionEnabled:!1},Q),Ze=xe.name;if("string"!=typeof Ze||!Ze)throw Qn.create("bad-app-name",{appName:String(Ze)});const ut=Zt.get(Ze);if(ut){if((0,ae.vZ)(H,ut.options)&&(0,ae.vZ)(xe,ut.config))return ut;throw Qn.create("duplicate-app",{appName:Ze})}const _t=new J.H0(Ze);for(const yt of yn.values())_t.addComponent(yt);const nn=new hr(H,xe,_t);return Zt.set(Ze,nn),nn}function qr(H=Ot){const Q=Zt.get(H);if(!Q)throw Qn.create("no-app",{appName:H});return Q}function _i(){return Array.from(Zt.values())}function ct(H){return zr.apply(this,arguments)}function zr(){return(zr=(0,f.Z)(function*(H){const Q=H.name;Zt.has(Q)&&(Zt.delete(Q),yield Promise.all(H.container.getProviders().map(xe=>xe.delete())),H.isDeleted=!0)})).apply(this,arguments)}function gn(H,Q,xe){var Ze;let ut=null!==(Ze=ze[H])&&void 0!==Ze?Ze:H;xe&&(ut+=`-${xe}`);const _t=ut.match(/\s|\//),nn=Q.match(/\s|\//);if(_t||nn){const yt=[`Unable to register library "${ut}" with version "${Q}":`];return _t&&yt.push(`library name "${ut}" contains illegal characters (whitespace or "/")`),_t&&nn&&yt.push("and"),nn&&yt.push(`version name "${Q}" contains illegal characters (whitespace or "/")`),void $.warn(yt.join(" "))}dr(new J.wA(`${ut}-version`,()=>({library:ut,version:Q}),"VERSION"))}function _n(H,Q){if(null!==H&&"function"!=typeof H)throw Qn.create("invalid-log-argument");(0,O.Am)(H,Q)}function js(H){(0,O.Ub)(H)}const In="firebase-heartbeat-store";let vi=null;function Do(){return vi||(vi=(0,te.X3)("firebase-heartbeat-database",1,{upgrade:(H,Q)=>{0===Q&&H.createObjectStore(In)}}).catch(H=>{throw Qn.create("storage-open",{originalErrorMessage:H.message})})),vi}function nt(){return(nt=(0,f.Z)(function*(H){try{return(yield Do()).transaction(In).objectStore(In).get(Zr(H))}catch(Q){throw Qn.create("storage-get",{originalErrorMessage:Q.message})}})).apply(this,arguments)}function ft(H,Q){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,f.Z)(function*(H,Q){try{const Ze=(yield Do()).transaction(In,"readwrite");return yield Ze.objectStore(In).put(Q,Zr(H)),Ze.done}catch(xe){throw Qn.create("storage-set",{originalErrorMessage:xe.message})}})).apply(this,arguments)}function Zr(H){return`${H.name}!${H.options.appId}`}class Xn{constructor(Q){this.container=Q,this._heartbeatsCache=null;const xe=this.container.getProvider("app").getImmediate();this._storage=new G(xe),this._heartbeatsCachePromise=this._storage.read().then(Ze=>(this._heartbeatsCache=Ze,Ze))}triggerHeartbeat(){var Q=this;return(0,f.Z)(function*(){const Ze=Q.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ut=er();if(null===Q._heartbeatsCache&&(Q._heartbeatsCache=yield Q._heartbeatsCachePromise),Q._heartbeatsCache.lastSentHeartbeatDate!==ut&&!Q._heartbeatsCache.heartbeats.some(_t=>_t.date===ut))return Q._heartbeatsCache.heartbeats.push({date:ut,agent:Ze}),Q._heartbeatsCache.heartbeats=Q._heartbeatsCache.heartbeats.filter(_t=>{const nn=new Date(_t.date).valueOf();return Date.now()-nn<=2592e6}),Q._storage.overwrite(Q._heartbeatsCache)})()}getHeartbeatsHeader(){var Q=this;return(0,f.Z)(function*(){if(null===Q._heartbeatsCache&&(yield Q._heartbeatsCachePromise),null===Q._heartbeatsCache||0===Q._heartbeatsCache.heartbeats.length)return"";const xe=er(),{heartbeatsToSend:Ze,unsentEntries:ut}=function L(H,Q=1024){const xe=[];let Ze=H.slice();for(const ut of H){const _t=xe.find(nn=>nn.agent===ut.agent);if(_t){if(_t.dates.push(ut.date),q(xe)>Q){_t.dates.pop();break}}else if(xe.push({agent:ut.agent,dates:[ut.date]}),q(xe)>Q){xe.pop();break}Ze=Ze.slice(1)}return{heartbeatsToSend:xe,unsentEntries:Ze}}(Q._heartbeatsCache.heartbeats),_t=(0,ae.L)(JSON.stringify({version:2,heartbeats:Ze}));return Q._heartbeatsCache.lastSentHeartbeatDate=xe,ut.length>0?(Q._heartbeatsCache.heartbeats=ut,yield Q._storage.overwrite(Q._heartbeatsCache)):(Q._heartbeatsCache.heartbeats=[],Q._storage.overwrite(Q._heartbeatsCache)),_t})()}}function er(){return(new Date).toISOString().substring(0,10)}class G{constructor(Q){this.app=Q,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Q=this;return(0,f.Z)(function*(){return(yield Q._canUseIndexedDBPromise)&&(yield function Bt(H){return nt.apply(this,arguments)}(Q.app))||{heartbeats:[]}})()}overwrite(Q){var xe=this;return(0,f.Z)(function*(){var Ze;if(yield xe._canUseIndexedDBPromise){const _t=yield xe.read();return ft(xe.app,{lastSentHeartbeatDate:null!==(Ze=Q.lastSentHeartbeatDate)&&void 0!==Ze?Ze:_t.lastSentHeartbeatDate,heartbeats:Q.heartbeats})}})()}add(Q){var xe=this;return(0,f.Z)(function*(){var Ze;if(yield xe._canUseIndexedDBPromise){const _t=yield xe.read();return ft(xe.app,{lastSentHeartbeatDate:null!==(Ze=Q.lastSentHeartbeatDate)&&void 0!==Ze?Ze:_t.lastSentHeartbeatDate,heartbeats:[..._t.heartbeats,...Q.heartbeats]})}})()}}function q(H){return(0,ae.L)(JSON.stringify({version:2,heartbeats:H})).length}!function Ie(H){dr(new J.wA("platform-logger",Q=>new pe(Q),"PRIVATE")),dr(new J.wA("heartbeat",Q=>new Xn(Q),"PRIVATE")),gn(se,"0.7.25",H),gn(se,"0.7.25","esm2017"),gn("fire-js","")}("")},4859:(Ye,we,P)=>{P.d(we,{H0:()=>se,wA:()=>O});var f=P(5861),J=P(2090);class O{constructor($,U,ee){this.name=$,this.instanceFactory=U,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ae="[DEFAULT]";class te{constructor($,U){this.name=$,this.container=U,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const U=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(U)){const ee=new J.BH;if(this.instancesDeferred.set(U,ee),this.isInitialized(U)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:U});He&&ee.resolve(He)}catch(He){}}return this.instancesDeferred.get(U).promise}getImmediate($){var U;const ee=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),He=null!==(U=null==$?void 0:$.optional)&&void 0!==U&&U;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(Ae){if(He)return null;throw Ae}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function ue(ce){return"EAGER"===ce.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(U){}for(const[U,ee]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(U);try{const Ae=this.getOrInitializeService({instanceIdentifier:He});ee.resolve(Ae)}catch(Ae){}}}}clearInstance($=ae){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,f.Z)(function*(){const U=Array.from($.instances.values());yield Promise.all([...U.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...U.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ae){return this.instances.has($)}getOptions($=ae){return this.instancesOptions.get($)||{}}initialize($={}){const{options:U={}}=$,ee=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:ee,options:U});for(const[Ae,Re]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(Ae)&&Re.resolve(He);return He}onInit($,U){var ee;const He=this.normalizeInstanceIdentifier(U),Ae=null!==(ee=this.onInitCallbacks.get(He))&&void 0!==ee?ee:new Set;Ae.add($),this.onInitCallbacks.set(He,Ae);const Re=this.instances.get(He);return Re&&$(Re,He),()=>{Ae.delete($)}}invokeOnInitCallbacks($,U){const ee=this.onInitCallbacks.get(U);if(ee)for(const He of ee)try{He($,U)}catch(Ae){}}getOrInitializeService({instanceIdentifier:$,options:U={}}){let ee=this.instances.get($);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=$,ce===ae?void 0:ce),options:U}),this.instances.set($,ee),this.instancesOptions.set($,U),this.invokeOnInitCallbacks(ee,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,ee)}catch(He){}var ce;return ee||null}normalizeInstanceIdentifier($=ae){return this.component?this.component.multipleInstances?$:ae:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class se{constructor($){this.name=$,this.providers=new Map}addComponent($){const U=this.getProvider($.name);if(U.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);U.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const U=new te($,this);return this.providers.set($,U),U}getProviders(){return Array.from(this.providers.values())}}},1877:(Ye,we,P)=>{P.d(we,{Am:()=>ce,Ub:()=>se,Yd:()=>ue,in:()=>J});const f=[];var J=(()=>{return($=J||(J={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",J;var $})();const O={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},ae=J.INFO,te={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},pe=($,U,...ee)=>{if(U<$.logLevel)return;const He=(new Date).toISOString(),Ae=te[U];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${U})`);console[Ae](`[${He}]  ${$.name}:`,...ee)};class ue{constructor(U){this.name=U,this._logLevel=ae,this._logHandler=pe,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(U){if(!(U in J))throw new TypeError(`Invalid value "${U}" assigned to \`logLevel\``);this._logLevel=U}setLogLevel(U){this._logLevel="string"==typeof U?O[U]:U}get logHandler(){return this._logHandler}set logHandler(U){if("function"!=typeof U)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=U}get userLogHandler(){return this._userLogHandler}set userLogHandler(U){this._userLogHandler=U}debug(...U){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...U),this._logHandler(this,J.DEBUG,...U)}log(...U){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...U),this._logHandler(this,J.VERBOSE,...U)}info(...U){this._userLogHandler&&this._userLogHandler(this,J.INFO,...U),this._logHandler(this,J.INFO,...U)}warn(...U){this._userLogHandler&&this._userLogHandler(this,J.WARN,...U),this._logHandler(this,J.WARN,...U)}error(...U){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...U),this._logHandler(this,J.ERROR,...U)}}function se($){f.forEach(U=>{U.setLogLevel($)})}function ce($,U){for(const ee of f){let He=null;U&&U.level&&(He=O[U.level]),ee.userLogHandler=null===$?null:(Ae,Re,...Le)=>{const he=Le.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch(Ge){return null}}).filter(be=>be).join(" ");Re>=(null!=He?He:Ae.logLevel)&&$({level:J[Re].toLowerCase(),message:he,args:Le,type:Ae.name})}}}},8766:(Ye,we,P)=>{P.d(we,{Lj:()=>De,X3:()=>We});var f=P(5861);let O,ae;const ue=new WeakMap,se=new WeakMap,ce=new WeakMap,$=new WeakMap,U=new WeakMap;let Ae={get(B,_e,W){if(B instanceof IDBTransaction){if("done"===_e)return se.get(B);if("objectStoreNames"===_e)return B.objectStoreNames||ce.get(B);if("store"===_e)return W.objectStoreNames[1]?void 0:W.objectStore(W.objectStoreNames[0])}return be(B[_e])},set:(B,_e,W)=>(B[_e]=W,!0),has:(B,_e)=>B instanceof IDBTransaction&&("done"===_e||"store"===_e)||_e in B};function he(B){return"function"==typeof B?function Le(B){return B!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(B)?function(..._e){return B.apply(Ge(this),_e),be(ue.get(this))}:function(..._e){return be(B.apply(Ge(this),_e))}:function(_e,...W){const ne=B.call(Ge(this),_e,...W);return ce.set(ne,_e.sort?_e.sort():[_e]),be(ne)}}(B):(B instanceof IDBTransaction&&function He(B){if(se.has(B))return;const _e=new Promise((W,ne)=>{const X=()=>{B.removeEventListener("complete",ge),B.removeEventListener("error",oe),B.removeEventListener("abort",oe)},ge=()=>{W(),X()},oe=()=>{ne(B.error||new DOMException("AbortError","AbortError")),X()};B.addEventListener("complete",ge),B.addEventListener("error",oe),B.addEventListener("abort",oe)});se.set(B,_e)}(B),((B,_e)=>_e.some(W=>B instanceof W))(B,function te(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(B,Ae):B)}function be(B){if(B instanceof IDBRequest)return function ee(B){const _e=new Promise((W,ne)=>{const X=()=>{B.removeEventListener("success",ge),B.removeEventListener("error",oe)},ge=()=>{W(be(B.result)),X()},oe=()=>{ne(B.error),X()};B.addEventListener("success",ge),B.addEventListener("error",oe)});return _e.then(W=>{W instanceof IDBCursor&&ue.set(W,B)}).catch(()=>{}),U.set(_e,B),_e}(B);if($.has(B))return $.get(B);const _e=he(B);return _e!==B&&($.set(B,_e),U.set(_e,B)),_e}const Ge=B=>U.get(B);function We(B,_e,{blocked:W,upgrade:ne,blocking:X,terminated:ge}={}){const oe=indexedDB.open(B,_e),Pe=be(oe);return ne&&oe.addEventListener("upgradeneeded",st=>{ne(be(oe.result),st.oldVersion,st.newVersion,be(oe.transaction))}),W&&oe.addEventListener("blocked",()=>W()),Pe.then(st=>{ge&&st.addEventListener("close",()=>ge()),X&&st.addEventListener("versionchange",()=>X())}).catch(()=>{}),Pe}function De(B,{blocked:_e}={}){const W=indexedDB.deleteDatabase(B);return _e&&W.addEventListener("blocked",()=>_e()),be(W).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],Ee=["put","add","delete","clear"],je=new Map;function Ue(B,_e){if(!(B instanceof IDBDatabase)||_e in B||"string"!=typeof _e)return;if(je.get(_e))return je.get(_e);const W=_e.replace(/FromIndex$/,""),ne=_e!==W,X=Ee.includes(W);if(!(W in(ne?IDBIndex:IDBObjectStore).prototype)||!X&&!ve.includes(W))return;const ge=function(){var oe=(0,f.Z)(function*(Pe,...st){const Ut=this.transaction(Pe,X?"readwrite":"readonly");let Ot=Ut.store;return ne&&(Ot=Ot.index(st.shift())),(yield Promise.all([Ot[W](...st),X&&Ut.done]))[0]});return function(st){return oe.apply(this,arguments)}}();return je.set(_e,ge),ge}!function Re(B){Ae=B(Ae)}(B=>D1(I1({},B),{get:(_e,W,ne)=>Ue(_e,W)||B.get(_e,W,ne),has:(_e,W)=>!!Ue(_e,W)||B.has(_e,W)}))},5861:(Ye,we,P)=>{function f(O,ae,te,pe,ue,se,ce){try{var $=O[se](ce),U=$.value}catch(ee){return void te(ee)}$.done?ae(U):Promise.resolve(U).then(pe,ue)}function J(O){return function(){var ae=this,te=arguments;return new Promise(function(pe,ue){var se=O.apply(ae,te);function ce(U){f(se,pe,ue,ce,$,"next",U)}function $(U){f(se,pe,ue,ce,$,"throw",U)}ce(void 0)})}}P.d(we,{Z:()=>J})}},Ye=>{Ye(Ye.s=4999)}]);